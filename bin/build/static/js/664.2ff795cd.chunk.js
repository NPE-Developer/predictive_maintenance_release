"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[664],{1233:(e,t,r)=>{r.d(t,{e:()=>a,w:()=>l});var i=r(8443),n=r(2340);class a{static async GetMachineConfig(e){let t=`${i.C}/api/extension/following_error/v1/machine`;null!=e&&(t+=`?machine_id=${e}`);const r=await n.A.fetchAuth(t);if(200!==r.status)throw new Error(r.message);if(!Array.isArray(r.data))throw new Error("invalid machine config response");for(let i=0;i<r.data.length;i++){var a,l;const e=r.data[i];if("number"!=typeof e.machine_id)throw new Error("invalid machine_id value");if("number"!=typeof(null!==(a=e.following_error_warn)&&void 0!==a?a:0))throw new Error("invalid following_error_warn value");if("number"!=typeof(null!==(l=e.following_error_alarm)&&void 0!==l?l:0))throw new Error("invalid following_error_alarm value")}return r.data}static async UpsertMachineConfig(e,t){const r=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/machine`,{method:"PATCH",body:JSON.stringify({machine_id:e,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error(r.message);return r}}class l{static async DashboardLevel1(e,t){const r=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/l1?start_date=${e}&end_date=${t}`);if(200!==r.status)throw new Error(r.message);const a=Array.isArray(r.data)?r.data:[];for(let i=0;i<a.length;i++){if("number"!=typeof a[i].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof a[i].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(a[i].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof a[i].ool_following_error)throw new Error("invalid ool_following_error value")}return a}static async DashboardLevel2(e,t,r){const a=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/l2?business_unit_id=${r}&start_date=${e}&end_date=${t}`);if(200!==a.status)throw new Error(a.message);const l=Array.isArray(a.data)?a.data:[];for(let i=0;i<l.length;i++){if("number"!=typeof l[i].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof l[i].link_up)throw new Error("invalid link_up value");if(!Array.isArray(l[i].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof l[i].ool_following_error)throw new Error("invalid ool_following_error value")}return l}static async DashboardLevel3(e,t,r){const a=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/l3?link_up_id=${r}&start_date=${e}&end_date=${t}`);if(200!==a.status)throw new Error(a.message);const l=Array.isArray(a.data)?a.data:[];for(let i=0;i<l.length;i++){if("number"!=typeof l[i].machine_id)throw new Error("invalid machine_id value");if("number"!=typeof l[i].ool_following_error)throw new Error("invalid ool_following_error value")}return l}static async DashboardLevel4(e,t,r){const a=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/data?machine_id=${r}&start_date=${e}&end_date=${t}`);if(200!==a.status)throw new Error(a.message);const l=Array.isArray(a.data)?a.data:[];for(let i=0;i<l.length;i++){if("number"!=typeof l[i].following_error)throw new Error("invalid following_error value");if(void 0!=l[i].following_error_warn&&"number"!=typeof l[i].following_error_warn)throw new Error("invalid following_error_warn value");if(void 0!=l[i].following_error_alarm&&"number"!=typeof l[i].following_error_alarm)throw new Error("invalid following_error_alarm value");if("Invalid Date"==new Date(l[i].created_at).toString())throw new Error("invalid created_at value");l[i].created_at=new Date(l[i].created_at)}return l}static async DashboardLevel1Realtime(){const e=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/l1/realtime`);if(200!==e.status)throw new Error(e.message);const t=Array.isArray(e.data)?e.data:[];for(let r=0;r<t.length;r++){if("number"!=typeof t[r].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof t[r].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(t[r].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof t[r].ool_following_error)throw new Error("invalid ool_following_error value")}return t}static async DashboardLevel2Realtime(e){const t=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/l2/realtime?business_unit_id=${e}`);if(200!==t.status)throw new Error(t.message);const r=Array.isArray(t.data)?t.data:[];for(let i=0;i<r.length;i++){if("number"!=typeof r[i].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof r[i].link_up)throw new Error("invalid link_up value");if(!Array.isArray(r[i].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof r[i].ool_following_error)throw new Error("invalid ool_following_error value")}return r}static async DashboardLevel3Realtime(e){const t=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/l3/realtime?link_up_id=${e}`);if(200!==t.status)throw new Error(t.message);const r=Array.isArray(t.data)?t.data:[];for(let i=0;i<r.length;i++){if("number"!=typeof r[i].machine_id)throw new Error("invalid machine_id value");if("number"!=typeof r[i].ool_following_error)throw new Error("invalid ool_following_error value")}return r}static async DashboardLevel4Realtime(e){const t=await n.A.fetchAuth(`${i.C}/api/extension/following_error/v1/data/realtime?machine_id=${e}`);if(200!==t.status)throw new Error(t.message);const r=Array.isArray(t.data)?t.data:[];for(let i=0;i<r.length;i++){if("number"!=typeof r[i].following_error)throw new Error("invalid following_error value");if(void 0!=r[i].following_error_warn&&"number"!=typeof r[i].following_error_warn)throw new Error("invalid following_error_warn value");if(void 0!=r[i].following_error_alarm&&"number"!=typeof r[i].following_error_alarm)throw new Error("invalid following_error_alarm value");if("Invalid Date"==new Date(r[i].created_at).toString())throw new Error("invalid created_at value");r[i].created_at=new Date(r[i].created_at)}return r}}},1982:(e,t,r)=>{r.d(t,{A:()=>i});const i={box:"Popup_box__L6ukI",modalPilih:"Popup_modalPilih__A4Edx",slideIn:"Popup_slideIn__CW6qc",containerfilter:"Popup_containerfilter__OBopv",modalConfirm:"Popup_modalConfirm__D-kYn",tabView:"Popup_tabView__GpztR",modalKeyboardNumeric:"Popup_modalKeyboardNumeric__9bmMr",modalKeyboard:"Popup_modalKeyboard__0ECMp",buttonKey:"Popup_buttonKey__4FEI6",modalTable:"Popup_modalTable__S-lni",modal:"Popup_modal__oHjOC",modaldetail:"Popup_modaldetail__uqSWM",buttons:"Popup_buttons__6SigF",input:"Popup_input__l3MOR",title:"Popup_title__53Wuz",modalpilih:"Popup_modalpilih__V8Sgk",form:"Popup_form__8bjUk",containerkey:"Popup_containerkey__xsPEg",modalmobile:"Popup_modalmobile__kvm78",hide:"Popup_hide__ieQY9",close:"Popup_close__eT9CH",frame:"Popup_frame__v0jqt"}},2087:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(1121),n=r(9223),a=r.n(n);const l=class{static export(e,t,r){const i=new(a().Workbook),n=i.addWorksheet(e),l=e=>e>=0&&e<=51?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"][e]:"Invalid number";t.map((e,t)=>{n.getColumn(`${l(t)}`).width=20,n.getCell(`${l(t)}1`).value=String(e.toUpperCase()),n.getCell(`${l(t)}1`).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"c8c8c8"}},font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}}),r.map((e,r)=>{const i=[];t.map(t=>{null!=e[t]?i.push(e[t]):i.push("")});n.addRow(i).eachCell(e=>{e.style={alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}})}),i.xlsx.writeBuffer().then(t=>{const r=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=`${e}.xlsx`,i.click(),window.URL.revokeObjectURL(i.href)})}static async import(e){const t=new(a().Workbook);await t.xlsx.load(e);const r=[];if(t.eachSheet(e=>{const t=[];e.eachRow(e=>{t.push(e.values)}),r.push(t)}),r.length>0){const e=r[0],t=[];for(let r=1;r<e.length;r++){const a={};for(let t=0;t<e[r].length;t++){var n;if(null!=e[0][t]&&"string"==typeof e[0][t])if(e[r][t]instanceof Date)a[e[0][t].toLowerCase()]=(0,i.GP)(e[r][t],"yyyy-MM-dd HH:mm:ss");else a[e[0][t].toLowerCase()]="object"==typeof e[r][t]?e[r][t].result:null!==(n=e[r][t])&&void 0!==n?n:""}t.push(a)}return t}return[]}}},2490:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(5043),n=r(579);function a(e){const{detailCard:t,customTitleJSX:r,detailColor:a,detailTitle:l,backgroundImage:o,stateShow:s,backgroundColor:d,borderColor:c}=e,[u,h]=(0,i.useState)(null!==s&&void 0!==s&&s);return(0,n.jsxs)("div",{style:{background:null!=o?`url(${o})`:"",backgroundColor:null!=d?`${d}`:"",backgroundRepeat:"no-repeat",backgroundSize:"cover",padding:"1vh",borderRadius:"12px",margin:"1vh 0vw",border:null!=c?`2px solid ${c}`:"2px solid var(--secondary-color)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"end",fontWeight:"600",cursor:"pointer"},onClick:()=>h(!u),children:[r?"":(0,n.jsx)("div",{}),null!==r&&void 0!==r?r:(0,n.jsx)("div",{style:{color:null!==a&&void 0!==a?a:"black",fontSize:"2.5vh"},children:null!==l&&void 0!==l?l:"DETAILS"}),(0,n.jsx)("div",{style:{color:null!==a&&void 0!==a?a:"black",fontSize:"2.5vh",float:"right",transition:"transform 0.3s",transform:u?"rotate(+90deg)":"rotate(0deg)"},children:">"})]}),!0===u?(0,n.jsx)("hr",{style:{color:null!==a&&void 0!==a?a:"black",border:"1px solid",margin:"1vh 0vw"}}):"",(0,n.jsx)("div",{children:!0===u?t:""})]})}},3109:(e,t,r)=>{e.exports=r.p+"static/media/backgroundCardBlue.5a970be0b92046f9f009.jpg"},3950:(e,t,r)=>{r.d(t,{t:()=>a});var i=r(8443),n=r(2340);class a{static async GetAllMachine(e){let t=`${i.C}/api/v1/machine`;null!=e&&(t+=`?link_up_id=${e}`);const r=await n.A.fetchAuth(t);if(200!==r.status)throw new Error(r.message);const a=Array.isArray(r.data)?r.data:[],l=[];for(let i=0;i<a.length;i++)l.push({machine_id:a[i].machine_id,machine:a[i].machine,machine_warn:a[i].machine_warn,machine_alarm:a[i].machine_alarm,link_up:a[i].link_up,machine_type:a[i].machine_type,gateway_host:a[i].gateway_host,gateway_port:a[i].gateway_port,pressure_slave_id:a[i].pressure_slave_id,vibration_slave_id:a[i].vibration_slave_id});return l}static async AddMachine(e){let t=await n.A.fetchAuth(`${i.C}/api/v1/machine`,{method:"POST",body:JSON.stringify({...e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}static async UpdateMachine(e,t){let r=await n.A.fetchAuth(`${i.C}/api/v1/machine`,{method:"PATCH",body:JSON.stringify({machine_id:e,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error(r.message);return r}static async DeleteMachine(e){let t=await n.A.fetchAuth(`${i.C}/api/v1/machine`,{method:"DELETE",body:JSON.stringify({machine_id:e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}}},4e3:(e,t,r)=>{r.d(t,{A:()=>l});r(5043);var i=r(8645),n=r(1982),a=r(579);function l(e){const{popupTitle:t,showPopup:r,setShowPopup:l,popupContent:o}=e;return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(i.A,{close:()=>l(!1)}),(0,a.jsxs)("div",{className:n.A.modalmobile,id:r?void 0:n.A.hide,style:{maxWidth:"1200px"},children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"5px solid #2d545e",marginBottom:"1em"},children:[null!=t?(0,a.jsx)("h2",{children:t.toUpperCase().replace("_"," ")}):(0,a.jsx)("h2",{children:"\xa0"}),(0,a.jsx)("h2",{onClick:()=>l(!1),children:"X"})]})}),(0,a.jsx)("div",{children:o})]})]})}},4761:(e,t,r)=>{r.d(t,{U:()=>i});class i{constructor(e){this.popupTitle=void 0,this.tableContent=void 0,this.onClick=void 0,this.onClose=void 0,this.popupTitle=e.popupTitle,this.tableContent=e.tableContent,this.onClick=e.onClick,this.onClose=e.onClose}}},5764:(e,t,r)=>{r.d(t,{A:()=>n});class i{}i.FilterTable=(e,t)=>{let r=Object.keys(e);for(let i=0;i<r.length;i++){const n=r[i];if(t[n]){if(void 0==e||null==e[n])return!1;if(""!==t[n]&&0==e[n].toString().toLowerCase().includes(t[n].toString().toLowerCase()))return!1}}return!0},i.SortingTable=(e,t,r)=>{if(null!=r&&void 0!=r&&void 0!==e[r]&&void 0!==t[r]){if("string"===typeof e[r]&&"string"===typeof t[r])return e[r].localeCompare(t[r]);if("number"===typeof e[r]&&"number"===typeof t[r])return e[r]-t[r]}return 0},i.FastIsEmpty=e=>{for(const t in e)return!1;return!0};const n=i},6664:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var i=r(5043),n=r(2573),a=r(7143),l=r(2490),o=r(3109),s=r(4e3),d=r(184),c=r(4761),u=r(8682),h=r(2087),_=r(414),p=r(3156),m=r(5764),v=r(2620),w=r(7079),f=r(3950),g=r(1233),y=r(7326),x=r(579);function b(){var e,t,r,b,j,A,k,C,E,S,P,M,$;const F=(0,i.useContext)(n.A),N=F.version,T=F.contextAccessToken,D=F.contextShowAlertFunc,L=F.contextShowLoadingFunc,O=F.stateShowLoading,[U,I]=(0,i.useState)([]),[R,B]=(0,i.useState)([]),[G,W]=(0,i.useState)(null),[J,q]=(0,i.useState)(null),[z,H]=(0,i.useState)(null),[V,X]=(0,i.useState)(!1),[Z,K]=(0,i.useState)(!1),[Y,Q]=(0,i.useState)(),[ee,te]=(0,i.useState)(null),[re,ie]=(0,i.useState)("ascending"),[ne,ae]=(0,i.useState)({}),le=(e,t)=>{var r;return(0,x.jsx)("div",{children:(0,x.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",maxWidth:"500px"},type:"text",value:null!==(r=ne[e])&&void 0!==r?r:"",placeholder:`${null!==t&&void 0!==t?t:e} ...`,onChange:t=>{ae(r=>{const i={...r};return i[e]=t.target.value,i})}})})},oe=(e,t)=>(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{te(e),ie("ascending"===re?"descending":"ascending")},children:[(0,x.jsx)("div",{children:null!==t&&void 0!==t?t:e}),(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,x.jsx)(p.XhJ,{style:{color:ee==e&&"descending"==re?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,x.jsx)(p.GOR,{style:{color:ee==e&&"ascending"==re?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]})}),se=()=>{q(null),H(null)},de=e=>{se(),W(null!==e&&void 0!==e?e:null),X(!0)};(0,i.useEffect)(()=>{(async()=>{const e=R.filter(e=>m.A.FilterTable(e,ne)).sort((e,t)=>ee?"ascending"==re?m.A.SortingTable(e,t,ee):m.A.SortingTable(t,e,ee):0);I(e)})()},[ne,ee,re]);const ce=async()=>{L(!0);try{const e=await f.t.GetAllMachine();if(null!=N.following){const t=await g.e.GetMachineConfig(),r={};for(let e=0;e<t.length;e++)r[t[e].machine_id]=t[e];for(let i=0;i<e.length;i++)e[i]={...e[i],...r[e[i].machine_id]}}I(e),B(e)}catch(e){D(new _.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{L(!1)}};(0,i.useEffect)(()=>{ce()},[T]);return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"container",style:{display:O?"none":"flex",backgroundColor:"transparent"},children:[(0,x.jsxs)("div",{style:{height:"94dvh",maxHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,x.jsx)("div",{style:{flexBasis:"auto"},className:"ordering-card",children:(0,x.jsx)(l.A,{detailTitle:"Master Machine",detailColor:"var(--secondary-color)",backgroundImage:o,stateShow:!0,detailCard:(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:a.A.rowGrid,style:{alignItems:"end"},children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{style:{color:"white",textAlign:"start"},children:"Action :"}),(0,x.jsx)("button",{className:"cardButton",onClick:()=>de(),children:"Add New"})]}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{className:"cardButton",onClick:()=>(async()=>{if(0==U.length)return D(new _.u({message:"NO DATA!",level:3}));let e=[];for(let t=0;t<U.length;t++)e.push({machine_id:`${U[t].machine_id}`,machine:U[t].machine,link_up:U[t].link_up,machine_type:U[t].machine_type,gateway_host:U[t].gateway_host,gateway_port:U[t].gateway_port,pressure_slave_id:`${U[t].pressure_slave_id}`,vibration_slave_id:`${U[t].vibration_slave_id}`});h.A.export("Master Machine List",["machine_id","machine","link_up","machine_type","gateway_host","gateway_port","pressure_slave_id","vibration_slave_id"],e)})(),children:"Generate Excel"})}),(0,x.jsx)("div",{children:(0,x.jsxs)("button",{className:"cardButton",onClick:()=>{ae({}),ce(),te(null),ie("descending")},children:[(0,x.jsx)(v.aO_,{})," \xa0 Reset Filter"]})})]})})})}),(0,x.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,x.jsxs)("table",{className:"tableclickcell",children:[(0,x.jsxs)("thead",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{colSpan:10,children:"MASTER MACHINE"}),null!=N.following&&(0,x.jsx)("th",{colSpan:2,children:"FOLLOWING ERROR"}),(0,x.jsx)("th",{rowSpan:2,style:{backgroundColor:"var(--header-color)",width:"7dvw",maxWidth:"7dvw",minWidth:"7dvw",position:"sticky",right:0,zIndex:1},children:"Action"})]}),(0,x.jsxs)("tr",{children:[(0,x.jsxs)("th",{children:[oe("machine_id"),le("machine_id")]}),(0,x.jsxs)("th",{style:{width:"150%"},children:[oe("machine"),le("machine")]}),(0,x.jsxs)("th",{children:[oe("link_up"),le("link_up")]}),(0,x.jsxs)("th",{children:[oe("machine_warn"),le("machine_warn")]}),(0,x.jsxs)("th",{children:[oe("machine_alarm"),le("machine_alarm")]}),(0,x.jsxs)("th",{children:[oe("machine_type"),le("machine_type")]}),(0,x.jsxs)("th",{children:[oe("gateway_host"),le("gateway_host")]}),(0,x.jsxs)("th",{children:[oe("gateway_port"),le("gateway_port")]}),(0,x.jsxs)("th",{children:[oe("pressure_slave_id"),le("pressure_slave_id")]}),(0,x.jsxs)("th",{children:[oe("vibration_slave_id"),le("vibration_slave_id")]}),null!=N.following&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("th",{children:[oe("following_error_warn"),le("following_error_warn")]}),(0,x.jsxs)("th",{children:[oe("following_error_alarm"),le("following_error_alarm")]})]})]})]}),U.length>0?(0,x.jsx)("tbody",{children:U.map((e,t)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.machine_id}),(0,x.jsx)("td",{children:e.machine}),(0,x.jsx)("td",{children:e.link_up}),(0,x.jsx)("td",{children:e.machine_warn}),(0,x.jsx)("td",{children:e.machine_alarm}),(0,x.jsx)("td",{children:e.machine_type}),(0,x.jsx)("td",{children:e.gateway_host}),(0,x.jsx)("td",{children:e.gateway_port}),(0,x.jsx)("td",{children:e.pressure_slave_id}),(0,x.jsx)("td",{children:e.vibration_slave_id}),null!=N.following&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("td",{children:e.following_error_warn}),(0,x.jsx)("td",{children:e.following_error_alarm})]}),(0,x.jsxs)("td",{className:a.A.buttonFixAction,onClick:()=>{de(e)},children:[(0,x.jsx)(d.uO9,{})," Edit"]})]},t))}):(0,x.jsx)("tbody",{children:(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})})]})})]}),(0,x.jsx)(s.A,{setShowPopup:X,showPopup:V,popupTitle:null==G?"Add New":`Edit ${null===G||void 0===G?void 0:G.machine}`,popupContent:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:a.A.bodyPopup,children:(0,x.jsxs)("div",{className:a.A.containerForm,children:[(0,x.jsxs)("div",{className:a.A.containerFormItem,children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:a.A.label,children:[" Link Up",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)("input",{className:a.A.inputedit,type:"text",readOnly:!0,value:null!==(e=null!==(t=null===J||void 0===J?void 0:J.link_up)&&void 0!==t?t:null===G||void 0===G?void 0:G.link_up)&&void 0!==e?e:"",onClick:async()=>{L(!0),X(!1);try{const e=await w.F.GetAllLinkUp();Q(new c.U({popupTitle:"Select Link Up",tableContent:e,onClick:e=>{q(t=>({...t,link_up_id:e.link_up_id,link_up:e.link_up})),X(!0)},onClose:()=>{K(!1),X(!0)}})),K(!0)}catch(e){D(new _.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{L(!1)}}})]}),(0,x.jsx)(y.A,{label:"Machine",value:null===J||void 0===J?void 0:J.machine,original_value:null!==(r=null===G||void 0===G?void 0:G.machine)&&void 0!==r?r:"",type_input:"text",attribute:"machine",required:!0,setFormData:q}),(0,x.jsx)(y.A,{label:"Machine Warn",value:null===J||void 0===J?void 0:J.machine_warn,original_value:null!==(b=null===G||void 0===G?void 0:G.machine_warn)&&void 0!==b?b:"",type_input:"number",attribute:"machine_warn",required:!0,setFormData:q}),(0,x.jsx)(y.A,{label:"Machine Alarm",value:null===J||void 0===J?void 0:J.machine_alarm,original_value:null!==(j=null===G||void 0===G?void 0:G.machine_alarm)&&void 0!==j?j:"",type_input:"number",attribute:"machine_alarm",required:!0,setFormData:q}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:a.A.label,children:["Type",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsxs)("select",{className:a.A.inputedit,value:null!==(A=null!==(k=null===J||void 0===J?void 0:J.machine_type)&&void 0!==k?k:null===G||void 0===G?void 0:G.machine_type)&&void 0!==A?A:"",onChange:e=>{q(t=>({...t,machine_type:e.target.value}))},required:!0,children:[(0,x.jsx)("option",{value:"",disabled:!0,children:"Select Type"}),(0,x.jsx)("option",{value:"Packer",children:"Packer"}),(0,x.jsx)("option",{value:"Maker",children:"Maker"})]})]}),(0,x.jsx)(y.A,{label:"Gateway Host",value:null===J||void 0===J?void 0:J.gateway_host,original_value:null!==(C=null===G||void 0===G?void 0:G.gateway_host)&&void 0!==C?C:"",type_input:"text",attribute:"gateway_host",required:!0,setFormData:q}),(0,x.jsx)(y.A,{label:"Gateway Port",value:null===J||void 0===J?void 0:J.gateway_port,original_value:null!==(E=null===G||void 0===G?void 0:G.gateway_port)&&void 0!==E?E:"",type_input:"text",attribute:"gateway_port",required:!0,setFormData:q}),(0,x.jsx)(y.A,{label:"Pressure Slave Id",value:null===J||void 0===J?void 0:J.pressure_slave_id,original_value:null!==(S=null===G||void 0===G?void 0:G.pressure_slave_id)&&void 0!==S?S:"",type_input:"number",attribute:"pressure_slave_id",required:!0,setFormData:q}),(0,x.jsx)(y.A,{label:"Vibration Slave Id",value:null===J||void 0===J?void 0:J.vibration_slave_id,original_value:null!==(P=null===G||void 0===G?void 0:G.vibration_slave_id)&&void 0!==P?P:"",type_input:"number",attribute:"vibration_slave_id",required:!0,setFormData:q})]}),null!=N.following&&null!=G&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{marginTop:"15px",marginBottom:"10px",width:"100%",height:"5px",backgroundColor:"#2d545e"}}),(0,x.jsxs)("div",{className:a.A.containerFormItem,children:[(0,x.jsx)(y.A,{label:"Following Error Warn",value:null===z||void 0===z?void 0:z.following_error_warn,original_value:null!==(M=null===G||void 0===G?void 0:G.following_error_warn)&&void 0!==M?M:"",type_input:"float",attribute:"following_error_warn",required:!0,setFormData:H}),(0,x.jsx)(y.A,{label:"Following Error Alarm",value:null===z||void 0===z?void 0:z.following_error_alarm,original_value:null!==($=null===G||void 0===G?void 0:G.following_error_alarm)&&void 0!==$?$:"",type_input:"float",attribute:"following_error_alarm",required:!0,setFormData:H})]})]})]})}),(0,x.jsx)("div",{className:a.A.footerPopup,children:(0,x.jsxs)("div",{className:a.A.buttons2,children:[(0,x.jsx)("div",{className:a.A.left,children:(0,x.jsx)("button",{className:"tertiaryButton",onClick:()=>{X(!1)},children:"Close"})}),null!=G&&(0,x.jsx)("div",{className:a.A.right,children:(0,x.jsx)("button",{className:"secondaryButton",onClick:()=>(async()=>D(new _.u({message:`Are you sure you want to delete ${null===G||void 0===G?void 0:G.machine} ?`,onOk:async()=>{L(!0);try{if(null==G)return;const e=await f.t.DeleteMachine(G.machine_id);await ce(),W(null),X(!1),D(new _.u({message:e.message,level:1}))}catch(e){D(new _.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{L(!1)}},withCancel:!0,withOk:!0,level:2})))(),children:"Delete"})}),(0,x.jsx)("div",{className:a.A.right,children:(0,x.jsx)("button",{className:"primaryButton",onClick:()=>{G?(async()=>{L(!0);try{if(null==G)throw new Error("Please fill in all forms!");null!=J&&await f.t.UpdateMachine(G.machine_id,J),null!=N.following&&null!=z&&await g.e.UpsertMachineConfig(G.machine_id,z),await ce(),W(null),se(),X(!1),D(new _.u({message:"[Success]",level:1}))}catch(e){D(new _.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{L(!1)}})():(async()=>{L(!0);try{if(null==J)throw new Error("Please fill in all forms!");if(null==J.machine)throw new Error("Please fill machine!");if(null==J.link_up_id)throw new Error("Please fill link_up_id!");if(null==J.machine_type)throw new Error("Please fill machine_type!");if(null==J.gateway_host)throw new Error("Please fill gateway_host!");if(null==J.gateway_port)throw new Error("Please fill gateway_port!");if(null==J.machine_warn)throw new Error("Please fill machine_warn!");if(null==J.machine_alarm)throw new Error("Please fill machine_alarm!");const e=await f.t.AddMachine({machine:J.machine,link_up_id:J.link_up_id,machine_type:J.machine_type,gateway_host:J.gateway_host,gateway_port:J.gateway_port,pressure_slave_id:J.pressure_slave_id,vibration_slave_id:J.vibration_slave_id,machine_warn:J.machine_warn,machine_alarm:J.machine_alarm});await ce(),W(null),se(),X(!1),D(new _.u({message:e.message,level:1}))}catch(e){D(new _.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{L(!1)}})()},children:"Save"})})]})})]})}),null!=Y?(0,x.jsx)(u.A,{showPopup:Z,setShowPopup:K,popUpPilihEntity:Y}):(0,x.jsx)(x.Fragment,{})]})})}},7079:(e,t,r)=>{r.d(t,{F:()=>a});var i=r(8443),n=r(2340);class a{static async GetAllLinkUp(e){let t=`${i.C}/api/v1/link_up`;null!=e&&(t+=`?business_unit_id=${e}`);const r=await n.A.fetchAuth(t);if(200!==r.status)throw new Error(r.message);const a=Array.isArray(r.data)?r.data:[],l=[];for(let i=0;i<a.length;i++)l.push({link_up_id:a[i].link_up_id,link_up:a[i].link_up,link_up_warn:a[i].link_up_warn,link_up_alarm:a[i].link_up_alarm,business_unit:a[i].business_unit});return l}static async AddLinkUp(e){let t=await n.A.fetchAuth(`${i.C}/api/v1/link_up`,{method:"POST",body:JSON.stringify({...e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}static async UpdateLinkUp(e,t){let r=await n.A.fetchAuth(`${i.C}/api/v1/link_up`,{method:"PATCH",body:JSON.stringify({link_up_id:e,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error(r.message);return r}static async DeleteLinkUp(e){let t=await n.A.fetchAuth(`${i.C}/api/v1/link_up`,{method:"DELETE",body:JSON.stringify({link_up_id:e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}}},7143:(e,t,r)=>{r.d(t,{A:()=>i});const i={container:"Master_container__UNjk+",left:"Master_left__QUnXe",label:"Master_label__xo2Vh",input:"Master_input__Rb2Y0",label2:"Master_label2__0ZC+T",input2:"Master_input2__D1NVX",input3:"Master_input3__Jzv+O",right:"Master_right__c-wQw",table:"Master_table__U-U3s",buttonFixAction:"Master_buttonFixAction__TPaCo",buttons:"Master_buttons__pkSmf",buttons2:"Master_buttons2__fkuE5",buttons3:"Master_buttons3__bSnnD",command:"Master_command__msAz4",btrefresh:"Master_btrefresh__ZtG4P",inputedit:"Master_inputedit__rSEDm",inputadd:"Master_inputadd__mzfvG",containerleftright:"Master_containerleftright__tF71J",leftposition:"Master_leftposition__yYlRV",rightposition:"Master_rightposition__bCiFF",containerForm:"Master_containerForm__Rgxli",containerFormItem:"Master_containerFormItem__rZh0Z",containerfilterdate:"Master_containerfilterdate__V7Vcp",filterdate:"Master_filterdate__6saQZ",containerfiltertext:"Master_containerfiltertext__0OUnn",labelforfiltertext:"Master_labelforfiltertext__XJZXd",tablebarcodecontainer:"Master_tablebarcodecontainer__odNcJ",bodyPopup:"Master_bodyPopup__RowBz",rowGrid:"Master_rowGrid__fTtZ2"}},7326:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(5043),n=r(579);const a=e=>{var t;const r=(0,i.useRef)(null),{label:a,type_input:l,value:o,original_value:s,required:d,attribute:c,onchange:u,setFormData:h,style:_}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[a," ",d&&(0,n.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,n.jsx)("input",{type:"text",style:{marginBottom:"0",..._},value:null===o?"":null!==(t=null!==o&&void 0!==o?o:s)&&void 0!==t?t:"",onFocus:()=>{setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},300)},onChange:null==u?e=>{let t=e.target.value;if("number"==l){const e=t.toString().replace(/[^0-9]/g,"").slice(0,11);t=""===e?null:parseInt(e)}if("float"==l){var r;let e=(null!==(r=t)&&void 0!==r?r:"").toString().slice(0,11);e.length>0&&"."!=e[e.length-1]&&(isNaN(parseFloat(e))||(t=""===e?null:parseFloat(e)))}h&&h(e=>({...e,[c]:t}))}:u})]})}},8682:(e,t,r)=>{r.d(t,{A:()=>s});var i=r(5043),n=r(8645),a=r(1982),l=r(5764),o=r(579);function s(e){const{showPopup:t,setShowPopup:r,popUpPilihEntity:s}=e,d=s.popupTitle,c=s.tableContent,u=s.onClick,h=s.onClose,[_,p]=(0,i.useState)({}),m=()=>{r(!1),p({}),h()};return(0,i.useEffect)(()=>{if(null===c||0===c.length)return;let e={};const t=Object.keys(c[0]);for(let r=0;r<t.length;r++)e[t[r]]="";p(e)},[c]),(0,o.jsxs)(o.Fragment,{children:[t&&(0,o.jsx)(n.A,{close:()=>m()}),(0,o.jsxs)("div",{className:a.A.modalmobile,id:t?null:a.A.hide,style:{maxWidth:"1200px"},children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid silver"},children:[null!=d?(0,o.jsx)("h2",{style:{textTransform:"uppercase"},children:d.replace("_"," ")}):(0,o.jsx)("h2",{children:" \xa0"}),(0,o.jsx)("h2",{onClick:()=>m(),children:"X"})]})}),(0,o.jsx)("div",{children:0===c.length?(0,o.jsx)("table",{children:(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"no data available yet!"})})})}):(0,o.jsx)("div",{style:{maxHeight:"70vh",overflow:"auto",paddingBottom:"1rem"},children:(0,o.jsxs)("table",{className:"tablepopup",children:[(0,o.jsxs)("thead",{children:[(0,o.jsx)("tr",{children:Object.keys(c[0]).map(e=>(0,o.jsx)("th",{children:(0,o.jsxs)("label",{style:{fontSize:"12px",textTransform:"uppercase",fontWeight:"600",color:"white"},children:[e.replace("_"," ")," :"]})},`filter-${e}`))}),(0,o.jsx)("tr",{children:Object.keys(c[0]).map(e=>(0,o.jsx)("th",{children:(0,o.jsx)("input",{type:"text",id:`${e}`,name:e,value:_[e],onChange:e=>p(t=>({...t,[e.target.name]:e.target.value}))})},`filter-${e}`))})]}),(0,o.jsx)("tbody",{children:c.filter(e=>l.A.FilterTable(e,_)).map((e,t)=>(0,o.jsx)("tr",{onClick:()=>(e=>{r(!1),p({}),u(e)})(e),children:Object.keys(e).map(r=>(0,o.jsx)("td",{children:e[r]},`${t}-key${r}`))},`rowSelectTable-${t}`))})]})})})]})]})}}}]);
//# sourceMappingURL=664.2ff795cd.chunk.js.map