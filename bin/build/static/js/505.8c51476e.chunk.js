"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[505],{2087:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(1121),i=n(9223),a=n.n(i);const l=class{static export(e,t,n){const r=new(a().Workbook),i=r.addWorksheet(e),l=e=>e>=0&&e<=51?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"][e]:"Invalid number";t.map((e,t)=>{i.getColumn(`${l(t)}`).width=20,i.getCell(`${l(t)}1`).value=String(e.toUpperCase()),i.getCell(`${l(t)}1`).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"c8c8c8"}},font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}}),n.map((e,n)=>{const r=[];t.map(t=>{null!=e[t]?r.push(e[t]):r.push("")});i.addRow(r).eachCell(e=>{e.style={alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}})}),r.xlsx.writeBuffer().then(t=>{const n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=`${e}.xlsx`,r.click(),window.URL.revokeObjectURL(r.href)})}static async import(e){const t=new(a().Workbook);await t.xlsx.load(e);const n=[];if(t.eachSheet(e=>{const t=[];e.eachRow(e=>{t.push(e.values)}),n.push(t)}),n.length>0){const e=n[0],t=[];for(let n=1;n<e.length;n++){const a={};for(let t=0;t<e[n].length;t++){var i;if(null!=e[0][t]&&"string"==typeof e[0][t])if(e[n][t]instanceof Date)a[e[0][t].toLowerCase()]=(0,r.GP)(e[n][t],"yyyy-MM-dd HH:mm:ss");else a[e[0][t].toLowerCase()]="object"==typeof e[n][t]?e[n][t].result:null!==(i=e[n][t])&&void 0!==i?i:""}t.push(a)}return t}return[]}}},2480:(e,t,n)=>{n.d(t,{X:()=>a,z:()=>l});var r=n(8443),i=n(2340);class a{static async GetAllCenterline(e){let t=`${r.C}/api/extension/centerline/v1`;null!=e&&(t+=`?link_up_id=${e}`);const n=await i.A.fetchAuth(t);if(200!==n.status)throw new Error(n.message);const a=Array.isArray(n.data)?n.data:[];for(let r=0;r<a.length;r++){if("number"!=typeof a[r].centerline_id)throw new Error("invalid centerline_id value");if("number"!=typeof a[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof a[r].link_up)throw new Error("invalid link_up value");if("string"!=typeof a[r].parameter_name)throw new Error("invalid parameter_name value");if("string"!=typeof a[r].centerline_tipe)throw new Error("invalid centerline_tipe value");if(void 0!=a[r].centerline_warn&&"number"!=typeof a[r].centerline_warn)throw new Error("invalid centerline_warn value");if(void 0!=a[r].centerline_alarm&&"number"!=typeof a[r].centerline_alarm)throw new Error("invalid centerline_alarm value");if(void 0!=a[r].centerline_bottom_warn&&"number"!=typeof a[r].centerline_bottom_warn)throw new Error("invalid centerline_bottom_warn value");if(void 0!=a[r].centerline_bottom_alarm&&"number"!=typeof a[r].centerline_bottom_alarm)throw new Error("invalid centerline_bottom_alarm value");if("string"!=typeof a[r].centerline_display_type)throw new Error("invalid centerline_display_type value");if("string"!=typeof a[r].centerline_unit)throw new Error("invalid centerline_unit value")}return a}static async AddCenterline(e){const t=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1`,{method:"POST",body:JSON.stringify({...e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}static async UpdateCenterline(e,t){const n=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1`,{method:"PATCH",body:JSON.stringify({centerline_id:e,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==n.status)throw new Error(n.message);return n}static async DeleteCenterline(e){const t=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1`,{method:"DELETE",body:JSON.stringify({centerline_id:e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}static async GetLinkUpConfig(e){let t=`${r.C}/api/extension/centerline/v1/linkup`;null!=e&&(t+=`?link_up_id=${e}`);const n=await i.A.fetchAuth(t);if(200!==n.status)throw new Error(n.message);if(!Array.isArray(n.data))throw new Error("invalid link up config response");for(let r=0;r<n.data.length;r++){var a,l;const e=n.data[r];if("number"!=typeof e.link_up_id)throw new Error("invalid link_up_id value");if("number"!=typeof(null!==(a=e.centerline_warn)&&void 0!==a?a:0))throw new Error("invalid centerline_warn value");if("number"!=typeof(null!==(l=e.centerline_alarm)&&void 0!==l?l:0))throw new Error("invalid centerline_alarm value")}return n.data}static async UpsertLinkupConfig(e,t){const n=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/linkup`,{method:"PATCH",body:JSON.stringify({link_up_id:e,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==n.status)throw new Error(n.message);return n}static async GetBusinessUnitConfig(e){let t=`${r.C}/api/extension/centerline/v1/business`;null!=e&&(t+=`?business_unit_id=${e}`);const n=await i.A.fetchAuth(t);if(200!==n.status)throw new Error(n.message);if(!Array.isArray(n.data))throw new Error("invalid link up config response");for(let r=0;r<n.data.length;r++){var a,l;const e=n.data[r];if("number"!=typeof e.business_unit_id)throw new Error("invalid business_unit_id value");if("number"!=typeof(null!==(a=e.centerline_warn)&&void 0!==a?a:0))throw new Error("invalid centerline_warn value");if("number"!=typeof(null!==(l=e.centerline_alarm)&&void 0!==l?l:0))throw new Error("invalid centerline_alarm value")}return n.data}static async UpsertBusinessUnitConfig(e,t){const n=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/business`,{method:"PATCH",body:JSON.stringify({business_unit_id:e,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==n.status)throw new Error(n.message);return n}}class l{static async DashboardLevel1(e,t){const n=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/l1?start_date=${e}&end_date=${t}`);if(200!==n.status)throw new Error(n.message);const a=Array.isArray(n.data)?n.data:[];for(let r=0;r<a.length;r++){if("number"!=typeof a[r].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof a[r].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(a[r].centerline_id_ool))throw new Error("invalid centerline_id_ool value");if("number"!=typeof a[r].centerline_green)throw new Error("invalid centerline_green value");if("number"!=typeof a[r].centerline_yellow)throw new Error("invalid centerline_yellow value");if("number"!=typeof a[r].centerline_red)throw new Error("invalid centerline_red value");if(void 0!=a[r].centerline_warn&&"number"!=typeof a[r].centerline_warn)throw new Error("invalid centerline_warn value");if(void 0!=a[r].centerline_alarm&&"number"!=typeof a[r].centerline_alarm)throw new Error("invalid centerline_alarm value")}return a}static async DashboardLevel2(e,t,n){const a=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/l2?business_unit_id=${n}&start_date=${e}&end_date=${t}`);if(200!==a.status)throw new Error(a.message);const l=Array.isArray(a.data)?a.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof l[r].link_up)throw new Error("invalid link_up value");if(!Array.isArray(l[r].centerline_id_ool))throw new Error("invalid centerline_id_ool value");if("number"!=typeof l[r].centerline_green)throw new Error("invalid centerline_green value");if("number"!=typeof l[r].centerline_yellow)throw new Error("invalid centerline_yellow value");if("number"!=typeof l[r].centerline_red)throw new Error("invalid centerline_red value");if(void 0!=l[r].centerline_warn&&"number"!=typeof l[r].centerline_warn)throw new Error("invalid centerline_warn value");if(void 0!=l[r].centerline_alarm&&"number"!=typeof l[r].centerline_alarm)throw new Error("invalid centerline_alarm value")}return l}static async DashboardLevel3(e,t,n){const a=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/l3?link_up_id=${n}&start_date=${e}&end_date=${t}`);if(200!==a.status)throw new Error(a.message);const l=Array.isArray(a.data)?a.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].centerline_id)throw new Error("invalid dashboard centerline_id value");if("string"!=typeof l[r].parameter_name)throw new Error("invalid dashboard parameter_name value");if("string"!=typeof l[r].centerline_tipe)throw new Error("invalid dashboard centerline_tipe value");if("number"!=typeof l[r].centerline_green)throw new Error("invalid centerline_green value");if("number"!=typeof l[r].centerline_yellow)throw new Error("invalid centerline_yellow value");if("number"!=typeof l[r].centerline_red)throw new Error("invalid centerline_red value");if(!l[r].last_centerline_data)throw new Error("missing last_centerline_data");if("number"!==typeof l[r].last_centerline_data.centerline_id)throw new Error("invalid last_centerline_data.centerline_id");if("number"!==typeof l[r].last_centerline_data.value)throw new Error("invalid last_centerline_data.value");if(void 0!=l[r].last_centerline_data.warning_limit&&"number"!==typeof l[r].last_centerline_data.warning_limit)throw new Error("invalid last_centerline_data.warning_limit");if(void 0!=l[r].last_centerline_data.alarm_limit&&"number"!==typeof l[r].last_centerline_data.alarm_limit)throw new Error("invalid last_centerline_data.alarm_limit");if(void 0!=l[r].last_centerline_data.warning_limit_bottom&&"number"!==typeof l[r].last_centerline_data.warning_limit_bottom)throw new Error("invalid last_centerline_data.warning_limit_bottom");if(void 0!=l[r].last_centerline_data.alarm_limit_bottom&&"number"!==typeof l[r].last_centerline_data.alarm_limit_bottom)throw new Error("invalid last_centerline_data.alarm_limit_bottom");if("string"!==typeof l[r].last_centerline_data.created_at)throw new Error("invalid last_centerline_data.created_at")}return l}static async DashboardLevel4(e,t,n){const a=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/data?centerline_id=${n}&start_date=${e}&end_date=${t}`);if(200!==a.status)throw new Error(a.message);const l=Array.isArray(a.data)?a.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].value)throw new Error("invalid value value");if(void 0!=l[r].warning_limit&&"number"!=typeof l[r].warning_limit)throw new Error("invalid warning_limit value");if(void 0!=l[r].alarm_limit&&"number"!=typeof l[r].alarm_limit)throw new Error("invalid alarm_limit value");if(void 0!=l[r].warning_limit_bottom&&"number"!=typeof l[r].warning_limit_bottom)throw new Error("invalid warning_limit_bottom value");if(void 0!=l[r].alarm_limit_bottom&&"number"!=typeof l[r].alarm_limit_bottom)throw new Error("invalid alarm_limit_bottom value");if("Invalid Date"==new Date(l[r].created_at).toString())throw new Error("invalid created_at value");l[r].created_at=new Date(l[r].created_at)}return l}static async DashboardLevel1Realtime(){const e=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/l1/realtime`);if(200!==e.status)throw new Error(e.message);const t=Array.isArray(e.data)?e.data:[];for(let n=0;n<t.length;n++){if("number"!=typeof t[n].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof t[n].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(t[n].centerline_id_ool))throw new Error("invalid centerline_id_ool value");if("number"!=typeof t[n].centerline_green)throw new Error("invalid centerline_green value");if("number"!=typeof t[n].centerline_yellow)throw new Error("invalid centerline_yellow value");if("number"!=typeof t[n].centerline_red)throw new Error("invalid centerline_red value");if(void 0!=t[n].centerline_warn&&"number"!=typeof t[n].centerline_warn)throw new Error("invalid centerline_warn value");if(void 0!=t[n].centerline_alarm&&"number"!=typeof t[n].centerline_alarm)throw new Error("invalid centerline_alarm value")}return t}static async DashboardLevel2Realtime(e){const t=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/l2/realtime?business_unit_id=${e}`);if(200!==t.status)throw new Error(t.message);const n=Array.isArray(t.data)?t.data:[];for(let r=0;r<n.length;r++){if("number"!=typeof n[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof n[r].link_up)throw new Error("invalid link_up value");if(!Array.isArray(n[r].centerline_id_ool))throw new Error("invalid centerline_id_ool value");if("number"!=typeof n[r].centerline_green)throw new Error("invalid centerline_green value");if("number"!=typeof n[r].centerline_yellow)throw new Error("invalid centerline_yellow value");if("number"!=typeof n[r].centerline_red)throw new Error("invalid centerline_red value");if(void 0!=n[r].centerline_warn&&"number"!=typeof n[r].centerline_warn)throw new Error("invalid centerline_warn value");if(void 0!=n[r].centerline_alarm&&"number"!=typeof n[r].centerline_alarm)throw new Error("invalid centerline_alarm value")}return n}static async DashboardLevel3Realtime(e){const t=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/l3/realtime?link_up_id=${e}`);if(200!==t.status)throw new Error(t.message);const n=Array.isArray(t.data)?t.data:[];for(let r=0;r<n.length;r++){if("number"!=typeof n[r].centerline_id)throw new Error("invalid dashboard centerline_id value");if("string"!=typeof n[r].parameter_name)throw new Error("invalid dashboard parameter_name value");if("string"!=typeof n[r].centerline_tipe)throw new Error("invalid dashboard centerline_tipe value");if("number"!=typeof n[r].centerline_green)throw new Error("invalid centerline_green value");if("number"!=typeof n[r].centerline_yellow)throw new Error("invalid centerline_yellow value");if("number"!=typeof n[r].centerline_red)throw new Error("invalid centerline_red value");if(!n[r].last_centerline_data)throw new Error("missing last_centerline_data");if("number"!==typeof n[r].last_centerline_data.centerline_id)throw new Error("invalid last_centerline_data.centerline_id");if("number"!==typeof n[r].last_centerline_data.value)throw new Error("invalid last_centerline_data.value");if(void 0!=n[r].last_centerline_data.warning_limit&&"number"!==typeof n[r].last_centerline_data.warning_limit)throw new Error("invalid last_centerline_data.warning_limit");if(void 0!=n[r].last_centerline_data.alarm_limit&&"number"!==typeof n[r].last_centerline_data.alarm_limit)throw new Error("invalid last_centerline_data.alarm_limit");if(void 0!=n[r].last_centerline_data.warning_limit_bottom&&"number"!==typeof n[r].last_centerline_data.warning_limit_bottom)throw new Error("invalid last_centerline_data.warning_limit_bottom");if(void 0!=n[r].last_centerline_data.alarm_limit_bottom&&"number"!==typeof n[r].last_centerline_data.alarm_limit_bottom)throw new Error("invalid last_centerline_data.alarm_limit_bottom");if("string"!==typeof n[r].last_centerline_data.created_at)throw new Error("invalid last_centerline_data.created_at")}return n}static async DashboardLevel4Realtime(e){const t=await i.A.fetchAuth(`${r.C}/api/extension/centerline/v1/data/realtime?centerline_id=${e}`);if(200!==t.status)throw new Error(t.message);const n=Array.isArray(t.data)?t.data:[];for(let r=0;r<n.length;r++){if("number"!=typeof n[r].value)throw new Error("invalid value value");if(void 0!=n[r].warning_limit&&"number"!=typeof n[r].warning_limit)throw new Error("invalid warning_limit value");if(void 0!=n[r].alarm_limit&&"number"!=typeof n[r].alarm_limit)throw new Error("invalid alarm_limit value");if(void 0!=n[r].warning_limit_bottom&&"number"!=typeof n[r].warning_limit_bottom)throw new Error("invalid warning_limit_bottom value");if(void 0!=n[r].alarm_limit_bottom&&"number"!=typeof n[r].alarm_limit_bottom)throw new Error("invalid alarm_limit_bottom value");if("Invalid Date"==new Date(n[r].created_at).toString())throw new Error("invalid created_at value");n[r].created_at=new Date(n[r].created_at)}return n}}},3505:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(5043),i=n(8270),a=n(1121),l=n(2573),o=n(5764),s=n(414),d=n(184),c=n(3216),u=n(6278),m=n(2620),_=n(397),h=n(6361),f=n(2926),v=n(6058),w=n(2480),y=n(2087),b=n(579);h.t1.register(h.No,h.FN,h.kc,h.hE,h.PP,h.m_,h.s$),f.d.maintainAspectRatio=!1,f.d.responsive=!0;const g=e=>{let{realtime:t,setRealtime:n,refresh:h,start_date:f,end_date:g,setHandleGenerateExcel:p}=e;const x=(0,r.useContext)(l.A),A=x.contextAccessToken,j=x.contextShowAlertFunc,E=x.contextShowLoadingFunc,{machineId:C}=(x.stateShowLoading,(0,c.g)()),k="#fb8500",M="rgba(41, 191, 18, 0.21)",S="rgba(244, 188, 20, 0.28)",$="rgba(213, 14, 81, 0.2)",[N,F]=(0,r.useState)(new Date),[R,D]=(0,r.useState)(!0),[H,L]=(0,r.useState)("minutes_10"),[P,I]=(0,r.useState)("chart"),[B,T]=(0,r.useState)(null),[G,V]=(0,r.useState)("ascending"),[W,O]=(0,r.useState)([]),[z,U]=(0,r.useState)([]),Y=(0,r.useRef)({}),[J,X]=(0,r.useState)({}),[Z,q]=(0,r.useState)({labels:[],datasets:[]}),[K,Q]=(0,r.useState)({}),ee=(0,r.useRef)(null),[te,ne]=(0,r.useState)([]),[re,ie]=(0,r.useState)([]),[ae,le]=(0,r.useState)({}),[oe,se]=(0,r.useState)({labels:[],datasets:[]}),[de,ce]=(0,r.useState)({}),ue=(0,r.useRef)(null);function me(e){const t={};return"all"==H?{all:[...e].toReversed()}:(e.toReversed().forEach(e=>{const n=new Date(e.created_at),r=new Date(n);r.setMinutes(10*Math.floor(n.getMinutes()/10)),r.setSeconds(0),r.setMilliseconds(0);let i=(0,a.GP)(r,"yyyy-MM-dd HH:00:00");switch(H){case"hour":i=(0,a.GP)(r,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,a.GP)(r,"yyyy-MM-dd HH:mm:00")}void 0==t[i]?t[i]=[]:t[i].push(e)}),t)}const _e={id:"statusArea",beforeDatasetsDraw(e){var t,n,r,i;const a=ee.current,{ctx:l,chartArea:o,scales:s}=e;if(!o||!s.x||!s.y||null==(null===a||void 0===a?void 0:a.warning_limit)||null==(null===a||void 0===a?void 0:a.alarm_limit)||null==(null===a||void 0===a?void 0:a.warning_limit_bottom)||null==(null===a||void 0===a?void 0:a.alarm_limit_bottom))return;l.save();const d=s.y.min,c=null!==(t=a.alarm_limit_bottom)&&void 0!==t?t:0,u=s.y.getPixelForValue(d),m=s.y.getPixelForValue(c);l.fillStyle=$,l.fillRect(o.left,Math.min(u,m),o.right-o.left,Math.abs(u-m));const _=null!==(n=a.alarm_limit_bottom)&&void 0!==n?n:0,h=null!==(r=a.alarm_limit)&&void 0!==r?r:0,f=s.y.getPixelForValue(_),v=s.y.getPixelForValue(h);l.fillStyle=M,l.fillRect(o.left,Math.min(f,v),o.right-o.left,Math.abs(f-v));const w=null!==(i=a.alarm_limit)&&void 0!==i?i:0,y=s.y.max,b=s.y.getPixelForValue(w),g=s.y.getPixelForValue(y);l.fillStyle=$,l.fillRect(o.left,Math.min(b,g),o.right-o.left,Math.abs(b-g)),l.restore()}},he=(e,t)=>{var n;const r=`${Math.floor(t.getMinutes()/10)}0`;let i=(0,a.GP)(t,"yyyy-MM-dd HH:00:00");switch(H){case"hour":i=(0,a.GP)(t,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,a.GP)(t,`yyyy-MM-dd HH:${r}:00`);break;case"all":i="all"}const l=null!==(n=e[i])&&void 0!==n?n:[];if(!l)return;const o=l.map(e=>(0,a.GP)(e.created_at,"HH:mm:ss")),s=l.map(e=>e.value),d=l.toReversed();ee.current=d[0];const c=Math.min(...s),u=Math.max(...s),m=u-c||1,_=c-.2*m,h=u+.2*m;q({labels:o,datasets:[{label:"Centerline",data:s,borderColor:k,pointBackgroundColor:k,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:k,borderWidth:4,pointRadius:0}]}),Q({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:_,max:h}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},fe=(e,t)=>{var n;return(0,b.jsx)("div",{children:(0,b.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(n=J[e])&&void 0!==n?n:"",placeholder:`${null!==t&&void 0!==t?t:e} ...`,onChange:t=>{X(n=>{const r={...n};return r[e]=t.target.value,r})}})})},ve=(e,t)=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{T(e),V("ascending"===G?"descending":"ascending")},children:[(0,b.jsx)("div",{children:null!==t&&void 0!==t?t:e}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,b.jsx)(d.XhJ,{style:{color:B==e&&"descending"==G?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,b.jsx)(d.GOR,{style:{color:B==e&&"ascending"==G?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),we=(e,t)=>{let n="black",r="400";const{value:i,warning_limit:l,warning_limit_bottom:o,alarm_limit:s,alarm_limit_bottom:d}=t;return void 0!==s&&void 0!==d&&i<s&&i>d&&(n="green",r="bold"),void 0!==l&&void 0!==o&&(i>=l||i<=o)&&(n="orange",r="bold"),void 0!==s&&void 0!==d&&(i>=s||i<=d)&&(n="red",r="bold"),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{children:e+1}),(0,b.jsx)("td",{children:(0,a.GP)(t.created_at,"yyyy-MM-dd HH:mm:ss")}),(0,b.jsx)("td",{style:{color:n,fontWeight:r},children:i}),(0,b.jsx)("td",{children:l}),(0,b.jsx)("td",{children:s}),(0,b.jsx)("td",{children:o}),(0,b.jsx)("td",{children:d})]})};(0,r.useEffect)(()=>{(()=>{const e=z.filter(e=>o.A.FilterTable(e,J)).sort((e,t)=>B?"ascending"==G?o.A.SortingTable(e,t,B):o.A.SortingTable(t,e,B):0);O(e)})()},[J,B,G]),(0,r.useEffect)(()=>{(async e=>{e&&E(!0);try{const e=await w.z.DashboardLevel4((0,a.Yq)(f,"yyyy-MM-dd"),(0,a.Yq)(g,"yyyy-MM-dd"),Number(C));O(e),U(e);const t=me(e);Y.current=t;const n=Object.keys(t);if(n.length>0&&"all"!=H){const e=new Date(n[n.length-1]);F(e),he(Y.current,e)}else he(Y.current,N)}catch(t){j(new s.u({message:t instanceof Error?t.message:t.toString(),level:3}))}finally{E(!1)}})(0!=h)},[h]);const ye={id:"statusAreaRealtime",beforeDatasetsDraw(e){var t,n,r,i,a,l,o,s;const d=ue.current,{ctx:c,chartArea:u,scales:m}=e;if(!u||!m.x||!m.y)return;if(!u||!m.x||!m.y||null==(null===d||void 0===d?void 0:d.warning_limit)||null==(null===d||void 0===d?void 0:d.alarm_limit)||null==(null===d||void 0===d?void 0:d.warning_limit_bottom)||null==(null===d||void 0===d?void 0:d.alarm_limit_bottom))return;c.save();const _=m.y.min,h=null!==(t=d.alarm_limit_bottom)&&void 0!==t?t:0,f=m.y.getPixelForValue(_),v=m.y.getPixelForValue(h);c.fillStyle=$,c.fillRect(u.left,Math.min(f,v),u.right-u.left,Math.abs(f-v));const w=null!==(n=d.alarm_limit_bottom)&&void 0!==n?n:0,y=null!==(r=d.warning_limit_bottom)&&void 0!==r?r:0,b=m.y.getPixelForValue(w),g=m.y.getPixelForValue(y);c.fillStyle=S,c.fillRect(u.left,Math.min(b,g),u.right-u.left,Math.abs(b-g));const p=null!==(i=d.alarm_limit_bottom)&&void 0!==i?i:0,x=null!==(a=d.alarm_limit)&&void 0!==a?a:0,A=m.y.getPixelForValue(p),j=m.y.getPixelForValue(x);c.fillStyle=M,c.fillRect(u.left,Math.min(A,j),u.right-u.left,Math.abs(A-j));const E=null!==(l=d.warning_limit)&&void 0!==l?l:0,C=null!==(o=d.alarm_limit)&&void 0!==o?o:0,k=m.y.getPixelForValue(E),N=m.y.getPixelForValue(C);c.fillStyle=S,c.fillRect(u.left,Math.min(k,N),u.right-u.left,Math.abs(k-N));const F=null!==(s=d.alarm_limit)&&void 0!==s?s:0,R=m.y.max,D=m.y.getPixelForValue(F),H=m.y.getPixelForValue(R);c.fillStyle=$,c.fillRect(u.left,Math.min(D,H),u.right-u.left,Math.abs(D-H)),c.restore()}},be=(e,t)=>{var n;const r=`${Math.floor(t.getMinutes()/10)}0`;let i=(0,a.GP)(t,"yyyy-MM-dd HH:00:00");switch(H){case"hour":i=(0,a.GP)(t,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,a.GP)(t,`yyyy-MM-dd HH:${r}:00`);break;case"all":i="all"}const l=null!==(n=e[i])&&void 0!==n?n:[];if(!l)return;const o=l.map(e=>(0,a.GP)(e.created_at,"HH:mm:ss")),s=l.map(e=>e.value),d=l[0];ue.current=d;const c=Math.min(...s),u=Math.max(...s),m=u-c||1,_=c-.2*m,h=u+.2*m;se({labels:o,datasets:[{label:"Centerline",data:s,borderColor:k,pointBackgroundColor:k,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:k,borderWidth:4,pointRadius:0}]}),ce({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:_,max:h}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},ge=(e,t)=>{var n;return(0,b.jsx)("div",{children:(0,b.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(n=ae[e])&&void 0!==n?n:"",placeholder:`${null!==t&&void 0!==t?t:e} ...`,onChange:t=>{le(n=>{const r={...n};return r[e]=t.target.value,r})}})})},pe=(e,t)=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{T(e),V("ascending"===G?"descending":"ascending")},children:[(0,b.jsx)("div",{children:null!==t&&void 0!==t?t:e}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,b.jsx)(d.XhJ,{style:{color:B==e&&"descending"==G?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,b.jsx)(d.GOR,{style:{color:B==e&&"ascending"==G?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),xe=async()=>{try{const e=await w.z.DashboardLevel4Realtime(Number(C));ne(e),ie(e)}catch(e){j(new s.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{E(!1)}};(0,r.useEffect)(()=>{if(t){xe();const e=setInterval(xe,3e3);return()=>{clearInterval(e)}}},[A,t]),(0,r.useEffect)(()=>{(()=>{const e=re.filter(e=>o.A.FilterTable(e,ae)).sort((e,t)=>B?"ascending"==G?o.A.SortingTable(e,t,B):o.A.SortingTable(t,e,B):0);ne(e)})()},[ae,B,G]),(0,r.useEffect)(()=>{if(!t)return;if(!R)return;const e=me(te),n=new Date;n.setMinutes(10*Math.floor(n.getMinutes()/10)),F(n),be(e,n)},[R,t,te,H]),(0,r.useEffect)(()=>{if(!t)return;if(R)return;const e=me(te);be(e,N)},[R,t,te,N,H]),(0,r.useEffect)(()=>{t||he(Y.current,N)},[t,Y.current,N]),(0,r.useEffect)(()=>{const e=me(W);Y.current=e;const t=Object.keys(e);if("all"!=H&&t.length>0){const e=new Date(t[t.length-1]);F(e)}else F(new Date)},[t,H]);const Ae=(0,r.useMemo)(()=>"all"==H?"All Data":"hour"==H?(0,a.Yq)(N,"dd MMM yyyy HH:00"):"minutes_10"==H?(0,a.Yq)(N,"dd MMM yyyy HH:mm"):void 0,[N,H]),je=(e,n)=>{D(!1);const r=new Date(N),i=10*Math.floor(r.getMinutes()/10);"hours"===n?r.setHours(r.getHours()+e,i,0,0):"minutes"===n&&r.setHours(r.getHours(),i+e,0,0),F(r),t||he(Y.current,r)},Ee=(e,t)=>{if(I(e),n(t),T(null),V("ascending"),le({}),"chart"==e)if(t){const e=me(te);be(e,N)}else he(Y.current,N)},Ce=()=>{if(0==te.length)return j(new s.u({message:"NO DATA!",level:3}));let e=[];for(let l=0;l<te.length;l++){var t,n,r,i;e.push({created_at:(0,a.GP)("string"===typeof te[l].created_at?new Date(te[l].created_at):te[l].created_at,"yyyy-MM-dd HH:mm:ss"),value:`${te[l].value}`,warning_limit:`${null!==(t=te[l].warning_limit)&&void 0!==t?t:""}`,alarm_limit:`${null!==(n=te[l].alarm_limit)&&void 0!==n?n:""}`,warning_limit_bottom:`${null!==(r=te[l].warning_limit_bottom)&&void 0!==r?r:""}`,alarm_limit_bottom:`${null!==(i=te[l].alarm_limit_bottom)&&void 0!==i?i:""}`})}y.A.export("Centerline Data Realtime",["created_at","value","warning_limit","alarm_limit","warning_limit_bottom","alarm_limit_bottom"],e)},ke=()=>{if(0==W.length)return j(new s.u({message:"NO DATA!",level:3}));let e=[];for(let l=0;l<te.length;l++){var t,n,r,i;e.push({created_at:(0,a.GP)("string"===typeof te[l].created_at?new Date(te[l].created_at):te[l].created_at,"yyyy-MM-dd HH:mm:ss"),value:`${te[l].value}`,warning_limit:`${null!==(t=te[l].warning_limit)&&void 0!==t?t:""}`,alarm_limit:`${null!==(n=te[l].alarm_limit)&&void 0!==n?n:""}`,warning_limit_bottom:`${null!==(r=te[l].warning_limit_bottom)&&void 0!==r?r:""}`,alarm_limit_bottom:`${null!==(i=te[l].alarm_limit_bottom)&&void 0!==i?i:""}`})}y.A.export("Centerline Data",["created_at","value","warning_limit","alarm_limit","warning_limit_bottom","alarm_limit_bottom"],e)};return(0,r.useEffect)(()=>(p(t?()=>Ce:()=>ke),()=>{p(null)}),[t,te,W]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.cardBodyHeader,children:["chart"===P&&t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.headerChart,children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{className:i.A.titleChart,children:Ae}),(0,b.jsxs)("div",{className:i.A.chartButtons,style:{justifyContent:"end"},children:[(0,b.jsx)("button",{onClick:()=>L("hour"),className:"hour"===H?i.A.activeBtn:"",children:"Hour"}),(0,b.jsx)("button",{onClick:()=>L("minutes_10"),className:"minutes_10"===H?i.A.activeBtn:"",children:"Minute"}),(0,b.jsx)("button",{onClick:()=>L("all"),className:"all"===H?i.A.activeBtn:"",children:"All"})]})]}),(0,b.jsxs)("div",{className:i.A.bodyChart,children:[(0,b.jsx)("button",{className:i.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==H?je(-1,"hours"):"minutes_10"==H&&je(-10,"minutes")},children:(0,b.jsx)(d.ed2,{})}),(0,b.jsx)("div",{className:i.A.wrapperChart,children:(0,b.jsx)(v.N1,{data:oe,options:de,plugins:[ye]})}),(0,b.jsx)("button",{className:i.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==H?je(1,"hours"):"minutes_10"==H&&je(10,"minutes")},children:(0,b.jsx)(d.FDZ,{})})]})]}),"table"===P&&t&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,b.jsxs)("table",{className:"tableclickcell",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"No"}),(0,b.jsxs)("th",{children:[pe("created_at","Waktu"),ge("created_at","Waktu")]}),(0,b.jsxs)("th",{children:[pe("value","Centerline"),ge("value","Centerline")]}),(0,b.jsxs)("th",{children:[pe("warning_limit","Warning Limit"),ge("warning_limit","Warning Limit")]}),(0,b.jsxs)("th",{children:[pe("alarm_limit","Alarm Limit"),ge("alarm_limit","Alarm Limit")]}),(0,b.jsxs)("th",{children:[pe("warning_limit_bottom","Warning Limit Bottom"),ge("warning_limit_bottom","Warning Limit Bottom")]}),(0,b.jsxs)("th",{children:[pe("alarm_limit_bottom","Alarm Limit Bottom"),ge("alarm_limit_bottom","Alarm Limit Bottom")]})]})}),o.A.FastIsEmpty(te)?(0,b.jsx)("tbody",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,b.jsx)("tbody",{children:(0,b.jsx)(u.A,{tableData:te,rowFunction:we,rowsCount:250,rowsIncrement:50})})]})})}),"chart"===P&&!t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.headerChart,children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{className:i.A.titleChart,children:Ae}),(0,b.jsxs)("div",{className:i.A.chartButtons,style:{justifyContent:"end"},children:[(0,b.jsx)("button",{onClick:()=>L("hour"),className:"hour"===H?i.A.activeBtn:"",children:"Hour"}),(0,b.jsx)("button",{onClick:()=>L("minutes_10"),className:"minutes_10"===H?i.A.activeBtn:"",children:"Minute"}),(0,b.jsx)("button",{onClick:()=>L("all"),className:"all"===H?i.A.activeBtn:"",children:"All"})]})]}),(0,b.jsxs)("div",{className:i.A.bodyChart,children:[(0,b.jsx)("button",{className:i.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==H?je(-1,"hours"):"minutes_10"==H&&je(-10,"minutes")},children:(0,b.jsx)(d.ed2,{})}),(0,b.jsx)("div",{className:i.A.wrapperChart,children:(0,b.jsx)(v.N1,{data:Z,options:K,plugins:[_e]})}),(0,b.jsx)("button",{className:i.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==H?je(1,"hours"):"minutes_10"==H&&je(10,"minutes")},children:(0,b.jsx)(d.FDZ,{})})]})]}),"table"===P&&!t&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,b.jsxs)("table",{className:"tableclickcell",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"No"}),(0,b.jsxs)("th",{children:[ve("created_at","Waktu"),fe("created_at","Waktu")]}),(0,b.jsxs)("th",{children:[ve("value","Centerline"),fe("value","Centerline")]}),(0,b.jsxs)("th",{children:[ve("warning_limit","Warning Limit"),fe("warning_limit","Warning Limit")]}),(0,b.jsxs)("th",{children:[ve("alarm_limit","Alarm Limit"),fe("alarm_limit","Alarm Limit")]}),(0,b.jsxs)("th",{children:[ve("warning_limit_bottom","Warning Limit Bottom"),fe("warning_limit_bottom","Warning Limit Bottom")]}),(0,b.jsxs)("th",{children:[ve("alarm_limit_bottom","Alarm Limit Bottom"),fe("alarm_limit_bottom","Alarm Limit Bottom")]})]})}),o.A.FastIsEmpty(W)?(0,b.jsx)("tbody",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,b.jsx)("tbody",{children:(0,b.jsx)(u.A,{tableData:W,rowFunction:we,rowsCount:250,rowsIncrement:50})})]})})})]}),(0,b.jsxs)("div",{className:i.A.cardBodyFooter,children:[(0,b.jsxs)("div",{className:i.A.footerLeft,children:[(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"chart"===P&&t?i.A.active:""}`,onClick:()=>{Ee("chart",!0)},children:[(0,b.jsx)(m.kk8,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Realtime Chart"})]}),(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"table"===P&&t?i.A.active:""}`,onClick:()=>{Ee("table",!0)},children:[(0,b.jsx)(_.ZIs,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Realtime Table"})]})]}),(0,b.jsx)("div",{className:i.A.footerMid,children:"chart"===P&&t&&(0,b.jsxs)("div",{className:i.A.switchGroup,children:[(0,b.jsx)("label",{htmlFor:"auto",children:"Auto"}),(0,b.jsxs)("label",{className:i.A.switch,children:[(0,b.jsx)("input",{type:"checkbox",id:"auto",checked:R,onChange:()=>{D(e=>!e)}}),(0,b.jsx)("span",{className:i.A.slider})]})]})}),(0,b.jsxs)("div",{className:i.A.footerRight,children:[(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"chart"!==P||t?"":i.A.active}`,onClick:()=>{Ee("chart",!1)},children:[(0,b.jsx)(d.YYR,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Chart"})]}),(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"table"!==P||t?"":i.A.active}`,onClick:()=>{Ee("table",!1)},children:[(0,b.jsx)(d.ist,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Table"})]})]})]})]})}},5764:(e,t,n)=>{n.d(t,{A:()=>i});class r{}r.FilterTable=(e,t)=>{let n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];if(t[i]){if(void 0==e||null==e[i])return!1;if(""!==t[i]&&0==e[i].toString().toLowerCase().includes(t[i].toString().toLowerCase()))return!1}}return!0},r.SortingTable=(e,t,n)=>{if(null!=n&&void 0!=n&&void 0!==e[n]&&void 0!==t[n]){if("string"===typeof e[n]&&"string"===typeof t[n])return e[n].localeCompare(t[n]);if("number"===typeof e[n]&&"number"===typeof t[n])return e[n]-t[n]}return 0},r.FastIsEmpty=e=>{for(const t in e)return!1;return!0};const i=r},6278:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(5043),i=n(5843),a=n(579);function l(e){const{onVisible:t,content:n}=e,{ref:r}=(0,i.Wx)({threshold:.1,triggerOnce:!1,initialInView:!1,onChange:(e,n)=>{e&&t()}});return(0,a.jsx)("tr",{ref:r,children:n})}function o(e){const{tableData:t,rowFunction:n,onRowClick:i,rowsCount:o,rowsIncrement:s}=e,d=o,c=s,[u,m]=(0,r.useState)(d),_=(0,r.useMemo)(()=>{const e=[];for(let r=0;r<t.length;r++){if(r<u-d||r>u)continue;const o=t[r];e.push((0,a.jsxs)(a.Fragment,{children:[r==u?(0,a.jsx)(l,{content:(0,a.jsx)(a.Fragment,{}),onVisible:function(){m(e=>e+c),setTimeout(()=>{var e;null===(e=document.getElementById(`rows_${r}`))||void 0===e||e.scrollIntoView()})}}):(0,a.jsx)(a.Fragment,{}),r==u-d&&0!=r?(0,a.jsx)(l,{content:(0,a.jsx)(a.Fragment,{}),onVisible:function(){m(e=>e-c<d?d:e-c),setTimeout(()=>{var e;null===(e=document.getElementById(`rows_${r}`))||void 0===e||e.scrollIntoView()})}}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("tr",{id:`rows_${r}`,style:{whiteSpace:"nowrap"},onClick:()=>{null!=i&&i(o)},children:n(r,o)}),r==t.length-1?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:1e3,children:"END OF DATA"})}):(0,a.jsx)(a.Fragment,{})]}))}return e},[u,t]);return(0,r.useEffect)(()=>{m(d)},[t]),_.map(e=>e)}}}]);
//# sourceMappingURL=505.8c51476e.chunk.js.map