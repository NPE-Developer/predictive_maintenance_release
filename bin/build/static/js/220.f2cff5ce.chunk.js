"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[220],{1982:(e,t,r)=>{r.d(t,{A:()=>s});const s={box:"Popup_box__L6ukI",modalPilih:"Popup_modalPilih__A4Edx",slideIn:"Popup_slideIn__CW6qc",containerfilter:"Popup_containerfilter__OBopv",modalConfirm:"Popup_modalConfirm__D-kYn",tabView:"Popup_tabView__GpztR",modalKeyboardNumeric:"Popup_modalKeyboardNumeric__9bmMr",modalKeyboard:"Popup_modalKeyboard__0ECMp",buttonKey:"Popup_buttonKey__4FEI6",modalTable:"Popup_modalTable__S-lni",modal:"Popup_modal__oHjOC",modaldetail:"Popup_modaldetail__uqSWM",buttons:"Popup_buttons__6SigF",input:"Popup_input__l3MOR",title:"Popup_title__53Wuz",modalpilih:"Popup_modalpilih__V8Sgk",form:"Popup_form__8bjUk",containerkey:"Popup_containerkey__xsPEg",modalmobile:"Popup_modalmobile__kvm78",hide:"Popup_hide__ieQY9",close:"Popup_close__eT9CH",frame:"Popup_frame__v0jqt"}},2087:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(1121),n=r(9223),l=r.n(n);const i=class{static export(e,t,r){const s=new(l().Workbook),n=s.addWorksheet(e),i=e=>e>=0&&e<=51?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"][e]:"Invalid number";t.map((e,t)=>{n.getColumn(`${i(t)}`).width=20,n.getCell(`${i(t)}1`).value=String(e.toUpperCase()),n.getCell(`${i(t)}1`).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"c8c8c8"}},font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}}),r.map((e,r)=>{const s=[];t.map(t=>{null!=e[t]?s.push(e[t]):s.push("")});n.addRow(s).eachCell(e=>{e.style={alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}})}),s.xlsx.writeBuffer().then(t=>{const r=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=document.createElement("a");s.href=window.URL.createObjectURL(r),s.download=`${e}.xlsx`,s.click(),window.URL.revokeObjectURL(s.href)})}static async import(e){const t=new(l().Workbook);await t.xlsx.load(e);const r=[];if(t.eachSheet(e=>{const t=[];e.eachRow(e=>{t.push(e.values)}),r.push(t)}),r.length>0){const e=r[0],t=[];for(let r=1;r<e.length;r++){const l={};for(let t=0;t<e[r].length;t++){var n;if(null!=e[0][t]&&"string"==typeof e[0][t])if(e[r][t]instanceof Date)l[e[0][t].toLowerCase()]=(0,s.GP)(e[r][t],"yyyy-MM-dd HH:mm:ss");else l[e[0][t].toLowerCase()]="object"==typeof e[r][t]?e[r][t].result:null!==(n=e[r][t])&&void 0!==n?n:""}t.push(l)}return t}return[]}}},2490:(e,t,r)=>{r.d(t,{A:()=>l});var s=r(5043),n=r(579);function l(e){const{detailCard:t,customTitleJSX:r,detailColor:l,detailTitle:i,backgroundImage:o,stateShow:a,backgroundColor:d,borderColor:c}=e,[u,p]=(0,s.useState)(null!==a&&void 0!==a&&a);return(0,n.jsxs)("div",{style:{background:null!=o?`url(${o})`:"",backgroundColor:null!=d?`${d}`:"",backgroundRepeat:"no-repeat",backgroundSize:"cover",padding:"1vh",borderRadius:"12px",margin:"1vh 0vw",border:null!=c?`2px solid ${c}`:"2px solid var(--secondary-color)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"end",fontWeight:"600",cursor:"pointer"},onClick:()=>p(!u),children:[r?"":(0,n.jsx)("div",{}),null!==r&&void 0!==r?r:(0,n.jsx)("div",{style:{color:null!==l&&void 0!==l?l:"black",fontSize:"2.5vh"},children:null!==i&&void 0!==i?i:"DETAILS"}),(0,n.jsx)("div",{style:{color:null!==l&&void 0!==l?l:"black",fontSize:"2.5vh",float:"right",transition:"transform 0.3s",transform:u?"rotate(+90deg)":"rotate(0deg)"},children:">"})]}),!0===u?(0,n.jsx)("hr",{style:{color:null!==l&&void 0!==l?l:"black",border:"1px solid",margin:"1vh 0vw"}}):"",(0,n.jsx)("div",{children:!0===u?t:""})]})}},3109:(e,t,r)=>{e.exports=r.p+"static/media/backgroundCardBlue.5a970be0b92046f9f009.jpg"},4e3:(e,t,r)=>{r.d(t,{A:()=>i});r(5043);var s=r(8645),n=r(1982),l=r(579);function i(e){const{popupTitle:t,showPopup:r,setShowPopup:i,popupContent:o}=e;return(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(s.A,{close:()=>i(!1)}),(0,l.jsxs)("div",{className:n.A.modalmobile,id:r?void 0:n.A.hide,style:{maxWidth:"1200px"},children:[(0,l.jsx)("div",{children:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"5px solid #2d545e",marginBottom:"1em"},children:[null!=t?(0,l.jsx)("h2",{children:t.toUpperCase().replace("_"," ")}):(0,l.jsx)("h2",{children:"\xa0"}),(0,l.jsx)("h2",{onClick:()=>i(!1),children:"X"})]})}),(0,l.jsx)("div",{children:o})]})]})}},4761:(e,t,r)=>{r.d(t,{U:()=>s});class s{constructor(e){this.popupTitle=void 0,this.tableContent=void 0,this.onClick=void 0,this.onClose=void 0,this.popupTitle=e.popupTitle,this.tableContent=e.tableContent,this.onClick=e.onClick,this.onClose=e.onClose}}},5764:(e,t,r)=>{r.d(t,{A:()=>n});class s{}s.FilterTable=(e,t)=>{let r=Object.keys(e);for(let s=0;s<r.length;s++){const n=r[s];if(t[n]){if(void 0==e||null==e[n])return!1;if(""!==t[n]&&0==e[n].toString().toLowerCase().includes(t[n].toString().toLowerCase()))return!1}}return!0},s.SortingTable=(e,t,r)=>{if(null!=r&&void 0!=r&&void 0!==e[r]&&void 0!==t[r]){if("string"===typeof e[r]&&"string"===typeof t[r])return e[r].localeCompare(t[r]);if("number"===typeof e[r]&&"number"===typeof t[r])return e[r]-t[r]}return 0},s.FastIsEmpty=e=>{for(const t in e)return!1;return!0};const n=s},7143:(e,t,r)=>{r.d(t,{A:()=>s});const s={container:"Master_container__UNjk+",left:"Master_left__QUnXe",label:"Master_label__xo2Vh",input:"Master_input__Rb2Y0",label2:"Master_label2__0ZC+T",input2:"Master_input2__D1NVX",input3:"Master_input3__Jzv+O",right:"Master_right__c-wQw",table:"Master_table__U-U3s",buttonFixAction:"Master_buttonFixAction__TPaCo",buttons:"Master_buttons__pkSmf",buttons2:"Master_buttons2__fkuE5",buttons3:"Master_buttons3__bSnnD",command:"Master_command__msAz4",btrefresh:"Master_btrefresh__ZtG4P",inputedit:"Master_inputedit__rSEDm",inputadd:"Master_inputadd__mzfvG",containerleftright:"Master_containerleftright__tF71J",leftposition:"Master_leftposition__yYlRV",rightposition:"Master_rightposition__bCiFF",containerForm:"Master_containerForm__Rgxli",containerFormItem:"Master_containerFormItem__rZh0Z",containerfilterdate:"Master_containerfilterdate__V7Vcp",filterdate:"Master_filterdate__6saQZ",containerfiltertext:"Master_containerfiltertext__0OUnn",labelforfiltertext:"Master_labelforfiltertext__XJZXd",tablebarcodecontainer:"Master_tablebarcodecontainer__odNcJ",bodyPopup:"Master_bodyPopup__RowBz",rowGrid:"Master_rowGrid__fTtZ2"}},8682:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(5043),n=r(8645),l=r(1982),i=r(5764),o=r(579);function a(e){const{showPopup:t,setShowPopup:r,popUpPilihEntity:a}=e,d=a.popupTitle,c=a.tableContent,u=a.onClick,p=a.onClose,[h,m]=(0,s.useState)({}),g=()=>{r(!1),m({}),p()};return(0,s.useEffect)(()=>{if(null===c||0===c.length)return;let e={};const t=Object.keys(c[0]);for(let r=0;r<t.length;r++)e[t[r]]="";m(e)},[c]),(0,o.jsxs)(o.Fragment,{children:[t&&(0,o.jsx)(n.A,{close:()=>g()}),(0,o.jsxs)("div",{className:l.A.modalmobile,id:t?null:l.A.hide,style:{maxWidth:"1200px"},children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid silver"},children:[null!=d?(0,o.jsx)("h2",{style:{textTransform:"uppercase"},children:d.replace("_"," ")}):(0,o.jsx)("h2",{children:" \xa0"}),(0,o.jsx)("h2",{onClick:()=>g(),children:"X"})]})}),(0,o.jsx)("div",{children:0===c.length?(0,o.jsx)("table",{children:(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("th",{children:"no data available yet!"})})})}):(0,o.jsx)("div",{style:{maxHeight:"70vh",overflow:"auto",paddingBottom:"1rem"},children:(0,o.jsxs)("table",{className:"tablepopup",children:[(0,o.jsxs)("thead",{children:[(0,o.jsx)("tr",{children:Object.keys(c[0]).map(e=>(0,o.jsx)("th",{children:(0,o.jsxs)("label",{style:{fontSize:"12px",textTransform:"uppercase",fontWeight:"600",color:"white"},children:[e.replace("_"," ")," :"]})},`filter-${e}`))}),(0,o.jsx)("tr",{children:Object.keys(c[0]).map(e=>(0,o.jsx)("th",{children:(0,o.jsx)("input",{type:"text",id:`${e}`,name:e,value:h[e],onChange:e=>m(t=>({...t,[e.target.name]:e.target.value}))})},`filter-${e}`))})]}),(0,o.jsx)("tbody",{children:c.filter(e=>i.A.FilterTable(e,h)).map((e,t)=>(0,o.jsx)("tr",{onClick:()=>(e=>{r(!1),m({}),u(e)})(e),children:Object.keys(e).map(r=>(0,o.jsx)("td",{children:e[r]},`${t}-key${r}`))},`rowSelectTable-${t}`))})]})})})]})]})}},9220:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var s=r(5043),n=r(2573),l=r(7143),i=r(2490),o=r(3109),a=r(4e3),d=r(184),c=r(8443);class u{constructor(e){this.users_id=void 0,this.username=void 0,this.grup=void 0,this.users_id=e.users_id,this.username=e.username,this.grup=e.grup}}class p{constructor(e){this.grup_id=void 0,this.username=void 0,this.grup=void 0,this.grup_id=e.grup_id,this.username=e.username,this.grup=e.grup}}var h=r(2340);class m{static async GetAllUser(){let e=await h.A.fetchAuth(`${c.C}/api/v1/users`);if(200!==e.status)throw new Error(e.message);const t=[];for(let r=0;r<e.data.length;r++)t.push(new u({users_id:e.data[r].users_id,username:e.data[r].username,grup:e.data[r].grup}));return t}static async GetAllGrup(){let e=await h.A.fetchAuth(`${c.C}/api/v1/users/grup`);if(200!==e.status)throw new Error(e.message);const t=[];for(let r=0;r<e.data.length;r++)t.push({grup_id:e.data[r].grup_id,grup:e.data[r].grup});return t}static async AddUser(e){let t=await h.A.fetchAuth(`${c.C}/api/v1/users`,{method:"POST",body:JSON.stringify({...e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}static async UpdateUser(e,t){1==t.grup_id&&(t={username:t.username,grup_id:t.grup_id});let r=await h.A.fetchAuth(`${c.C}/api/v1/users`,{method:"PATCH",body:JSON.stringify({users_id:e.users_id,fields:t}),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error(r.message);return r}static async DeleteUser(e){let t=await h.A.fetchAuth(`${c.C}/api/v1/users`,{method:"DELETE",body:JSON.stringify({users_id:e}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}}var g=r(4761),_=r(8682),x=r(2087),v=r(414),f=r(3156),b=r(5764),y=r(2620),j=r(579);function w(){var e,t,r,c;const u=(0,s.useContext)(n.A),h=u.contextAccessToken,w=u.contextShowAlertFunc,A=u.contextShowLoadingFunc,C=u.stateShowLoading,[k,S]=(0,s.useState)([]),[P,N]=(0,s.useState)([]),[M,T]=(0,s.useState)(null),[E,U]=(0,s.useState)(null),[F,O]=(0,s.useState)(!1),[$,G]=(0,s.useState)(!1),[R,D]=(0,s.useState)(),[I,B]=(0,s.useState)(null),[L,z]=(0,s.useState)("ascending"),[W,J]=(0,s.useState)({}),V=(0,s.useRef)(null),X=async()=>{A(!0);try{const e=await m.GetAllUser();S(e),N(e)}catch(e){w(new v.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{A(!1)}},H=(e,t)=>{var r;return(0,j.jsx)("div",{children:(0,j.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",maxWidth:"500px"},type:"text",value:null!==(r=W[e])&&void 0!==r?r:"",placeholder:`${null!==t&&void 0!==t?t:e} ...`,onChange:t=>{J(r=>{const s={...r};return s[e]=t.target.value,s})}})})},Z=(e,t)=>(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>(e=>{B(e),z("ascending"===L?"descending":"ascending")})(e),children:[(0,j.jsx)("div",{children:null!==t&&void 0!==t?t:e}),(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,j.jsx)(f.XhJ,{style:{color:I==e&&"descending"==L?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,j.jsx)(f.GOR,{style:{color:I==e&&"ascending"==L?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]})}),K=()=>{setTimeout(()=>{var e;null===(e=V.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})},300)};return(0,s.useEffect)(()=>{X()},[h]),(0,s.useEffect)(()=>{(async()=>{A(!0);try{let e=P.filter(e=>b.A.FilterTable(e,W));S(e),A(!1)}catch(e){w(new v.u({message:e instanceof Error?e.message:e.toString(),level:3})),A(!1)}})()},[W]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"container",style:{display:C?"none":"flex",backgroundColor:"transparent"},children:[(0,j.jsxs)("div",{style:{height:"94dvh",maxHeight:"100vh",display:"flex",flexDirection:"column"},children:[(0,j.jsx)("div",{style:{flexBasis:"auto"},className:"ordering-card",children:(0,j.jsx)(i.A,{detailTitle:"Master User",detailColor:"var(--secondary-color)",backgroundImage:o,stateShow:!0,detailCard:(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:l.A.rowGrid,style:{alignItems:"end"},children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{style:{color:"white",textAlign:"start"},children:"Action :"}),(0,j.jsx)("button",{className:"cardButton",onClick:()=>(U(null),T(null),void O(!0)),children:"Add New"})]}),(0,j.jsx)("div",{children:(0,j.jsx)("button",{className:"cardButton",onClick:()=>(async()=>{if(0==k.length)return w(new v.u({message:"NO DATA!",level:3}));let e=[];for(let r=0;r<k.length;r++){var t;e.push({username:k[r].username,grup:null!==(t=k[r].grup)&&void 0!==t?t:""})}x.A.export("Master Users List",["username","grup"],e)})(),children:"Generate Excel"})}),(0,j.jsx)("div",{children:(0,j.jsxs)("button",{className:"cardButton",onClick:()=>{J({}),X(),B(null),z("descending")},children:[(0,j.jsx)(y.aO_,{})," \xa0 Reset Filter"]})})]})})})}),(0,j.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,j.jsxs)("table",{className:"tableclickcell",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"No"}),(0,j.jsxs)("th",{children:[Z("username","Username"),H("username","Username")]}),(0,j.jsxs)("th",{children:[Z("grup","Group"),H("grup","Group")]}),(0,j.jsx)("th",{children:"Action"})]})}),k.length>0?(0,j.jsx)("tbody",{children:k.sort((e,t)=>I?"ascending"==L?b.A.SortingTable(e,t,I):b.A.SortingTable(t,e,I):0).map((e,t)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:t+1}),(0,j.jsx)("td",{children:e.username}),(0,j.jsx)("td",{children:e.grup}),(0,j.jsxs)("td",{className:"group-pick",onClick:()=>{(e=>{T(e),U(null),O(!0)})(e)},children:[(0,j.jsx)(d.uO9,{})," Edit"]})]},t))}):(0,j.jsx)("tbody",{children:(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})})]})})]}),(0,j.jsx)(a.A,{setShowPopup:O,showPopup:F,popupTitle:null==M?"Add New":`Edit ${null===M||void 0===M?void 0:M.username}`,popupContent:(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:l.A.form,children:[(0,j.jsx)("div",{className:l.A.containerleftright,children:(0,j.jsxs)("div",{className:l.A.leftposition,children:[(e=>{const{label:t,value:r,required:s,attribute:n,onchange:i,type_input:o}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:l.A.label,children:[" ",t," ",s?(0,j.jsx)("span",{style:{color:"red"},children:"*"}):(0,j.jsx)(j.Fragment,{})]}),(0,j.jsx)("input",{className:l.A.inputedit,type:o,ref:V,value:r,onFocus:K,onChange:null!=i?i:e=>{U(t=>{const r={...t};return r[n]="grup_id"===n?parseInt(e.target.value):e.target.value,r})}})]})})({label:"Username",value:null!==(e=null!==(t=null===E||void 0===E?void 0:E.username)&&void 0!==t?t:null===M||void 0===M?void 0:M.username)&&void 0!==e?e:"",type_input:"text",attribute:"username",required:!0}),(0,j.jsxs)("div",{className:l.A.label,children:[" Role ",(0,j.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,j.jsx)("input",{className:l.A.inputedit,type:"text",readOnly:!0,value:null!==(r=null!==(c=null===E||void 0===E?void 0:E.grup)&&void 0!==c?c:null===M||void 0===M?void 0:M.grup)&&void 0!==r?r:"",onClick:async()=>{A(!0),O(!1);try{const e=await m.GetAllGrup();D(new g.U({popupTitle:"Select Group",tableContent:e,onClick:e=>{U(t=>new p({...t,grup_id:e.grup_id,grup:e.grup})),O(!0)},onClose:()=>{G(!1),O(!0)}})),G(!0)}catch(e){w(new v.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{A(!1)}}})]})}),(0,j.jsxs)("div",{className:l.A.buttons2,children:[(0,j.jsx)("div",{className:l.A.left,children:(0,j.jsx)("button",{className:"tertiaryButton",onClick:()=>{O(!1)},children:"Close"})}),M&&(0,j.jsx)("div",{className:l.A.right,children:(0,j.jsx)("button",{className:"secondaryButton",onClick:()=>(async()=>w(new v.u({message:`Are you sure you want to delete ${null===M||void 0===M?void 0:M.username} ?`,onOk:async()=>{A(!0);try{if(null==M)return;const e=await m.DeleteUser(M.users_id);await X(),T(null),O(!1),w(new v.u({message:e.message,level:1}))}catch(e){w(new v.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{A(!1)}},withCancel:!0,withOk:!0,level:2})))(),children:"Delete"})}),(0,j.jsx)("div",{className:l.A.right,children:(0,j.jsx)("button",{className:"primaryButton",onClick:()=>{M?(async()=>{A(!0);try{if(null==M||null==E)throw new Error("Please fill in all forms!");const e=await m.UpdateUser(M,{grup_id:E.grup_id,username:E.username});await X(),T(null),O(!1),w(new v.u({message:e.message,level:1}))}catch(e){w(new v.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{A(!1)}})():(async()=>{A(!0);try{if(null==(null===E||void 0===E?void 0:E.grup_id)||null==(null===E||void 0===E?void 0:E.username))throw new Error("Please fill in all forms!");const e=await m.AddUser({grup_id:E.grup_id,username:E.username});await X(),T(null),U(null),O(!1),w(new v.u({message:e.message,level:1}))}catch(e){w(new v.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{A(!1)}})()},children:"Save"})})]})]})})}),null!=R?(0,j.jsx)(_.A,{showPopup:$,setShowPopup:G,popUpPilihEntity:R}):(0,j.jsx)(j.Fragment,{})]})})}}}]);
//# sourceMappingURL=220.f2cff5ce.chunk.js.map