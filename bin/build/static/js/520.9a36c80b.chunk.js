"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[520],{1233:(e,r,t)=>{t.d(r,{e:()=>l,w:()=>a});var o=t(8443),n=t(2340);class l{static async GetMachineConfig(e){let r=`${o.C}/api/extension/following_error/v1/machine`;null!=e&&(r+=`?machine_id=${e}`);const t=await n.A.fetchAuth(r);if(200!==t.status)throw new Error(t.message);if(!Array.isArray(t.data))throw new Error("invalid machine config response");for(let o=0;o<t.data.length;o++){var l,a;const e=t.data[o];if("number"!=typeof e.machine_id)throw new Error("invalid machine_id value");if("number"!=typeof(null!==(l=e.following_error_warn)&&void 0!==l?l:0))throw new Error("invalid following_error_warn value");if("number"!=typeof(null!==(a=e.following_error_alarm)&&void 0!==a?a:0))throw new Error("invalid following_error_alarm value")}return t.data}static async UpsertMachineConfig(e,r){const t=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/machine`,{method:"PATCH",body:JSON.stringify({machine_id:e,fields:r}),headers:{"Content-Type":"application/json"}});if(200!==t.status)throw new Error(t.message);return t}}class a{static async DashboardLevel1(e,r){const t=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/l1?start_date=${e}&end_date=${r}`);if(200!==t.status)throw new Error(t.message);const l=Array.isArray(t.data)?t.data:[];for(let o=0;o<l.length;o++){if("number"!=typeof l[o].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof l[o].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(l[o].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof l[o].ool_following_error)throw new Error("invalid ool_following_error value")}return l}static async DashboardLevel2(e,r,t){const l=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/l2?business_unit_id=${t}&start_date=${e}&end_date=${r}`);if(200!==l.status)throw new Error(l.message);const a=Array.isArray(l.data)?l.data:[];for(let o=0;o<a.length;o++){if("number"!=typeof a[o].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof a[o].link_up)throw new Error("invalid link_up value");if(!Array.isArray(a[o].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof a[o].ool_following_error)throw new Error("invalid ool_following_error value")}return a}static async DashboardLevel3(e,r,t){const l=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/l3?link_up_id=${t}&start_date=${e}&end_date=${r}`);if(200!==l.status)throw new Error(l.message);const a=Array.isArray(l.data)?l.data:[];for(let o=0;o<a.length;o++){if("number"!=typeof a[o].machine_id)throw new Error("invalid machine_id value");if("number"!=typeof a[o].ool_following_error)throw new Error("invalid ool_following_error value")}return a}static async DashboardLevel4(e,r,t){const l=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/data?machine_id=${t}&start_date=${e}&end_date=${r}`);if(200!==l.status)throw new Error(l.message);const a=Array.isArray(l.data)?l.data:[];for(let o=0;o<a.length;o++){if("number"!=typeof a[o].following_error)throw new Error("invalid following_error value");if(void 0!=a[o].following_error_warn&&"number"!=typeof a[o].following_error_warn)throw new Error("invalid following_error_warn value");if(void 0!=a[o].following_error_alarm&&"number"!=typeof a[o].following_error_alarm)throw new Error("invalid following_error_alarm value");if("Invalid Date"==new Date(a[o].created_at).toString())throw new Error("invalid created_at value");a[o].created_at=new Date(a[o].created_at)}return a}static async DashboardLevel1Realtime(){const e=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/l1/realtime`);if(200!==e.status)throw new Error(e.message);const r=Array.isArray(e.data)?e.data:[];for(let t=0;t<r.length;t++){if("number"!=typeof r[t].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof r[t].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(r[t].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof r[t].ool_following_error)throw new Error("invalid ool_following_error value")}return r}static async DashboardLevel2Realtime(e){const r=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/l2/realtime?business_unit_id=${e}`);if(200!==r.status)throw new Error(r.message);const t=Array.isArray(r.data)?r.data:[];for(let o=0;o<t.length;o++){if("number"!=typeof t[o].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof t[o].link_up)throw new Error("invalid link_up value");if(!Array.isArray(t[o].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof t[o].ool_following_error)throw new Error("invalid ool_following_error value")}return t}static async DashboardLevel3Realtime(e){const r=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/l3/realtime?link_up_id=${e}`);if(200!==r.status)throw new Error(r.message);const t=Array.isArray(r.data)?r.data:[];for(let o=0;o<t.length;o++){if("number"!=typeof t[o].machine_id)throw new Error("invalid machine_id value");if("number"!=typeof t[o].ool_following_error)throw new Error("invalid ool_following_error value")}return t}static async DashboardLevel4Realtime(e){const r=await n.A.fetchAuth(`${o.C}/api/extension/following_error/v1/data/realtime?machine_id=${e}`);if(200!==r.status)throw new Error(r.message);const t=Array.isArray(r.data)?r.data:[];for(let o=0;o<t.length;o++){if("number"!=typeof t[o].following_error)throw new Error("invalid following_error value");if(void 0!=t[o].following_error_warn&&"number"!=typeof t[o].following_error_warn)throw new Error("invalid following_error_warn value");if(void 0!=t[o].following_error_alarm&&"number"!=typeof t[o].following_error_alarm)throw new Error("invalid following_error_alarm value");if("Invalid Date"==new Date(t[o].created_at).toString())throw new Error("invalid created_at value");t[o].created_at=new Date(t[o].created_at)}return t}}},2087:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(1121),n=t(9223),l=t.n(n);const a=class{static export(e,r,t){const o=new(l().Workbook),n=o.addWorksheet(e),a=e=>e>=0&&e<=51?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"][e]:"Invalid number";r.map((e,r)=>{n.getColumn(`${a(r)}`).width=20,n.getCell(`${a(r)}1`).value=String(e.toUpperCase()),n.getCell(`${a(r)}1`).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"c8c8c8"}},font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}}),t.map((e,t)=>{const o=[];r.map(r=>{null!=e[r]?o.push(e[r]):o.push("")});n.addRow(o).eachCell(e=>{e.style={alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}})}),o.xlsx.writeBuffer().then(r=>{const t=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=document.createElement("a");o.href=window.URL.createObjectURL(t),o.download=`${e}.xlsx`,o.click(),window.URL.revokeObjectURL(o.href)})}static async import(e){const r=new(l().Workbook);await r.xlsx.load(e);const t=[];if(r.eachSheet(e=>{const r=[];e.eachRow(e=>{r.push(e.values)}),t.push(r)}),t.length>0){const e=t[0],r=[];for(let t=1;t<e.length;t++){const l={};for(let r=0;r<e[t].length;r++){var n;if(null!=e[0][r]&&"string"==typeof e[0][r])if(e[t][r]instanceof Date)l[e[0][r].toLowerCase()]=(0,o.GP)(e[t][r],"yyyy-MM-dd HH:mm:ss");else l[e[0][r].toLowerCase()]="object"==typeof e[t][r]?e[t][r].result:null!==(n=e[t][r])&&void 0!==n?n:""}r.push(l)}return r}return[]}}},3520:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var o=t(5043),n=t(8270),l=t(1121),a=t(2573),i=t(5764),s=t(414),c=t(184),d=t(3216),u=t(6278),f=t(2620),h=t(397),g=t(6361),w=t(2926),m=t(6058),_=t(1233),y=t(2087),v=t(579);g.t1.register(g.No,g.FN,g.kc,g.hE,g.PP,g.m_,g.s$),w.d.maintainAspectRatio=!1,w.d.responsive=!0;const p=e=>{let{realtime:r,setRealtime:t,refresh:g,start_date:w,end_date:p,setHandleGenerateExcel:x}=e;const b=(0,o.useContext)(a.A),A=b.contextAccessToken,j=b.contextShowAlertFunc,C=b.contextShowLoadingFunc,{machineId:E}=(b.stateShowLoading,(0,d.g)()),M="#fb8500",k="rgba(41, 191, 18, 0.21)",F="rgba(244, 188, 20, 0.28)",S="rgba(213, 14, 81, 0.2)",[N,$]=(0,o.useState)(new Date),[R,D]=(0,o.useState)(!0),[H,I]=(0,o.useState)("minutes_10"),[P,T]=(0,o.useState)("chart"),[B,L]=(0,o.useState)(null),[G,V]=(0,o.useState)("ascending"),[W,O]=(0,o.useState)([]),[z,Y]=(0,o.useState)([]),U=(0,o.useRef)({}),[J,Z]=(0,o.useState)({}),[q,X]=(0,o.useState)({labels:[],datasets:[]}),[K,Q]=(0,o.useState)({}),ee=(0,o.useRef)(null),[re,te]=(0,o.useState)([]),[oe,ne]=(0,o.useState)([]),[le,ae]=(0,o.useState)({}),[ie,se]=(0,o.useState)({labels:[],datasets:[]}),[ce,de]=(0,o.useState)({}),ue=(0,o.useRef)(null);function fe(e){const r={};return"all"==H?{all:[...e].toReversed()}:(e.toReversed().forEach(e=>{const t=new Date(e.created_at),o=new Date(t);o.setMinutes(10*Math.floor(t.getMinutes()/10)),o.setSeconds(0),o.setMilliseconds(0);let n=(0,l.GP)(o,"yyyy-MM-dd HH:00:00");switch(H){case"hour":n=(0,l.GP)(o,"yyyy-MM-dd HH:00:00");break;case"minutes_10":n=(0,l.GP)(o,"yyyy-MM-dd HH:mm:00")}void 0==r[n]?r[n]=[]:r[n].push(e)}),r)}const he={id:"statusArea",beforeDatasetsDraw(e){var r;const t=ee.current,{ctx:o,chartArea:n,scales:l}=e;if(!n||!l.x||!l.y||null==(null===t||void 0===t?void 0:t.following_error_warn)||null==(null===t||void 0===t?void 0:t.following_error_alarm))return;o.save();const a=l.y.min,i=null!==(r=null===t||void 0===t?void 0:t.following_error_warn)&&void 0!==r?r:0,s=l.y.getPixelForValue(a),c=l.y.getPixelForValue(i);o.fillStyle=k,o.fillRect(n.left,Math.min(s,c),n.right-n.left,Math.abs(s-c));const d=t?t.following_error_warn:0,u=t?t.following_error_alarm:0,f=l.y.getPixelForValue(d),h=l.y.getPixelForValue(u);o.fillStyle=F,o.fillRect(n.left,Math.min(f,h),n.right-n.left,Math.abs(f-h));const g=t?t.following_error_alarm:0,w=l.y.max,m=l.y.getPixelForValue(g),_=l.y.getPixelForValue(w);o.fillStyle=S,o.fillRect(n.left,Math.min(m,_),n.right-n.left,Math.abs(m-_)),o.restore()}},ge=(e,r)=>{var t;const o=`${Math.floor(r.getMinutes()/10)}0`;let n=(0,l.GP)(r,"yyyy-MM-dd HH:00:00");switch(H){case"hour":n=(0,l.GP)(r,"yyyy-MM-dd HH:00:00");break;case"minutes_10":n=(0,l.GP)(r,`yyyy-MM-dd HH:${o}:00`);break;case"all":n="all"}const a=null!==(t=e[n])&&void 0!==t?t:[];if(!a)return;const i=a.map(e=>(0,l.GP)(e.created_at,"HH:mm:ss")),s=a.map(e=>e.following_error),c=a.toReversed();ee.current=c[0];const d=Math.min(...s),u=Math.max(...s),f=u-d||1,h=d-.2*f,g=u+.2*f;X({labels:i,datasets:[{label:"Following Error",data:s,borderColor:M,pointBackgroundColor:M,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:M,borderWidth:4,pointRadius:0}]}),Q({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:h,max:g}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},we=(e,r)=>{var t;return(0,v.jsx)("div",{children:(0,v.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(t=J[e])&&void 0!==t?t:"",placeholder:`${null!==r&&void 0!==r?r:e} ...`,onChange:r=>{Z(t=>{const o={...t};return o[e]=r.target.value,o})}})})},me=(e,r)=>(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{L(e),V("ascending"===G?"descending":"ascending")},children:[(0,v.jsx)("div",{children:null!==r&&void 0!==r?r:e}),(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,v.jsx)(c.XhJ,{style:{color:B==e&&"descending"==G?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,v.jsx)(c.GOR,{style:{color:B==e&&"ascending"==G?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),_e=(e,r)=>{let t="black",o="400";const{following_error:n,following_error_warn:a,following_error_alarm:i}=r;return void 0!=a&&n<a&&(t="green",o="bold"),void 0!=a&&n>=a&&(t="orange",o="bold"),void 0!=i&&n>=i&&(t="red",o="bold"),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("td",{children:e+1}),(0,v.jsx)("td",{children:(0,l.GP)(r.created_at,"yyyy-MM-dd HH:mm:ss")}),(0,v.jsx)("td",{style:{color:t,fontWeight:o},children:r.following_error}),(0,v.jsx)("td",{children:r.following_error_warn}),(0,v.jsx)("td",{children:r.following_error_alarm})]})};(0,o.useEffect)(()=>{(()=>{const e=z.filter(e=>i.A.FilterTable(e,J)).sort((e,r)=>B?"ascending"==G?i.A.SortingTable(e,r,B):i.A.SortingTable(r,e,B):0);O(e)})()},[J,B,G]),(0,o.useEffect)(()=>{(async e=>{e&&C(!0);try{const e=await _.w.DashboardLevel4((0,l.Yq)(w,"yyyy-MM-dd"),(0,l.Yq)(p,"yyyy-MM-dd"),Number(E));O(e),Y(e);const r=fe(e);U.current=r;const t=Object.keys(r);if(t.length>0&&"all"!=H){const e=new Date(t[t.length-1]);$(e),ge(U.current,e)}else ge(U.current,N)}catch(r){j(new s.u({message:r instanceof Error?r.message:r.toString(),level:3}))}finally{C(!1)}})(0!=g)},[g]);const ye={id:"statusAreaRealtime",beforeDatasetsDraw(e){var r;const t=ue.current,{ctx:o,chartArea:n,scales:l}=e;if(!n||!l.x||!l.y||null==(null===t||void 0===t?void 0:t.following_error_warn)||null==(null===t||void 0===t?void 0:t.following_error_alarm))return;o.save();const a=l.y.min,i=null!==(r=null===t||void 0===t?void 0:t.following_error_warn)&&void 0!==r?r:0,s=l.y.getPixelForValue(a),c=l.y.getPixelForValue(i);o.fillStyle=k,o.fillRect(n.left,Math.min(s,c),n.right-n.left,Math.abs(s-c));const d=t?t.following_error_warn:0,u=t?t.following_error_alarm:0,f=l.y.getPixelForValue(d),h=l.y.getPixelForValue(u);o.fillStyle=F,o.fillRect(n.left,Math.min(f,h),n.right-n.left,Math.abs(f-h));const g=t?t.following_error_alarm:0,w=l.y.max,m=l.y.getPixelForValue(g),_=l.y.getPixelForValue(w);o.fillStyle=S,o.fillRect(n.left,Math.min(m,_),n.right-n.left,Math.abs(m-_)),o.restore()}},ve=(e,r)=>{var t;const o=`${Math.floor(r.getMinutes()/10)}0`;let n=(0,l.GP)(r,"yyyy-MM-dd HH:00:00");switch(H){case"hour":n=(0,l.GP)(r,"yyyy-MM-dd HH:00:00");break;case"minutes_10":n=(0,l.GP)(r,`yyyy-MM-dd HH:${o}:00`);break;case"all":n="all"}const a=null!==(t=e[n])&&void 0!==t?t:[];if(!a)return;const i=a.map(e=>(0,l.GP)(e.created_at,"HH:mm:ss")),s=a.map(e=>e.following_error),c=a[0];ue.current=c;const d=Math.min(...s),u=Math.max(...s),f=u-d||1,h=d-.2*f,g=u+.2*f;se({labels:i,datasets:[{label:"Following Error",data:s,borderColor:M,pointBackgroundColor:M,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:M,borderWidth:4,pointRadius:0}]}),de({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:h,max:g}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},pe=(e,r)=>{var t;return(0,v.jsx)("div",{children:(0,v.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(t=le[e])&&void 0!==t?t:"",placeholder:`${null!==r&&void 0!==r?r:e} ...`,onChange:r=>{ae(t=>{const o={...t};return o[e]=r.target.value,o})}})})},xe=(e,r)=>(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{L(e),V("ascending"===G?"descending":"ascending")},children:[(0,v.jsx)("div",{children:null!==r&&void 0!==r?r:e}),(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,v.jsx)(c.XhJ,{style:{color:B==e&&"descending"==G?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,v.jsx)(c.GOR,{style:{color:B==e&&"ascending"==G?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),be=async()=>{try{const e=await _.w.DashboardLevel4Realtime(Number(E));te(e),ne(e)}catch(e){j(new s.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{C(!1)}};(0,o.useEffect)(()=>{if(r){be();const e=setInterval(be,3e3);return()=>{clearInterval(e)}}},[A,r]),(0,o.useEffect)(()=>{(()=>{const e=oe.filter(e=>i.A.FilterTable(e,le)).sort((e,r)=>B?"ascending"==G?i.A.SortingTable(e,r,B):i.A.SortingTable(r,e,B):0);te(e)})()},[le,B,G]),(0,o.useEffect)(()=>{if(!r)return;if(!R)return;const e=fe(re),t=new Date;t.setMinutes(10*Math.floor(t.getMinutes()/10)),$(t),ve(e,t)},[R,r,re,H]),(0,o.useEffect)(()=>{if(!r)return;if(R)return;const e=fe(re);ve(e,N)},[R,r,re,N,H]),(0,o.useEffect)(()=>{r||ge(U.current,N)},[r,U.current,N]),(0,o.useEffect)(()=>{const e=fe(W);U.current=e;const r=Object.keys(e);if("all"!=H&&r.length>0){const e=new Date(r[r.length-1]);$(e)}else $(new Date)},[r,H]);const Ae=(0,o.useMemo)(()=>"all"==H?"All Data":"hour"==H?(0,l.Yq)(N,"dd MMM yyyy HH:00"):"minutes_10"==H?(0,l.Yq)(N,"dd MMM yyyy HH:mm"):void 0,[N,H]),je=(e,t)=>{D(!1);const o=new Date(N),n=10*Math.floor(o.getMinutes()/10);"hours"===t?o.setHours(o.getHours()+e,n,0,0):"minutes"===t&&o.setHours(o.getHours(),n+e,0,0),$(o),r||ge(U.current,o)},Ce=(e,r)=>{if(T(e),t(r),L(null),V("ascending"),ae({}),"chart"==e)if(r){const e=fe(re);ve(e,N)}else ge(U.current,N)},Ee=()=>{if(0==re.length)return j(new s.u({message:"NO DATA!",level:3}));let e=[];for(let o=0;o<re.length;o++){var r,t;e.push({created_at:(0,l.GP)("string"===typeof re[o].created_at?new Date(re[o].created_at):re[o].created_at,"yyyy-MM-dd HH:mm:ss"),following_error:`${re[o].following_error}`,following_error_warn:`${null!==(r=re[o].following_error_warn)&&void 0!==r?r:""}`,following_error_alarm:`${null!==(t=re[o].following_error_alarm)&&void 0!==t?t:""}`})}y.A.export("Following Error Data Realtime",["created_at","following_error","following_error_warn","following_error_alarm"],e)},Me=()=>{if(0==W.length)return j(new s.u({message:"NO DATA!",level:3}));let e=[];for(let o=0;o<re.length;o++){var r,t;e.push({created_at:(0,l.GP)("string"===typeof re[o].created_at?new Date(re[o].created_at):re[o].created_at,"yyyy-MM-dd HH:mm:ss"),following_error:`${re[o].following_error}`,following_error_warn:`${null!==(r=re[o].following_error_warn)&&void 0!==r?r:""}`,following_error_alarm:`${null!==(t=re[o].following_error_alarm)&&void 0!==t?t:""}`})}y.A.export("Following Error Data",["created_at","following_error","following_error_warn","following_error_alarm"],e)};return(0,o.useEffect)(()=>(x(r?()=>Ee:()=>Me),()=>{x(null)}),[r,re,W]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:n.A.cardBodyHeader,children:["chart"===P&&r&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:n.A.headerChart,children:[(0,v.jsx)("div",{}),(0,v.jsx)("div",{className:n.A.titleChart,children:Ae}),(0,v.jsxs)("div",{className:n.A.chartButtons,style:{justifyContent:"end"},children:[(0,v.jsx)("button",{onClick:()=>I("hour"),className:"hour"===H?n.A.activeBtn:"",children:"Hour"}),(0,v.jsx)("button",{onClick:()=>I("minutes_10"),className:"minutes_10"===H?n.A.activeBtn:"",children:"Minute"}),(0,v.jsx)("button",{onClick:()=>I("all"),className:"all"===H?n.A.activeBtn:"",children:"All"})]})]}),(0,v.jsxs)("div",{className:n.A.bodyChart,children:[(0,v.jsx)("button",{className:n.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==H?je(-1,"hours"):"minutes_10"==H&&je(-10,"minutes")},children:(0,v.jsx)(c.ed2,{})}),(0,v.jsx)("div",{className:n.A.wrapperChart,children:(0,v.jsx)(m.N1,{data:ie,options:ce,plugins:[ye]})}),(0,v.jsx)("button",{className:n.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==H?je(1,"hours"):"minutes_10"==H&&je(10,"minutes")},children:(0,v.jsx)(c.FDZ,{})})]})]}),"table"===P&&r&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,v.jsxs)("table",{className:"tableclickcell",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"No"}),(0,v.jsxs)("th",{children:[xe("created_at","Waktu"),pe("created_at","Waktu")]}),(0,v.jsxs)("th",{children:[xe("following_error","Following Error"),pe("following_error","Following Error")]}),(0,v.jsxs)("th",{children:[xe("following_error_warn","Following Error Warn"),pe("following_error_warn","Following Error Warn")]}),(0,v.jsxs)("th",{children:[xe("following_error_alarm","Following Error Alarm"),pe("following_error_alarm","Following Error Alarm")]})]})}),i.A.FastIsEmpty(re)?(0,v.jsx)("tbody",{children:(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,v.jsx)("tbody",{children:(0,v.jsx)(u.A,{tableData:re,rowFunction:_e,rowsCount:250,rowsIncrement:50})})]})})}),"chart"===P&&!r&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:n.A.headerChart,children:[(0,v.jsx)("div",{}),(0,v.jsx)("div",{className:n.A.titleChart,children:Ae}),(0,v.jsxs)("div",{className:n.A.chartButtons,style:{justifyContent:"end"},children:[(0,v.jsx)("button",{onClick:()=>I("hour"),className:"hour"===H?n.A.activeBtn:"",children:"Hour"}),(0,v.jsx)("button",{onClick:()=>I("minutes_10"),className:"minutes_10"===H?n.A.activeBtn:"",children:"Minute"}),(0,v.jsx)("button",{onClick:()=>I("all"),className:"all"===H?n.A.activeBtn:"",children:"All"})]})]}),(0,v.jsxs)("div",{className:n.A.bodyChart,children:[(0,v.jsx)("button",{className:n.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==H?je(-1,"hours"):"minutes_10"==H&&je(-10,"minutes")},children:(0,v.jsx)(c.ed2,{})}),(0,v.jsx)("div",{className:n.A.wrapperChart,children:(0,v.jsx)(m.N1,{data:q,options:K,plugins:[he]})}),(0,v.jsx)("button",{className:n.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==H?je(1,"hours"):"minutes_10"==H&&je(10,"minutes")},children:(0,v.jsx)(c.FDZ,{})})]})]}),"table"===P&&!r&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,v.jsxs)("table",{className:"tableclickcell",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"No"}),(0,v.jsxs)("th",{children:[me("created_at","Waktu"),we("created_at","Waktu")]}),(0,v.jsxs)("th",{children:[me("following_error","Following Error"),we("following_error","Following Error")]}),(0,v.jsxs)("th",{children:[me("following_error_warn","Following Error Warn"),we("following_error_warn","Following Error Warn")]}),(0,v.jsxs)("th",{children:[me("following_error_alarm","Following Error Alarm"),we("following_error_alarm","Following Error Alarm")]})]})}),i.A.FastIsEmpty(W)?(0,v.jsx)("tbody",{children:(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,v.jsx)("tbody",{children:(0,v.jsx)(u.A,{tableData:W,rowFunction:_e,rowsCount:250,rowsIncrement:50})})]})})})]}),(0,v.jsxs)("div",{className:n.A.cardBodyFooter,children:[(0,v.jsxs)("div",{className:n.A.footerLeft,children:[(0,v.jsxs)("button",{className:`${n.A.buttonFooter} ${"chart"===P&&r?n.A.active:""}`,onClick:()=>{Ce("chart",!0)},children:[(0,v.jsx)(f.kk8,{}),(0,v.jsx)("span",{className:n.A.tooltipText,children:"Realtime Chart"})]}),(0,v.jsxs)("button",{className:`${n.A.buttonFooter} ${"table"===P&&r?n.A.active:""}`,onClick:()=>{Ce("table",!0)},children:[(0,v.jsx)(h.ZIs,{}),(0,v.jsx)("span",{className:n.A.tooltipText,children:"Realtime Table"})]})]}),(0,v.jsx)("div",{className:n.A.footerMid,children:"chart"===P&&r&&(0,v.jsxs)("div",{className:n.A.switchGroup,children:[(0,v.jsx)("label",{htmlFor:"auto",children:"Auto"}),(0,v.jsxs)("label",{className:n.A.switch,children:[(0,v.jsx)("input",{type:"checkbox",id:"auto",checked:R,onChange:()=>{D(e=>!e)}}),(0,v.jsx)("span",{className:n.A.slider})]})]})}),(0,v.jsxs)("div",{className:n.A.footerRight,children:[(0,v.jsxs)("button",{className:`${n.A.buttonFooter} ${"chart"!==P||r?"":n.A.active}`,onClick:()=>{Ce("chart",!1)},children:[(0,v.jsx)(c.YYR,{}),(0,v.jsx)("span",{className:n.A.tooltipText,children:"Chart"})]}),(0,v.jsxs)("button",{className:`${n.A.buttonFooter} ${"table"!==P||r?"":n.A.active}`,onClick:()=>{Ce("table",!1)},children:[(0,v.jsx)(c.ist,{}),(0,v.jsx)("span",{className:n.A.tooltipText,children:"Table"})]})]})]})]})}},5764:(e,r,t)=>{t.d(r,{A:()=>n});class o{}o.FilterTable=(e,r)=>{let t=Object.keys(e);for(let o=0;o<t.length;o++){const n=t[o];if(r[n]){if(void 0==e||null==e[n])return!1;if(""!==r[n]&&0==e[n].toString().toLowerCase().includes(r[n].toString().toLowerCase()))return!1}}return!0},o.SortingTable=(e,r,t)=>{if(null!=t&&void 0!=t&&void 0!==e[t]&&void 0!==r[t]){if("string"===typeof e[t]&&"string"===typeof r[t])return e[t].localeCompare(r[t]);if("number"===typeof e[t]&&"number"===typeof r[t])return e[t]-r[t]}return 0},o.FastIsEmpty=e=>{for(const r in e)return!1;return!0};const n=o},6278:(e,r,t)=>{t.d(r,{A:()=>i});var o=t(5043),n=t(5843),l=t(579);function a(e){const{onVisible:r,content:t}=e,{ref:o}=(0,n.Wx)({threshold:.1,triggerOnce:!1,initialInView:!1,onChange:(e,t)=>{e&&r()}});return(0,l.jsx)("tr",{ref:o,children:t})}function i(e){const{tableData:r,rowFunction:t,onRowClick:n,rowsCount:i,rowsIncrement:s}=e,c=i,d=s,[u,f]=(0,o.useState)(c),h=(0,o.useMemo)(()=>{const e=[];for(let o=0;o<r.length;o++){if(o<u-c||o>u)continue;const i=r[o];e.push((0,l.jsxs)(l.Fragment,{children:[o==u?(0,l.jsx)(a,{content:(0,l.jsx)(l.Fragment,{}),onVisible:function(){f(e=>e+d),setTimeout(()=>{var e;null===(e=document.getElementById(`rows_${o}`))||void 0===e||e.scrollIntoView()})}}):(0,l.jsx)(l.Fragment,{}),o==u-c&&0!=o?(0,l.jsx)(a,{content:(0,l.jsx)(l.Fragment,{}),onVisible:function(){f(e=>e-d<c?c:e-d),setTimeout(()=>{var e;null===(e=document.getElementById(`rows_${o}`))||void 0===e||e.scrollIntoView()})}}):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)("tr",{id:`rows_${o}`,style:{whiteSpace:"nowrap"},onClick:()=>{null!=n&&n(i)},children:t(o,i)}),o==r.length-1?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:1e3,children:"END OF DATA"})}):(0,l.jsx)(l.Fragment,{})]}))}return e},[u,r]);return(0,o.useEffect)(()=>{f(c)},[r]),h.map(e=>e)}}}]);
//# sourceMappingURL=520.9a36c80b.chunk.js.map