"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[273],{2087:(t,a,e)=>{e.d(a,{A:()=>o});var r=e(1121),i=e(9223),l=e.n(i);const o=class{static export(t,a,e){const r=new(l().Workbook),i=r.addWorksheet(t),o=t=>t>=0&&t<=51?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"][t]:"Invalid number";a.map((t,a)=>{i.getColumn(`${o(a)}`).width=20,i.getCell(`${o(a)}1`).value=String(t.toUpperCase()),i.getCell(`${o(a)}1`).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"c8c8c8"}},font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}}),e.map((t,e)=>{const r=[];a.map(a=>{null!=t[a]?r.push(t[a]):r.push("")});i.addRow(r).eachCell(t=>{t.style={alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}})}),r.xlsx.writeBuffer().then(a=>{const e=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=`${t}.xlsx`,r.click(),window.URL.revokeObjectURL(r.href)})}static async import(t){const a=new(l().Workbook);await a.xlsx.load(t);const e=[];if(a.eachSheet(t=>{const a=[];t.eachRow(t=>{a.push(t.values)}),e.push(a)}),e.length>0){const t=e[0],a=[];for(let e=1;e<t.length;e++){const l={};for(let a=0;a<t[e].length;a++){var i;if(null!=t[0][a]&&"string"==typeof t[0][a])if(t[e][a]instanceof Date)l[t[0][a].toLowerCase()]=(0,r.GP)(t[e][a],"yyyy-MM-dd HH:mm:ss");else l[t[0][a].toLowerCase()]="object"==typeof t[e][a]?t[e][a].result:null!==(i=t[e][a])&&void 0!==i?i:""}a.push(l)}return a}return[]}}},5764:(t,a,e)=>{e.d(a,{A:()=>i});class r{}r.FilterTable=(t,a)=>{let e=Object.keys(t);for(let r=0;r<e.length;r++){const i=e[r];if(a[i]){if(void 0==t||null==t[i])return!1;if(""!==a[i]&&0==t[i].toString().toLowerCase().includes(a[i].toString().toLowerCase()))return!1}}return!0},r.SortingTable=(t,a,e)=>{if(null!=e&&void 0!=e&&void 0!==t[e]&&void 0!==a[e]){if("string"===typeof t[e]&&"string"===typeof a[e])return t[e].localeCompare(a[e]);if("number"===typeof t[e]&&"number"===typeof a[e])return t[e]-a[e]}return 0},r.FastIsEmpty=t=>{for(const a in t)return!1;return!0};const i=r},6278:(t,a,e)=>{e.d(a,{A:()=>n});var r=e(5043),i=e(5843),l=e(579);function o(t){const{onVisible:a,content:e}=t,{ref:r}=(0,i.Wx)({threshold:.1,triggerOnce:!1,initialInView:!1,onChange:(t,e)=>{t&&a()}});return(0,l.jsx)("tr",{ref:r,children:e})}function n(t){const{tableData:a,rowFunction:e,onRowClick:i,rowsCount:n,rowsIncrement:s}=t,u=n,c=s,[d,_]=(0,r.useState)(u),f=(0,r.useMemo)(()=>{const t=[];for(let r=0;r<a.length;r++){if(r<d-u||r>d)continue;const n=a[r];t.push((0,l.jsxs)(l.Fragment,{children:[r==d?(0,l.jsx)(o,{content:(0,l.jsx)(l.Fragment,{}),onVisible:function(){_(t=>t+c),setTimeout(()=>{var t;null===(t=document.getElementById(`rows_${r}`))||void 0===t||t.scrollIntoView()})}}):(0,l.jsx)(l.Fragment,{}),r==d-u&&0!=r?(0,l.jsx)(o,{content:(0,l.jsx)(l.Fragment,{}),onVisible:function(){_(t=>t-c<u?u:t-c),setTimeout(()=>{var t;null===(t=document.getElementById(`rows_${r}`))||void 0===t||t.scrollIntoView()})}}):(0,l.jsx)(l.Fragment,{}),(0,l.jsx)("tr",{id:`rows_${r}`,style:{whiteSpace:"nowrap"},onClick:()=>{null!=i&&i(n)},children:e(r,n)}),r==a.length-1?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:1e3,children:"END OF DATA"})}):(0,l.jsx)(l.Fragment,{})]}))}return t},[d,a]);return(0,r.useEffect)(()=>{_(u)},[a]),f.map(t=>t)}},6606:(t,a,e)=>{e.d(a,{G:()=>l,a:()=>o});var r=e(8443),i=e(2340);class l{static async GetAllQualityFactor(t){let a=`${r.C}/api/extension/quality_factor/v1`;null!=t&&(a+=`?link_up_id=${t}`);const e=await i.A.fetchAuth(a);if(200!==e.status)throw new Error(e.message);const l=Array.isArray(e.data)?e.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].quality_factor_id)throw new Error("invalid quality_factor_id value");if("number"!=typeof l[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof l[r].link_up)throw new Error("invalid link_up value");if("string"!=typeof l[r].parameter_name)throw new Error("invalid parameter_name value");if("string"!=typeof l[r].quality_factor_tipe)throw new Error("invalid quality_factor_tipe value");if(void 0!=l[r].quality_factor_warn&&"number"!=typeof l[r].quality_factor_warn)throw new Error("invalid quality_factor_warn value");if(void 0!=l[r].quality_factor_alarm&&"number"!=typeof l[r].quality_factor_alarm)throw new Error("invalid quality_factor_alarm value");if(void 0!=l[r].quality_factor_bottom_warn&&"number"!=typeof l[r].quality_factor_bottom_warn)throw new Error("invalid quality_factor_bottom_warn value");if(void 0!=l[r].quality_factor_bottom_alarm&&"number"!=typeof l[r].quality_factor_bottom_alarm)throw new Error("invalid quality_factor_bottom_alarm value");if("string"!=typeof l[r].quality_factor_display_type)throw new Error("invalid quality_factor_display_type value");if("string"!=typeof l[r].quality_factor_unit)throw new Error("invalid quality_factor_unit value")}return l}static async AddQualityFactor(t){const a=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1`,{method:"POST",body:JSON.stringify({...t}),headers:{"Content-Type":"application/json"}});if(200!==a.status)throw new Error(a.message);return a}static async UpdateQualityFactor(t,a){const e=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1`,{method:"PATCH",body:JSON.stringify({quality_factor_id:t,fields:a}),headers:{"Content-Type":"application/json"}});if(200!==e.status)throw new Error(e.message);return e}static async DeleteQualityFactor(t){const a=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1`,{method:"DELETE",body:JSON.stringify({quality_factor_id:t}),headers:{"Content-Type":"application/json"}});if(200!==a.status)throw new Error(a.message);return a}static async GetLinkUpConfig(t){let a=`${r.C}/api/extension/quality_factor/v1/linkup`;null!=t&&(a+=`?link_up_id=${t}`);const e=await i.A.fetchAuth(a);if(200!==e.status)throw new Error(e.message);if(!Array.isArray(e.data))throw new Error("invalid link up config response");for(let r=0;r<e.data.length;r++){var l,o;const t=e.data[r];if("number"!=typeof t.link_up_id)throw new Error("invalid link_up_id value");if("number"!=typeof(null!==(l=t.quality_factor_warn)&&void 0!==l?l:0))throw new Error("invalid quality_factor_warn value");if("number"!=typeof(null!==(o=t.quality_factor_alarm)&&void 0!==o?o:0))throw new Error("invalid quality_factor_alarm value")}return e.data}static async UpsertLinkupConfig(t,a){const e=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/linkup`,{method:"PATCH",body:JSON.stringify({link_up_id:t,fields:a}),headers:{"Content-Type":"application/json"}});if(200!==e.status)throw new Error(e.message);return e}static async GetBusinessUnitConfig(t){let a=`${r.C}/api/extension/quality_factor/v1/business`;null!=t&&(a+=`?business_unit_id=${t}`);const e=await i.A.fetchAuth(a);if(200!==e.status)throw new Error(e.message);if(!Array.isArray(e.data))throw new Error("invalid link up config response");for(let r=0;r<e.data.length;r++){var l,o;const t=e.data[r];if("number"!=typeof t.business_unit_id)throw new Error("invalid business_unit_id value");if("number"!=typeof(null!==(l=t.quality_factor_warn)&&void 0!==l?l:0))throw new Error("invalid quality_factor_warn value");if("number"!=typeof(null!==(o=t.quality_factor_alarm)&&void 0!==o?o:0))throw new Error("invalid quality_factor_alarm value")}return e.data}static async UpsertBusinessUnitConfig(t,a){const e=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/business`,{method:"PATCH",body:JSON.stringify({business_unit_id:t,fields:a}),headers:{"Content-Type":"application/json"}});if(200!==e.status)throw new Error(e.message);return e}}class o{static async DashboardLevel1(t,a){const e=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/l1?start_date=${t}&end_date=${a}`);if(200!==e.status)throw new Error(e.message);const l=Array.isArray(e.data)?e.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof l[r].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(l[r].quality_factor_id_ool))throw new Error("invalid quality_factor_id_ool value");if("number"!=typeof l[r].quality_factor_green)throw new Error("invalid quality_factor_green value");if("number"!=typeof l[r].quality_factor_yellow)throw new Error("invalid quality_factor_yellow value");if("number"!=typeof l[r].quality_factor_red)throw new Error("invalid quality_factor_red value");if(void 0!=l[r].quality_factor_warn&&"number"!=typeof l[r].quality_factor_warn)throw new Error("invalid quality_factor_warn value");if(void 0!=l[r].quality_factor_alarm&&"number"!=typeof l[r].quality_factor_alarm)throw new Error("invalid quality_factor_alarm value")}return l}static async DashboardLevel2(t,a,e){const l=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/l2?business_unit_id=${e}&start_date=${t}&end_date=${a}`);if(200!==l.status)throw new Error(l.message);const o=Array.isArray(l.data)?l.data:[];for(let r=0;r<o.length;r++){if("number"!=typeof o[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof o[r].link_up)throw new Error("invalid link_up value");if(!Array.isArray(o[r].quality_factor_id_ool))throw new Error("invalid quality_factor_id_ool value");if("number"!=typeof o[r].quality_factor_green)throw new Error("invalid quality_factor_green value");if("number"!=typeof o[r].quality_factor_yellow)throw new Error("invalid quality_factor_yellow value");if("number"!=typeof o[r].quality_factor_red)throw new Error("invalid quality_factor_red value");if(void 0!=o[r].quality_factor_warn&&"number"!=typeof o[r].quality_factor_warn)throw new Error("invalid quality_factor_warn value");if(void 0!=o[r].quality_factor_alarm&&"number"!=typeof o[r].quality_factor_alarm)throw new Error("invalid quality_factor_alarm value")}return o}static async DashboardLevel3(t,a,e){const l=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/l3?link_up_id=${e}&start_date=${t}&end_date=${a}`);if(200!==l.status)throw new Error(l.message);const o=Array.isArray(l.data)?l.data:[];for(let r=0;r<o.length;r++){if("number"!=typeof o[r].quality_factor_id)throw new Error("invalid dashboard quality_factor_id value");if("string"!=typeof o[r].parameter_name)throw new Error("invalid dashboard parameter_name value");if("string"!=typeof o[r].quality_factor_tipe)throw new Error("invalid dashboard quality_factor_tipe value");if("number"!=typeof o[r].quality_factor_green)throw new Error("invalid quality_factor_green value");if("number"!=typeof o[r].quality_factor_yellow)throw new Error("invalid quality_factor_yellow value");if("number"!=typeof o[r].quality_factor_red)throw new Error("invalid quality_factor_red value");if(!o[r].last_quality_factor_data)throw new Error("missing last_quality_factor_data");if("number"!==typeof o[r].last_quality_factor_data.quality_factor_id)throw new Error("invalid last_quality_factor_data.quality_factor_id");if("number"!==typeof o[r].last_quality_factor_data.value)throw new Error("invalid last_quality_factor_data.value");if(void 0!=o[r].last_quality_factor_data.warning_limit&&"number"!==typeof o[r].last_quality_factor_data.warning_limit)throw new Error("invalid last_quality_factor_data.warning_limit");if(void 0!=o[r].last_quality_factor_data.alarm_limit&&"number"!==typeof o[r].last_quality_factor_data.alarm_limit)throw new Error("invalid last_quality_factor_data.alarm_limit");if(void 0!=o[r].last_quality_factor_data.warning_limit_bottom&&"number"!==typeof o[r].last_quality_factor_data.warning_limit_bottom)throw new Error("invalid last_quality_factor_data.warning_limit_bottom");if(void 0!=o[r].last_quality_factor_data.alarm_limit_bottom&&"number"!==typeof o[r].last_quality_factor_data.alarm_limit_bottom)throw new Error("invalid last_quality_factor_data.alarm_limit_bottom");if("string"!==typeof o[r].last_quality_factor_data.created_at)throw new Error("invalid last_quality_factor_data.created_at")}return o}static async DashboardLevel4(t,a,e){const l=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/data?quality_factor_id=${e}&start_date=${t}&end_date=${a}`);if(200!==l.status)throw new Error(l.message);const o=Array.isArray(l.data)?l.data:[];for(let r=0;r<o.length;r++){if("number"!=typeof o[r].value)throw new Error("invalid value value");if(void 0!=o[r].warning_limit&&"number"!=typeof o[r].warning_limit)throw new Error("invalid warning_limit value");if(void 0!=o[r].alarm_limit&&"number"!=typeof o[r].alarm_limit)throw new Error("invalid alarm_limit value");if(void 0!=o[r].warning_limit_bottom&&"number"!=typeof o[r].warning_limit_bottom)throw new Error("invalid warning_limit_bottom value");if(void 0!=o[r].alarm_limit_bottom&&"number"!=typeof o[r].alarm_limit_bottom)throw new Error("invalid alarm_limit_bottom value");if("Invalid Date"==new Date(o[r].created_at).toString())throw new Error("invalid created_at value");o[r].created_at=new Date(o[r].created_at)}return o}static async DashboardLevel1Realtime(){const t=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/l1/realtime`);if(200!==t.status)throw new Error(t.message);const a=Array.isArray(t.data)?t.data:[];for(let e=0;e<a.length;e++){if("number"!=typeof a[e].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof a[e].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(a[e].quality_factor_id_ool))throw new Error("invalid quality_factor_id_ool value");if("number"!=typeof a[e].quality_factor_green)throw new Error("invalid quality_factor_green value");if("number"!=typeof a[e].quality_factor_yellow)throw new Error("invalid quality_factor_yellow value");if("number"!=typeof a[e].quality_factor_red)throw new Error("invalid quality_factor_red value");if(void 0!=a[e].quality_factor_warn&&"number"!=typeof a[e].quality_factor_warn)throw new Error("invalid quality_factor_warn value");if(void 0!=a[e].quality_factor_alarm&&"number"!=typeof a[e].quality_factor_alarm)throw new Error("invalid quality_factor_alarm value")}return a}static async DashboardLevel2Realtime(t){const a=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/l2/realtime?business_unit_id=${t}`);if(200!==a.status)throw new Error(a.message);const e=Array.isArray(a.data)?a.data:[];for(let r=0;r<e.length;r++){if("number"!=typeof e[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof e[r].link_up)throw new Error("invalid link_up value");if(!Array.isArray(e[r].quality_factor_id_ool))throw new Error("invalid quality_factor_id_ool value");if("number"!=typeof e[r].quality_factor_green)throw new Error("invalid quality_factor_green value");if("number"!=typeof e[r].quality_factor_yellow)throw new Error("invalid quality_factor_yellow value");if("number"!=typeof e[r].quality_factor_red)throw new Error("invalid quality_factor_red value");if(void 0!=e[r].quality_factor_warn&&"number"!=typeof e[r].quality_factor_warn)throw new Error("invalid quality_factor_warn value");if(void 0!=e[r].quality_factor_alarm&&"number"!=typeof e[r].quality_factor_alarm)throw new Error("invalid quality_factor_alarm value")}return e}static async DashboardLevel3Realtime(t){const a=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/l3/realtime?link_up_id=${t}`);if(200!==a.status)throw new Error(a.message);const e=Array.isArray(a.data)?a.data:[];for(let r=0;r<e.length;r++){if("number"!=typeof e[r].quality_factor_id)throw new Error("invalid dashboard quality_factor_id value");if("string"!=typeof e[r].parameter_name)throw new Error("invalid dashboard parameter_name value");if("string"!=typeof e[r].quality_factor_tipe)throw new Error("invalid dashboard quality_factor_tipe value");if("number"!=typeof e[r].quality_factor_green)throw new Error("invalid quality_factor_green value");if("number"!=typeof e[r].quality_factor_yellow)throw new Error("invalid quality_factor_yellow value");if("number"!=typeof e[r].quality_factor_red)throw new Error("invalid quality_factor_red value");if(!e[r].last_quality_factor_data)throw new Error("missing last_quality_factor_data");if("number"!==typeof e[r].last_quality_factor_data.quality_factor_id)throw new Error("invalid last_quality_factor_data.quality_factor_id");if("number"!==typeof e[r].last_quality_factor_data.value)throw new Error("invalid last_quality_factor_data.value");if(void 0!=e[r].last_quality_factor_data.warning_limit&&"number"!==typeof e[r].last_quality_factor_data.warning_limit)throw new Error("invalid last_quality_factor_data.warning_limit");if(void 0!=e[r].last_quality_factor_data.alarm_limit&&"number"!==typeof e[r].last_quality_factor_data.alarm_limit)throw new Error("invalid last_quality_factor_data.alarm_limit");if(void 0!=e[r].last_quality_factor_data.warning_limit_bottom&&"number"!==typeof e[r].last_quality_factor_data.warning_limit_bottom)throw new Error("invalid last_quality_factor_data.warning_limit_bottom");if(void 0!=e[r].last_quality_factor_data.alarm_limit_bottom&&"number"!==typeof e[r].last_quality_factor_data.alarm_limit_bottom)throw new Error("invalid last_quality_factor_data.alarm_limit_bottom");if("string"!==typeof e[r].last_quality_factor_data.created_at)throw new Error("invalid last_quality_factor_data.created_at")}return e}static async DashboardLevel4Realtime(t){const a=await i.A.fetchAuth(`${r.C}/api/extension/quality_factor/v1/data/realtime?quality_factor_id=${t}`);if(200!==a.status)throw new Error(a.message);const e=Array.isArray(a.data)?a.data:[];for(let r=0;r<e.length;r++){if("number"!=typeof e[r].value)throw new Error("invalid value value");if(void 0!=e[r].warning_limit&&"number"!=typeof e[r].warning_limit)throw new Error("invalid warning_limit value");if(void 0!=e[r].alarm_limit&&"number"!=typeof e[r].alarm_limit)throw new Error("invalid alarm_limit value");if(void 0!=e[r].warning_limit_bottom&&"number"!=typeof e[r].warning_limit_bottom)throw new Error("invalid warning_limit_bottom value");if(void 0!=e[r].alarm_limit_bottom&&"number"!=typeof e[r].alarm_limit_bottom)throw new Error("invalid alarm_limit_bottom value");if("Invalid Date"==new Date(e[r].created_at).toString())throw new Error("invalid created_at value");e[r].created_at=new Date(e[r].created_at)}return e}}},7273:(t,a,e)=>{e.r(a),e.d(a,{default:()=>p});var r=e(5043),i=e(8270),l=e(1121),o=e(2573),n=e(5764),s=e(414),u=e(184),c=e(3216),d=e(6278),_=e(2620),f=e(397),m=e(6361),y=e(2926),h=e(6058),w=e(6606),v=e(2087),b=e(579);m.t1.register(m.No,m.FN,m.kc,m.hE,m.PP,m.m_,m.s$),y.d.maintainAspectRatio=!1,y.d.responsive=!0;const p=t=>{let{realtime:a,setRealtime:e,refresh:m,start_date:y,end_date:p,setHandleGenerateExcel:g}=t;const x=(0,r.useContext)(o.A),A=x.contextAccessToken,q=x.contextShowAlertFunc,j=x.contextShowLoadingFunc,{machineId:E}=(x.stateShowLoading,(0,c.g)()),C="#fb8500",k="rgba(41, 191, 18, 0.21)",M="rgba(213, 14, 81, 0.2)",[S,$]=(0,r.useState)(new Date),[F,N]=(0,r.useState)(!0),[D,R]=(0,r.useState)("minutes_10"),[H,L]=(0,r.useState)("chart"),[I,P]=(0,r.useState)(null),[B,T]=(0,r.useState)("ascending"),[G,W]=(0,r.useState)([]),[O,V]=(0,r.useState)([]),U=(0,r.useRef)({}),[z,Q]=(0,r.useState)({}),[Y,J]=(0,r.useState)({labels:[],datasets:[]}),[Z,X]=(0,r.useState)({}),K=(0,r.useRef)(null),[tt,at]=(0,r.useState)([]),[et,rt]=(0,r.useState)([]),[it,lt]=(0,r.useState)({}),[ot,nt]=(0,r.useState)({labels:[],datasets:[]}),[st,ut]=(0,r.useState)({}),ct=(0,r.useRef)(null);function dt(t){const a={};return"all"==D?{all:[...t].toReversed()}:(t.toReversed().forEach(t=>{const e=new Date(t.created_at),r=new Date(e);r.setMinutes(10*Math.floor(e.getMinutes()/10)),r.setSeconds(0),r.setMilliseconds(0);let i=(0,l.GP)(r,"yyyy-MM-dd HH:00:00");switch(D){case"hour":i=(0,l.GP)(r,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,l.GP)(r,"yyyy-MM-dd HH:mm:00")}void 0==a[i]?a[i]=[]:a[i].push(t)}),a)}const _t={id:"statusArea",beforeDatasetsDraw(t){var a,e,r,i;const l=K.current,{ctx:o,chartArea:n,scales:s}=t;if(!n||!s.x||!s.y||null==(null===l||void 0===l?void 0:l.warning_limit)||null==(null===l||void 0===l?void 0:l.alarm_limit)||null==(null===l||void 0===l?void 0:l.warning_limit_bottom)||null==(null===l||void 0===l?void 0:l.alarm_limit_bottom))return;o.save();const u=s.y.min,c=null!==(a=l.alarm_limit_bottom)&&void 0!==a?a:0,d=s.y.getPixelForValue(u),_=s.y.getPixelForValue(c);o.fillStyle=M,o.fillRect(n.left,Math.min(d,_),n.right-n.left,Math.abs(d-_));const f=null!==(e=l.alarm_limit_bottom)&&void 0!==e?e:0,m=null!==(r=l.alarm_limit)&&void 0!==r?r:0,y=s.y.getPixelForValue(f),h=s.y.getPixelForValue(m);o.fillStyle=k,o.fillRect(n.left,Math.min(y,h),n.right-n.left,Math.abs(y-h));const w=null!==(i=l.alarm_limit)&&void 0!==i?i:0,v=s.y.max,b=s.y.getPixelForValue(w),p=s.y.getPixelForValue(v);o.fillStyle=M,o.fillRect(n.left,Math.min(b,p),n.right-n.left,Math.abs(b-p)),o.restore()}},ft=(t,a)=>{var e;const r=`${Math.floor(a.getMinutes()/10)}0`;let i=(0,l.GP)(a,"yyyy-MM-dd HH:00:00");switch(D){case"hour":i=(0,l.GP)(a,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,l.GP)(a,`yyyy-MM-dd HH:${r}:00`);break;case"all":i="all"}const o=null!==(e=t[i])&&void 0!==e?e:[];if(!o)return;const n=o.map(t=>(0,l.GP)(t.created_at,"HH:mm:ss")),s=o.map(t=>t.value),u=o.toReversed();K.current=u[0];const c=Math.min(...s),d=Math.max(...s),_=d-c||1,f=c-.2*_,m=d+.2*_;J({labels:n,datasets:[{label:"QualityFactor",data:s,borderColor:C,pointBackgroundColor:C,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:C,borderWidth:4,pointRadius:0}]}),X({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:f,max:m}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},mt=(t,a)=>{var e;return(0,b.jsx)("div",{children:(0,b.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(e=z[t])&&void 0!==e?e:"",placeholder:`${null!==a&&void 0!==a?a:t} ...`,onChange:a=>{Q(e=>{const r={...e};return r[t]=a.target.value,r})}})})},yt=(t,a)=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{P(t),T("ascending"===B?"descending":"ascending")},children:[(0,b.jsx)("div",{children:null!==a&&void 0!==a?a:t}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,b.jsx)(u.XhJ,{style:{color:I==t&&"descending"==B?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,b.jsx)(u.GOR,{style:{color:I==t&&"ascending"==B?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),ht=(t,a)=>{let e="black",r="400";const{value:i,warning_limit:o,warning_limit_bottom:n,alarm_limit:s,alarm_limit_bottom:u}=a;return void 0!==s&&void 0!==u&&i<s&&i>u&&(e="green",r="bold"),void 0!==s&&void 0!==u&&(i>=s||i<=u)&&(e="red",r="bold"),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{children:t+1}),(0,b.jsx)("td",{children:(0,l.GP)(a.created_at,"yyyy-MM-dd HH:mm:ss")}),(0,b.jsx)("td",{style:{color:e,fontWeight:r},children:i}),(0,b.jsx)("td",{children:o}),(0,b.jsx)("td",{children:s}),(0,b.jsx)("td",{children:n}),(0,b.jsx)("td",{children:u})]})};(0,r.useEffect)(()=>{(()=>{const t=O.filter(t=>n.A.FilterTable(t,z)).sort((t,a)=>I?"ascending"==B?n.A.SortingTable(t,a,I):n.A.SortingTable(a,t,I):0);W(t)})()},[z,I,B]),(0,r.useEffect)(()=>{(async t=>{t&&j(!0);try{const t=await w.a.DashboardLevel4((0,l.Yq)(y,"yyyy-MM-dd"),(0,l.Yq)(p,"yyyy-MM-dd"),Number(E));W(t),V(t);const a=dt(t);U.current=a;const e=Object.keys(a);if(e.length>0){const t=new Date(e[e.length-1]);$(t),ft(U.current,t)}else ft(U.current,S)}catch(a){q(new s.u({message:a instanceof Error?a.message:a.toString(),level:3}))}finally{j(!1)}})(0!=m)},[m]);const wt={id:"statusAreaRealtime",beforeDatasetsDraw(t){var a,e,r,i;const l=ct.current,{ctx:o,chartArea:n,scales:s}=t;if(!n||!s.x||!s.y)return;if(!n||!s.x||!s.y||null==(null===l||void 0===l?void 0:l.warning_limit)||null==(null===l||void 0===l?void 0:l.alarm_limit)||null==(null===l||void 0===l?void 0:l.warning_limit_bottom)||null==(null===l||void 0===l?void 0:l.alarm_limit_bottom))return;o.save();const u=s.y.min,c=null!==(a=l.alarm_limit_bottom)&&void 0!==a?a:0,d=s.y.getPixelForValue(u),_=s.y.getPixelForValue(c);o.fillStyle=M,o.fillRect(n.left,Math.min(d,_),n.right-n.left,Math.abs(d-_));const f=null!==(e=l.alarm_limit_bottom)&&void 0!==e?e:0,m=null!==(r=l.alarm_limit)&&void 0!==r?r:0,y=s.y.getPixelForValue(f),h=s.y.getPixelForValue(m);o.fillStyle=k,o.fillRect(n.left,Math.min(y,h),n.right-n.left,Math.abs(y-h));const w=null!==(i=l.alarm_limit)&&void 0!==i?i:0,v=s.y.max,b=s.y.getPixelForValue(w),p=s.y.getPixelForValue(v);o.fillStyle=M,o.fillRect(n.left,Math.min(b,p),n.right-n.left,Math.abs(b-p)),o.restore()}},vt=(t,a)=>{var e;const r=`${Math.floor(a.getMinutes()/10)}0`;let i=(0,l.GP)(a,"yyyy-MM-dd HH:00:00");switch(D){case"hour":i=(0,l.GP)(a,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,l.GP)(a,`yyyy-MM-dd HH:${r}:00`);break;case"all":i="all"}const o=null!==(e=t[i])&&void 0!==e?e:[];if(!o)return;const n=o.map(t=>(0,l.GP)(t.created_at,"HH:mm:ss")),s=o.map(t=>t.value),u=o[0];ct.current=u;const c=Math.min(...s),d=Math.max(...s),_=d-c||1,f=c-.2*_,m=d+.2*_;nt({labels:n,datasets:[{label:"QualityFactor",data:s,borderColor:C,pointBackgroundColor:C,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:C,borderWidth:4,pointRadius:0}]}),ut({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:f,max:m}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},bt=(t,a)=>{var e;return(0,b.jsx)("div",{children:(0,b.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(e=it[t])&&void 0!==e?e:"",placeholder:`${null!==a&&void 0!==a?a:t} ...`,onChange:a=>{lt(e=>{const r={...e};return r[t]=a.target.value,r})}})})},pt=(t,a)=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{P(t),T("ascending"===B?"descending":"ascending")},children:[(0,b.jsx)("div",{children:null!==a&&void 0!==a?a:t}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,b.jsx)(u.XhJ,{style:{color:I==t&&"descending"==B?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,b.jsx)(u.GOR,{style:{color:I==t&&"ascending"==B?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),gt=async()=>{try{const t=await w.a.DashboardLevel4Realtime(Number(E));at(t),rt(t)}catch(t){q(new s.u({message:t instanceof Error?t.message:t.toString(),level:3}))}finally{j(!1)}};(0,r.useEffect)(()=>{if(a){gt();const t=setInterval(gt,3e3);return()=>{clearInterval(t)}}},[A,a]),(0,r.useEffect)(()=>{(()=>{const t=et.filter(t=>n.A.FilterTable(t,it)).sort((t,a)=>I?"ascending"==B?n.A.SortingTable(t,a,I):n.A.SortingTable(a,t,I):0);at(t)})()},[it,I,B]),(0,r.useEffect)(()=>{if(!a)return;if(!F)return;const t=dt(tt),e=new Date;e.setMinutes(10*Math.floor(e.getMinutes()/10)),$(e),vt(t,e)},[F,a,tt,D]),(0,r.useEffect)(()=>{if(!a)return;if(F)return;const t=dt(tt);vt(t,S)},[F,a,tt,S,D]),(0,r.useEffect)(()=>{a||ft(U.current,S)},[a,U.current,S]),(0,r.useEffect)(()=>{const t=dt(G);U.current=t;const a=Object.keys(t);if("all"!=D&&a.length>0){const t=new Date(a[a.length-1]);$(t)}else $(new Date)},[a,D]);const xt=(0,r.useMemo)(()=>"all"==D?"All Data":"hour"==D?(0,l.Yq)(S,"dd MMM yyyy HH:00"):"minutes_10"==D?(0,l.Yq)(S,"dd MMM yyyy HH:mm"):void 0,[S,D]),At=(t,e)=>{N(!1);const r=new Date(S),i=10*Math.floor(r.getMinutes()/10);"hours"===e?r.setHours(r.getHours()+t,i,0,0):"minutes"===e&&r.setHours(r.getHours(),i+t,0,0),$(r),a||ft(U.current,r)},qt=(t,a)=>{if(L(t),e(a),P(null),T("ascending"),lt({}),"chart"==t)if(a){const t=dt(tt);vt(t,S)}else ft(U.current,S)},jt=()=>{if(0==tt.length)return q(new s.u({message:"NO DATA!",level:3}));let t=[];for(let o=0;o<tt.length;o++){var a,e,r,i;t.push({created_at:(0,l.GP)("string"===typeof tt[o].created_at?new Date(tt[o].created_at):tt[o].created_at,"yyyy-MM-dd HH:mm:ss"),value:`${tt[o].value}`,warning_limit:`${null!==(a=tt[o].warning_limit)&&void 0!==a?a:""}`,alarm_limit:`${null!==(e=tt[o].alarm_limit)&&void 0!==e?e:""}`,warning_limit_bottom:`${null!==(r=tt[o].warning_limit_bottom)&&void 0!==r?r:""}`,alarm_limit_bottom:`${null!==(i=tt[o].alarm_limit_bottom)&&void 0!==i?i:""}`})}v.A.export("QualityFactor Data Realtime",["created_at","value","warning_limit","alarm_limit","warning_limit_bottom","alarm_limit_bottom"],t)},Et=()=>{if(0==G.length)return q(new s.u({message:"NO DATA!",level:3}));let t=[];for(let o=0;o<tt.length;o++){var a,e,r,i;t.push({created_at:(0,l.GP)("string"===typeof tt[o].created_at?new Date(tt[o].created_at):tt[o].created_at,"yyyy-MM-dd HH:mm:ss"),value:`${tt[o].value}`,warning_limit:`${null!==(a=tt[o].warning_limit)&&void 0!==a?a:""}`,alarm_limit:`${null!==(e=tt[o].alarm_limit)&&void 0!==e?e:""}`,warning_limit_bottom:`${null!==(r=tt[o].warning_limit_bottom)&&void 0!==r?r:""}`,alarm_limit_bottom:`${null!==(i=tt[o].alarm_limit_bottom)&&void 0!==i?i:""}`})}v.A.export("QualityFactor Data",["created_at","value","warning_limit","alarm_limit","warning_limit_bottom","alarm_limit_bottom"],t)};return(0,r.useEffect)(()=>(g(a?()=>jt:()=>Et),()=>{g(null)}),[a,tt,G]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.cardBodyHeader,children:["chart"===H&&a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.headerChart,children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{className:i.A.titleChart,children:xt}),(0,b.jsxs)("div",{className:i.A.chartButtons,style:{justifyContent:"end"},children:[(0,b.jsx)("button",{onClick:()=>R("hour"),className:"hour"===D?i.A.activeBtn:"",children:"Hour"}),(0,b.jsx)("button",{onClick:()=>R("minutes_10"),className:"minutes_10"===D?i.A.activeBtn:"",children:"Minute"}),(0,b.jsx)("button",{onClick:()=>R("all"),className:"all"===D?i.A.activeBtn:"",children:"All"})]})]}),(0,b.jsxs)("div",{className:i.A.bodyChart,children:[(0,b.jsx)("button",{className:i.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==D?At(-1,"hours"):"minutes_10"==D&&At(-10,"minutes")},children:(0,b.jsx)(u.ed2,{})}),(0,b.jsx)("div",{className:i.A.wrapperChart,children:(0,b.jsx)(h.N1,{data:ot,options:st,plugins:[wt]})}),(0,b.jsx)("button",{className:i.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==D?At(1,"hours"):"minutes_10"==D&&At(10,"minutes")},children:(0,b.jsx)(u.FDZ,{})})]})]}),"table"===H&&a&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,b.jsxs)("table",{className:"tableclickcell",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"No"}),(0,b.jsxs)("th",{children:[pt("created_at","Waktu"),bt("created_at","Waktu")]}),(0,b.jsxs)("th",{children:[pt("value","QualityFactor"),bt("value","QualityFactor")]}),(0,b.jsxs)("th",{children:[pt("warning_limit","Warning Limit"),bt("warning_limit","Warning Limit")]}),(0,b.jsxs)("th",{children:[pt("alarm_limit","Alarm Limit"),bt("alarm_limit","Alarm Limit")]}),(0,b.jsxs)("th",{children:[pt("warning_limit_bottom","Warning Limit Bottom"),bt("warning_limit_bottom","Warning Limit Bottom")]}),(0,b.jsxs)("th",{children:[pt("alarm_limit_bottom","Alarm Limit Bottom"),bt("alarm_limit_bottom","Alarm Limit Bottom")]})]})}),n.A.FastIsEmpty(tt)?(0,b.jsx)("tbody",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,b.jsx)("tbody",{children:(0,b.jsx)(d.A,{tableData:tt,rowFunction:ht,rowsCount:250,rowsIncrement:50})})]})})}),"chart"===H&&!a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.headerChart,children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{className:i.A.titleChart,children:xt}),(0,b.jsxs)("div",{className:i.A.chartButtons,style:{justifyContent:"end"},children:[(0,b.jsx)("button",{onClick:()=>R("hour"),className:"hour"===D?i.A.activeBtn:"",children:"Hour"}),(0,b.jsx)("button",{onClick:()=>R("minutes_10"),className:"minutes_10"===D?i.A.activeBtn:"",children:"Minute"}),(0,b.jsx)("button",{onClick:()=>R("all"),className:"all"===D?i.A.activeBtn:"",children:"All"})]})]}),(0,b.jsxs)("div",{className:i.A.bodyChart,children:[(0,b.jsx)("button",{className:i.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==D?At(-1,"hours"):"minutes_10"==D&&At(-10,"minutes")},children:(0,b.jsx)(u.ed2,{})}),(0,b.jsx)("div",{className:i.A.wrapperChart,children:(0,b.jsx)(h.N1,{data:Y,options:Z,plugins:[_t]})}),(0,b.jsx)("button",{className:i.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==D?At(1,"hours"):"minutes_10"==D&&At(10,"minutes")},children:(0,b.jsx)(u.FDZ,{})})]})]}),"table"===H&&!a&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,b.jsxs)("table",{className:"tableclickcell",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"No"}),(0,b.jsxs)("th",{children:[yt("created_at","Waktu"),mt("created_at","Waktu")]}),(0,b.jsxs)("th",{children:[yt("value","QualityFactor"),mt("value","QualityFactor")]}),(0,b.jsxs)("th",{children:[yt("warning_limit","Warning Limit"),mt("warning_limit","Warning Limit")]}),(0,b.jsxs)("th",{children:[yt("alarm_limit","Alarm Limit"),mt("alarm_limit","Alarm Limit")]}),(0,b.jsxs)("th",{children:[yt("warning_limit_bottom","Warning Limit Bottom"),mt("warning_limit_bottom","Warning Limit Bottom")]}),(0,b.jsxs)("th",{children:[yt("alarm_limit_bottom","Alarm Limit Bottom"),mt("alarm_limit_bottom","Alarm Limit Bottom")]})]})}),n.A.FastIsEmpty(G)?(0,b.jsx)("tbody",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,b.jsx)("tbody",{children:(0,b.jsx)(d.A,{tableData:G,rowFunction:ht,rowsCount:250,rowsIncrement:50})})]})})})]}),(0,b.jsxs)("div",{className:i.A.cardBodyFooter,children:[(0,b.jsxs)("div",{className:i.A.footerLeft,children:[(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"chart"===H&&a?i.A.active:""}`,onClick:()=>{qt("chart",!0)},children:[(0,b.jsx)(_.kk8,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Realtime Chart"})]}),(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"table"===H&&a?i.A.active:""}`,onClick:()=>{qt("table",!0)},children:[(0,b.jsx)(f.ZIs,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Realtime Table"})]})]}),(0,b.jsx)("div",{className:i.A.footerMid,children:"chart"===H&&a&&(0,b.jsxs)("div",{className:i.A.switchGroup,children:[(0,b.jsx)("label",{htmlFor:"auto",children:"Auto"}),(0,b.jsxs)("label",{className:i.A.switch,children:[(0,b.jsx)("input",{type:"checkbox",id:"auto",checked:F,onChange:()=>{N(t=>!t)}}),(0,b.jsx)("span",{className:i.A.slider})]})]})}),(0,b.jsxs)("div",{className:i.A.footerRight,children:[(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"chart"!==H||a?"":i.A.active}`,onClick:()=>{qt("chart",!1)},children:[(0,b.jsx)(u.YYR,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Chart"})]}),(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"table"!==H||a?"":i.A.active}`,onClick:()=>{qt("table",!1)},children:[(0,b.jsx)(u.ist,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Table"})]})]})]})]})}}}]);
//# sourceMappingURL=273.564bb9e5.chunk.js.map