"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[118],{2087:(t,e,a)=>{a.d(e,{A:()=>l});var r=a(1121),i=a(9223),n=a.n(i);const l=class{static export(t,e,a){const r=new(n().Workbook),i=r.addWorksheet(t),l=t=>t>=0&&t<=51?["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"][t]:"Invalid number";e.map((t,e)=>{i.getColumn(`${l(e)}`).width=20,i.getCell(`${l(e)}1`).value=String(t.toUpperCase()),i.getCell(`${l(e)}1`).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"c8c8c8"}},font:{bold:!0},alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}}),a.map((t,a)=>{const r=[];e.map(e=>{null!=t[e]?r.push(t[e]):r.push("")});i.addRow(r).eachCell(t=>{t.style={alignment:{vertical:"middle",horizontal:"center"},border:{top:{style:"thin",color:{argb:"000000"}},left:{style:"thin",color:{argb:"000000"}},right:{style:"thin",color:{argb:"000000"}},bottom:{style:"thin",color:{argb:"000000"}}}}})}),r.xlsx.writeBuffer().then(e=>{const a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=`${t}.xlsx`,r.click(),window.URL.revokeObjectURL(r.href)})}static async import(t){const e=new(n().Workbook);await e.xlsx.load(t);const a=[];if(e.eachSheet(t=>{const e=[];t.eachRow(t=>{e.push(t.values)}),a.push(e)}),a.length>0){const t=a[0],e=[];for(let a=1;a<t.length;a++){const n={};for(let e=0;e<t[a].length;e++){var i;if(null!=t[0][e]&&"string"==typeof t[0][e])if(t[a][e]instanceof Date)n[t[0][e].toLowerCase()]=(0,r.GP)(t[a][e],"yyyy-MM-dd HH:mm:ss");else n[t[0][e].toLowerCase()]="object"==typeof t[a][e]?t[a][e].result:null!==(i=t[a][e])&&void 0!==i?i:""}e.push(n)}return e}return[]}}},5118:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var r=a(5043),i=a(8270),n=a(1121),l=a(2573),o=a(5764),s=a(414),d=a(184),f=a(3216),u=a(6278),m=a(2620),c=a(397),y=a(6361),_=a(2926),h=a(6058),w=a(9533),v=a(2087),b=a(579);y.t1.register(y.No,y.FN,y.kc,y.hE,y.PP,y.m_,y.s$),_.d.maintainAspectRatio=!1,_.d.responsive=!0;const p=t=>{let{realtime:e,setRealtime:a,refresh:y,start_date:_,end_date:p,setHandleGenerateExcel:g}=t;const x=(0,r.useContext)(l.A),A=x.contextAccessToken,j=x.contextShowAlertFunc,E=x.contextShowLoadingFunc,{machineId:C}=(x.stateShowLoading,(0,f.g)()),k="#fb8500",S="rgba(41, 191, 18, 0.21)",M="rgba(213, 14, 81, 0.2)",[$,N]=(0,r.useState)(new Date),[D,R]=(0,r.useState)(!0),[F,H]=(0,r.useState)("minutes_10"),[L,I]=(0,r.useState)("chart"),[P,B]=(0,r.useState)(null),[T,G]=(0,r.useState)("ascending"),[W,O]=(0,r.useState)([]),[V,U]=(0,r.useState)([]),z=(0,r.useRef)({}),[Y,J]=(0,r.useState)({}),[Z,q]=(0,r.useState)({labels:[],datasets:[]}),[X,K]=(0,r.useState)({}),Q=(0,r.useRef)(null),[tt,et]=(0,r.useState)([]),[at,rt]=(0,r.useState)([]),[it,nt]=(0,r.useState)({}),[lt,ot]=(0,r.useState)({labels:[],datasets:[]}),[st,dt]=(0,r.useState)({}),ft=(0,r.useRef)(null);function ut(t){const e={};return"all"==F?{all:[...t].toReversed()}:(t.toReversed().forEach(t=>{const a=new Date(t.created_at),r=new Date(a);r.setMinutes(10*Math.floor(a.getMinutes()/10)),r.setSeconds(0),r.setMilliseconds(0);let i=(0,n.GP)(r,"yyyy-MM-dd HH:00:00");switch(F){case"hour":i=(0,n.GP)(r,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,n.GP)(r,"yyyy-MM-dd HH:mm:00")}void 0==e[i]?e[i]=[]:e[i].push(t)}),e)}const mt={id:"statusArea",beforeDatasetsDraw(t){var e,a,r,i;const n=Q.current,{ctx:l,chartArea:o,scales:s}=t;if(!o||!s.x||!s.y||null==(null===n||void 0===n?void 0:n.warning_limit)||null==(null===n||void 0===n?void 0:n.alarm_limit)||null==(null===n||void 0===n?void 0:n.warning_limit_bottom)||null==(null===n||void 0===n?void 0:n.alarm_limit_bottom))return;l.save();const d=s.y.min,f=null!==(e=n.alarm_limit_bottom)&&void 0!==e?e:0,u=s.y.getPixelForValue(d),m=s.y.getPixelForValue(f);l.fillStyle=M,l.fillRect(o.left,Math.min(u,m),o.right-o.left,Math.abs(u-m));const c=null!==(a=n.alarm_limit_bottom)&&void 0!==a?a:0,y=null!==(r=n.alarm_limit)&&void 0!==r?r:0,_=s.y.getPixelForValue(c),h=s.y.getPixelForValue(y);l.fillStyle=S,l.fillRect(o.left,Math.min(_,h),o.right-o.left,Math.abs(_-h));const w=null!==(i=n.alarm_limit)&&void 0!==i?i:0,v=s.y.max,b=s.y.getPixelForValue(w),p=s.y.getPixelForValue(v);l.fillStyle=M,l.fillRect(o.left,Math.min(b,p),o.right-o.left,Math.abs(b-p)),l.restore()}},ct=(t,e)=>{var a;const r=`${Math.floor(e.getMinutes()/10)}0`;let i=(0,n.GP)(e,"yyyy-MM-dd HH:00:00");switch(F){case"hour":i=(0,n.GP)(e,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,n.GP)(e,`yyyy-MM-dd HH:${r}:00`);break;case"all":i="all"}const l=null!==(a=t[i])&&void 0!==a?a:[];if(!l)return;const o=l.map(t=>(0,n.GP)(t.created_at,"HH:mm:ss")),s=l.map(t=>t.value),d=l.toReversed();Q.current=d[0];const f=Math.min(...s),u=Math.max(...s),m=u-f||1,c=f-.2*m,y=u+.2*m;q({labels:o,datasets:[{label:"Safety",data:s,borderColor:k,pointBackgroundColor:k,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:k,borderWidth:4,pointRadius:0}]}),K({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:c,max:y}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},yt=(t,e)=>{var a;return(0,b.jsx)("div",{children:(0,b.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(a=Y[t])&&void 0!==a?a:"",placeholder:`${null!==e&&void 0!==e?e:t} ...`,onChange:e=>{J(a=>{const r={...a};return r[t]=e.target.value,r})}})})},_t=(t,e)=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{B(t),G("ascending"===T?"descending":"ascending")},children:[(0,b.jsx)("div",{children:null!==e&&void 0!==e?e:t}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,b.jsx)(d.XhJ,{style:{color:P==t&&"descending"==T?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,b.jsx)(d.GOR,{style:{color:P==t&&"ascending"==T?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),ht=(t,e)=>{let a="black",r="400";const{value:i,warning_limit:l,warning_limit_bottom:o,alarm_limit:s,alarm_limit_bottom:d}=e;return void 0!==s&&void 0!==d&&i<s&&i>d&&(a="green",r="bold"),void 0!==s&&void 0!==d&&(i>=s||i<=d)&&(a="red",r="bold"),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{children:t+1}),(0,b.jsx)("td",{children:(0,n.GP)(e.created_at,"yyyy-MM-dd HH:mm:ss")}),(0,b.jsx)("td",{style:{color:a,fontWeight:r},children:i}),(0,b.jsx)("td",{children:l}),(0,b.jsx)("td",{children:s}),(0,b.jsx)("td",{children:o}),(0,b.jsx)("td",{children:d})]})};(0,r.useEffect)(()=>{(()=>{const t=V.filter(t=>o.A.FilterTable(t,Y)).sort((t,e)=>P?"ascending"==T?o.A.SortingTable(t,e,P):o.A.SortingTable(e,t,P):0);O(t)})()},[Y,P,T]),(0,r.useEffect)(()=>{(async t=>{t&&E(!0);try{const t=await w._.DashboardLevel4((0,n.Yq)(_,"yyyy-MM-dd"),(0,n.Yq)(p,"yyyy-MM-dd"),Number(C));O(t),U(t);const e=ut(t);z.current=e;const a=Object.keys(e);if(a.length>0&&"all"!=F){const t=new Date(a[a.length-1]);N(t),ct(z.current,t)}else ct(z.current,$)}catch(e){j(new s.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{E(!1)}})(0!=y)},[y]);const wt={id:"statusAreaRealtime",beforeDatasetsDraw(t){var e,a,r,i;const n=ft.current,{ctx:l,chartArea:o,scales:s}=t;if(!o||!s.x||!s.y)return;if(!o||!s.x||!s.y||null==(null===n||void 0===n?void 0:n.warning_limit)||null==(null===n||void 0===n?void 0:n.alarm_limit)||null==(null===n||void 0===n?void 0:n.warning_limit_bottom)||null==(null===n||void 0===n?void 0:n.alarm_limit_bottom))return;l.save();const d=s.y.min,f=null!==(e=n.alarm_limit_bottom)&&void 0!==e?e:0,u=s.y.getPixelForValue(d),m=s.y.getPixelForValue(f);l.fillStyle=M,l.fillRect(o.left,Math.min(u,m),o.right-o.left,Math.abs(u-m));const c=null!==(a=n.alarm_limit_bottom)&&void 0!==a?a:0,y=null!==(r=n.alarm_limit)&&void 0!==r?r:0,_=s.y.getPixelForValue(c),h=s.y.getPixelForValue(y);l.fillStyle=S,l.fillRect(o.left,Math.min(_,h),o.right-o.left,Math.abs(_-h));const w=null!==(i=n.alarm_limit)&&void 0!==i?i:0,v=s.y.max,b=s.y.getPixelForValue(w),p=s.y.getPixelForValue(v);l.fillStyle=M,l.fillRect(o.left,Math.min(b,p),o.right-o.left,Math.abs(b-p)),l.restore()}},vt=(t,e)=>{var a;const r=`${Math.floor(e.getMinutes()/10)}0`;let i=(0,n.GP)(e,"yyyy-MM-dd HH:00:00");switch(F){case"hour":i=(0,n.GP)(e,"yyyy-MM-dd HH:00:00");break;case"minutes_10":i=(0,n.GP)(e,`yyyy-MM-dd HH:${r}:00`);break;case"all":i="all"}const l=null!==(a=t[i])&&void 0!==a?a:[];if(!l)return;const o=l.map(t=>(0,n.GP)(t.created_at,"HH:mm:ss")),s=l.map(t=>t.value),d=l[0];ft.current=d;const f=Math.min(...s),u=Math.max(...s),m=u-f||1,c=f-.2*m,y=u+.2*m;ot({labels:o,datasets:[{label:"Safety",data:s,borderColor:k,pointBackgroundColor:k,pointBorderColor:"#ffffff",pointHoverBackgroundColor:"#ffffff",pointHoverBorderColor:k,borderWidth:4,pointRadius:0}]}),dt({responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutCubic"},plugins:{legend:{position:"top",labels:{color:"#fbeecc",font:{size:14,weight:500,family:"'Inter', 'Segoe UI', sans-serif"},usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{backgroundColor:"#1f2937",titleColor:"#f8fafc",bodyColor:"#cbd5e1",padding:12,borderColor:"#0077b6",borderWidth:1,cornerRadius:8,titleFont:{family:"'Inter', sans-serif",size:14,weight:600},bodyFont:{family:"'Inter', sans-serif",size:13}}},scales:{x:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},maxRotation:45,minRotation:0}},y:{grid:{color:"#0d2b35"},ticks:{color:"#fbeecc",font:{size:12,family:"'Inter', sans-serif"},padding:8},min:c,max:y}},layout:{padding:{top:10,bottom:10,left:10,right:10}},elements:{line:{borderJoinStyle:"round"},point:{pointStyle:"circle"}}})},bt=(t,e)=>{var a;return(0,b.jsx)("div",{children:(0,b.jsx)("input",{style:{fontSize:"12px",marginTop:"0.5dvh",width:"150px"},type:"text",value:null!==(a=it[t])&&void 0!==a?a:"",placeholder:`${null!==e&&void 0!==e?e:t} ...`,onChange:e=>{nt(a=>{const r={...a};return r[t]=e.target.value,r})}})})},pt=(t,e)=>(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"3px",whiteSpace:"nowrap",cursor:"pointer"},onClick:()=>{B(t),G("ascending"===T?"descending":"ascending")},children:[(0,b.jsx)("div",{children:null!==e&&void 0!==e?e:t}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",alignItems:"center",justifyItems:"center"},children:[(0,b.jsx)(d.XhJ,{style:{color:P==t&&"descending"==T?"var(--secondary-color)":"silver",margin:0,padding:0,height:"18px"}}),(0,b.jsx)(d.GOR,{style:{color:P==t&&"ascending"==T?"var(--secondary-color)":"silver",margin:"-18px",padding:0,height:"18px"}})]})]}),gt=async()=>{try{const t=await w._.DashboardLevel4Realtime(Number(C));et(t),rt(t)}catch(t){j(new s.u({message:t instanceof Error?t.message:t.toString(),level:3}))}finally{E(!1)}};(0,r.useEffect)(()=>{if(e){gt();const t=setInterval(gt,3e3);return()=>{clearInterval(t)}}},[A,e]),(0,r.useEffect)(()=>{(()=>{const t=at.filter(t=>o.A.FilterTable(t,it)).sort((t,e)=>P?"ascending"==T?o.A.SortingTable(t,e,P):o.A.SortingTable(e,t,P):0);et(t)})()},[it,P,T]),(0,r.useEffect)(()=>{if(!e)return;if(!D)return;const t=ut(tt),a=new Date;a.setMinutes(10*Math.floor(a.getMinutes()/10)),N(a),vt(t,a)},[D,e,tt,F]),(0,r.useEffect)(()=>{if(!e)return;if(D)return;const t=ut(tt);vt(t,$)},[D,e,tt,$,F]),(0,r.useEffect)(()=>{e||ct(z.current,$)},[e,z.current,$]),(0,r.useEffect)(()=>{const t=ut(W);z.current=t;const e=Object.keys(t);if("all"!=F&&e.length>0){const t=new Date(e[e.length-1]);N(t)}else N(new Date)},[e,F]);const xt=(0,r.useMemo)(()=>"all"==F?"All Data":"hour"==F?(0,n.Yq)($,"dd MMM yyyy HH:00"):"minutes_10"==F?(0,n.Yq)($,"dd MMM yyyy HH:mm"):void 0,[$,F]),At=(t,a)=>{R(!1);const r=new Date($),i=10*Math.floor(r.getMinutes()/10);"hours"===a?r.setHours(r.getHours()+t,i,0,0):"minutes"===a&&r.setHours(r.getHours(),i+t,0,0),N(r),e||ct(z.current,r)},jt=(t,e)=>{if(I(t),a(e),B(null),G("ascending"),nt({}),"chart"==t)if(e){const t=ut(tt);vt(t,$)}else ct(z.current,$)},Et=()=>{if(0==tt.length)return j(new s.u({message:"NO DATA!",level:3}));let t=[];for(let l=0;l<tt.length;l++){var e,a,r,i;t.push({created_at:(0,n.GP)("string"===typeof tt[l].created_at?new Date(tt[l].created_at):tt[l].created_at,"yyyy-MM-dd HH:mm:ss"),value:`${tt[l].value}`,warning_limit:`${null!==(e=tt[l].warning_limit)&&void 0!==e?e:""}`,alarm_limit:`${null!==(a=tt[l].alarm_limit)&&void 0!==a?a:""}`,warning_limit_bottom:`${null!==(r=tt[l].warning_limit_bottom)&&void 0!==r?r:""}`,alarm_limit_bottom:`${null!==(i=tt[l].alarm_limit_bottom)&&void 0!==i?i:""}`})}v.A.export("Safety Data Realtime",["created_at","value","warning_limit","alarm_limit","warning_limit_bottom","alarm_limit_bottom"],t)},Ct=()=>{if(0==W.length)return j(new s.u({message:"NO DATA!",level:3}));let t=[];for(let l=0;l<tt.length;l++){var e,a,r,i;t.push({created_at:(0,n.GP)("string"===typeof tt[l].created_at?new Date(tt[l].created_at):tt[l].created_at,"yyyy-MM-dd HH:mm:ss"),value:`${tt[l].value}`,warning_limit:`${null!==(e=tt[l].warning_limit)&&void 0!==e?e:""}`,alarm_limit:`${null!==(a=tt[l].alarm_limit)&&void 0!==a?a:""}`,warning_limit_bottom:`${null!==(r=tt[l].warning_limit_bottom)&&void 0!==r?r:""}`,alarm_limit_bottom:`${null!==(i=tt[l].alarm_limit_bottom)&&void 0!==i?i:""}`})}v.A.export("Safety Data",["created_at","value","warning_limit","alarm_limit","warning_limit_bottom","alarm_limit_bottom"],t)};return(0,r.useEffect)(()=>(g(e?()=>Et:()=>Ct),()=>{g(null)}),[e,tt,W]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.cardBodyHeader,children:["chart"===L&&e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.headerChart,children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{className:i.A.titleChart,children:xt}),(0,b.jsxs)("div",{className:i.A.chartButtons,style:{justifyContent:"end"},children:[(0,b.jsx)("button",{onClick:()=>H("hour"),className:"hour"===F?i.A.activeBtn:"",children:"Hour"}),(0,b.jsx)("button",{onClick:()=>H("minutes_10"),className:"minutes_10"===F?i.A.activeBtn:"",children:"Minute"}),(0,b.jsx)("button",{onClick:()=>H("all"),className:"all"===F?i.A.activeBtn:"",children:"All"})]})]}),(0,b.jsxs)("div",{className:i.A.bodyChart,children:[(0,b.jsx)("button",{className:i.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==F?At(-1,"hours"):"minutes_10"==F&&At(-10,"minutes")},children:(0,b.jsx)(d.ed2,{})}),(0,b.jsx)("div",{className:i.A.wrapperChart,children:(0,b.jsx)(h.N1,{data:lt,options:st,plugins:[wt]})}),(0,b.jsx)("button",{className:i.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==F?At(1,"hours"):"minutes_10"==F&&At(10,"minutes")},children:(0,b.jsx)(d.FDZ,{})})]})]}),"table"===L&&e&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,b.jsxs)("table",{className:"tableclickcell",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"No"}),(0,b.jsxs)("th",{children:[pt("created_at","Waktu"),bt("created_at","Waktu")]}),(0,b.jsxs)("th",{children:[pt("value","Safety"),bt("value","Safety")]}),(0,b.jsxs)("th",{children:[pt("warning_limit","Warning Limit"),bt("warning_limit","Warning Limit")]}),(0,b.jsxs)("th",{children:[pt("alarm_limit","Alarm Limit"),bt("alarm_limit","Alarm Limit")]}),(0,b.jsxs)("th",{children:[pt("warning_limit_bottom","Warning Limit Bottom"),bt("warning_limit_bottom","Warning Limit Bottom")]}),(0,b.jsxs)("th",{children:[pt("alarm_limit_bottom","Alarm Limit Bottom"),bt("alarm_limit_bottom","Alarm Limit Bottom")]})]})}),o.A.FastIsEmpty(tt)?(0,b.jsx)("tbody",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,b.jsx)("tbody",{children:(0,b.jsx)(u.A,{tableData:tt,rowFunction:ht,rowsCount:250,rowsIncrement:50})})]})})}),"chart"===L&&!e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:i.A.headerChart,children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{className:i.A.titleChart,children:xt}),(0,b.jsxs)("div",{className:i.A.chartButtons,style:{justifyContent:"end"},children:[(0,b.jsx)("button",{onClick:()=>H("hour"),className:"hour"===F?i.A.activeBtn:"",children:"Hour"}),(0,b.jsx)("button",{onClick:()=>H("minutes_10"),className:"minutes_10"===F?i.A.activeBtn:"",children:"Minute"}),(0,b.jsx)("button",{onClick:()=>H("all"),className:"all"===F?i.A.activeBtn:"",children:"All"})]})]}),(0,b.jsxs)("div",{className:i.A.bodyChart,children:[(0,b.jsx)("button",{className:i.A.buttonChart1,style:{borderRadius:"12px 0 0 12px"},onClick:()=>{"hour"==F?At(-1,"hours"):"minutes_10"==F&&At(-10,"minutes")},children:(0,b.jsx)(d.ed2,{})}),(0,b.jsx)("div",{className:i.A.wrapperChart,children:(0,b.jsx)(h.N1,{data:Z,options:X,plugins:[mt]})}),(0,b.jsx)("button",{className:i.A.buttonChart2,style:{borderRadius:"0 0 12px 0"},onClick:()=>{"hour"==F?At(1,"hours"):"minutes_10"==F&&At(10,"minutes")},children:(0,b.jsx)(d.FDZ,{})})]})]}),"table"===L&&!e&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{style:{flex:1,overflowY:"auto"},className:"ordering-table",children:(0,b.jsxs)("table",{className:"tableclickcell",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"No"}),(0,b.jsxs)("th",{children:[_t("created_at","Waktu"),yt("created_at","Waktu")]}),(0,b.jsxs)("th",{children:[_t("value","Safety"),yt("value","Safety")]}),(0,b.jsxs)("th",{children:[_t("warning_limit","Warning Limit"),yt("warning_limit","Warning Limit")]}),(0,b.jsxs)("th",{children:[_t("alarm_limit","Alarm Limit"),yt("alarm_limit","Alarm Limit")]}),(0,b.jsxs)("th",{children:[_t("warning_limit_bottom","Warning Limit Bottom"),yt("warning_limit_bottom","Warning Limit Bottom")]}),(0,b.jsxs)("th",{children:[_t("alarm_limit_bottom","Alarm Limit Bottom"),yt("alarm_limit_bottom","Alarm Limit Bottom")]})]})}),o.A.FastIsEmpty(W)?(0,b.jsx)("tbody",{children:(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:1e3,children:"No Data Available Yet !"})})}):(0,b.jsx)("tbody",{children:(0,b.jsx)(u.A,{tableData:W,rowFunction:ht,rowsCount:250,rowsIncrement:50})})]})})})]}),(0,b.jsxs)("div",{className:i.A.cardBodyFooter,children:[(0,b.jsxs)("div",{className:i.A.footerLeft,children:[(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"chart"===L&&e?i.A.active:""}`,onClick:()=>{jt("chart",!0)},children:[(0,b.jsx)(m.kk8,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Realtime Chart"})]}),(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"table"===L&&e?i.A.active:""}`,onClick:()=>{jt("table",!0)},children:[(0,b.jsx)(c.ZIs,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Realtime Table"})]})]}),(0,b.jsx)("div",{className:i.A.footerMid,children:"chart"===L&&e&&(0,b.jsxs)("div",{className:i.A.switchGroup,children:[(0,b.jsx)("label",{htmlFor:"auto",children:"Auto"}),(0,b.jsxs)("label",{className:i.A.switch,children:[(0,b.jsx)("input",{type:"checkbox",id:"auto",checked:D,onChange:()=>{R(t=>!t)}}),(0,b.jsx)("span",{className:i.A.slider})]})]})}),(0,b.jsxs)("div",{className:i.A.footerRight,children:[(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"chart"!==L||e?"":i.A.active}`,onClick:()=>{jt("chart",!1)},children:[(0,b.jsx)(d.YYR,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Chart"})]}),(0,b.jsxs)("button",{className:`${i.A.buttonFooter} ${"table"!==L||e?"":i.A.active}`,onClick:()=>{jt("table",!1)},children:[(0,b.jsx)(d.ist,{}),(0,b.jsx)("span",{className:i.A.tooltipText,children:"Table"})]})]})]})]})}},5764:(t,e,a)=>{a.d(e,{A:()=>i});class r{}r.FilterTable=(t,e)=>{let a=Object.keys(t);for(let r=0;r<a.length;r++){const i=a[r];if(e[i]){if(void 0==t||null==t[i])return!1;if(""!==e[i]&&0==t[i].toString().toLowerCase().includes(e[i].toString().toLowerCase()))return!1}}return!0},r.SortingTable=(t,e,a)=>{if(null!=a&&void 0!=a&&void 0!==t[a]&&void 0!==e[a]){if("string"===typeof t[a]&&"string"===typeof e[a])return t[a].localeCompare(e[a]);if("number"===typeof t[a]&&"number"===typeof e[a])return t[a]-e[a]}return 0},r.FastIsEmpty=t=>{for(const e in t)return!1;return!0};const i=r},6278:(t,e,a)=>{a.d(e,{A:()=>o});var r=a(5043),i=a(5843),n=a(579);function l(t){const{onVisible:e,content:a}=t,{ref:r}=(0,i.Wx)({threshold:.1,triggerOnce:!1,initialInView:!1,onChange:(t,a)=>{t&&e()}});return(0,n.jsx)("tr",{ref:r,children:a})}function o(t){const{tableData:e,rowFunction:a,onRowClick:i,rowsCount:o,rowsIncrement:s}=t,d=o,f=s,[u,m]=(0,r.useState)(d),c=(0,r.useMemo)(()=>{const t=[];for(let r=0;r<e.length;r++){if(r<u-d||r>u)continue;const o=e[r];t.push((0,n.jsxs)(n.Fragment,{children:[r==u?(0,n.jsx)(l,{content:(0,n.jsx)(n.Fragment,{}),onVisible:function(){m(t=>t+f),setTimeout(()=>{var t;null===(t=document.getElementById(`rows_${r}`))||void 0===t||t.scrollIntoView()})}}):(0,n.jsx)(n.Fragment,{}),r==u-d&&0!=r?(0,n.jsx)(l,{content:(0,n.jsx)(n.Fragment,{}),onVisible:function(){m(t=>t-f<d?d:t-f),setTimeout(()=>{var t;null===(t=document.getElementById(`rows_${r}`))||void 0===t||t.scrollIntoView()})}}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("tr",{id:`rows_${r}`,style:{whiteSpace:"nowrap"},onClick:()=>{null!=i&&i(o)},children:a(r,o)}),r==e.length-1?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:1e3,children:"END OF DATA"})}):(0,n.jsx)(n.Fragment,{})]}))}return t},[u,e]);return(0,r.useEffect)(()=>{m(d)},[e]),c.map(t=>t)}},9533:(t,e,a)=>{a.d(e,{_:()=>l,m:()=>n});var r=a(8443),i=a(2340);class n{static async GetAllSafety(t){let e=`${r.C}/api/extension/safety/v1`;null!=t&&(e+=`?link_up_id=${t}`);const a=await i.A.fetchAuth(e);if(200!==a.status)throw new Error(a.message);const n=Array.isArray(a.data)?a.data:[];for(let r=0;r<n.length;r++){if("number"!=typeof n[r].safety_id)throw new Error("invalid safety_id value");if("number"!=typeof n[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof n[r].link_up)throw new Error("invalid link_up value");if("string"!=typeof n[r].parameter_name)throw new Error("invalid parameter_name value");if("string"!=typeof n[r].safety_tipe)throw new Error("invalid safety_tipe value");if(void 0!=n[r].safety_warn&&"number"!=typeof n[r].safety_warn)throw new Error("invalid safety_warn value");if(void 0!=n[r].safety_alarm&&"number"!=typeof n[r].safety_alarm)throw new Error("invalid safety_alarm value");if(void 0!=n[r].safety_bottom_warn&&"number"!=typeof n[r].safety_bottom_warn)throw new Error("invalid safety_bottom_warn value");if(void 0!=n[r].safety_bottom_alarm&&"number"!=typeof n[r].safety_bottom_alarm)throw new Error("invalid safety_bottom_alarm value");if("string"!=typeof n[r].safety_display_type)throw new Error("invalid safety_display_type value");if("string"!=typeof n[r].safety_unit)throw new Error("invalid safety_unit value")}return n}static async AddSafety(t){const e=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1`,{method:"POST",body:JSON.stringify({...t}),headers:{"Content-Type":"application/json"}});if(200!==e.status)throw new Error(e.message);return e}static async UpdateSafety(t,e){const a=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1`,{method:"PATCH",body:JSON.stringify({safety_id:t,fields:e}),headers:{"Content-Type":"application/json"}});if(200!==a.status)throw new Error(a.message);return a}static async DeleteSafety(t){const e=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1`,{method:"DELETE",body:JSON.stringify({safety_id:t}),headers:{"Content-Type":"application/json"}});if(200!==e.status)throw new Error(e.message);return e}static async GetLinkUpConfig(t){let e=`${r.C}/api/extension/safety/v1/linkup`;null!=t&&(e+=`?link_up_id=${t}`);const a=await i.A.fetchAuth(e);if(200!==a.status)throw new Error(a.message);if(!Array.isArray(a.data))throw new Error("invalid link up config response");for(let r=0;r<a.data.length;r++){var n,l;const t=a.data[r];if("number"!=typeof t.link_up_id)throw new Error("invalid link_up_id value");if("number"!=typeof(null!==(n=t.safety_warn)&&void 0!==n?n:0))throw new Error("invalid safety_warn value");if("number"!=typeof(null!==(l=t.safety_alarm)&&void 0!==l?l:0))throw new Error("invalid safety_alarm value")}return a.data}static async UpsertLinkupConfig(t,e){const a=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/linkup`,{method:"PATCH",body:JSON.stringify({link_up_id:t,fields:e}),headers:{"Content-Type":"application/json"}});if(200!==a.status)throw new Error(a.message);return a}static async GetBusinessUnitConfig(t){let e=`${r.C}/api/extension/safety/v1/business`;null!=t&&(e+=`?business_unit_id=${t}`);const a=await i.A.fetchAuth(e);if(200!==a.status)throw new Error(a.message);if(!Array.isArray(a.data))throw new Error("invalid link up config response");for(let r=0;r<a.data.length;r++){var n,l;const t=a.data[r];if("number"!=typeof t.business_unit_id)throw new Error("invalid business_unit_id value");if("number"!=typeof(null!==(n=t.safety_warn)&&void 0!==n?n:0))throw new Error("invalid safety_warn value");if("number"!=typeof(null!==(l=t.safety_alarm)&&void 0!==l?l:0))throw new Error("invalid safety_alarm value")}return a.data}static async UpsertBusinessUnitConfig(t,e){const a=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/business`,{method:"PATCH",body:JSON.stringify({business_unit_id:t,fields:e}),headers:{"Content-Type":"application/json"}});if(200!==a.status)throw new Error(a.message);return a}}class l{static async DashboardLevel1(t,e){const a=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/l1?start_date=${t}&end_date=${e}`);if(200!==a.status)throw new Error(a.message);const n=Array.isArray(a.data)?a.data:[];for(let r=0;r<n.length;r++){if("number"!=typeof n[r].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof n[r].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(n[r].safety_id_ool))throw new Error("invalid safety_id_ool value");if("number"!=typeof n[r].safety_green)throw new Error("invalid safety_green value");if("number"!=typeof n[r].safety_yellow)throw new Error("invalid safety_yellow value");if("number"!=typeof n[r].safety_red)throw new Error("invalid safety_red value");if(void 0!=n[r].safety_warn&&"number"!=typeof n[r].safety_warn)throw new Error("invalid safety_warn value");if(void 0!=n[r].safety_alarm&&"number"!=typeof n[r].safety_alarm)throw new Error("invalid safety_alarm value")}return n}static async DashboardLevel2(t,e,a){const n=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/l2?business_unit_id=${a}&start_date=${t}&end_date=${e}`);if(200!==n.status)throw new Error(n.message);const l=Array.isArray(n.data)?n.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof l[r].link_up)throw new Error("invalid link_up value");if(!Array.isArray(l[r].safety_id_ool))throw new Error("invalid safety_id_ool value");if("number"!=typeof l[r].safety_green)throw new Error("invalid safety_green value");if("number"!=typeof l[r].safety_yellow)throw new Error("invalid safety_yellow value");if("number"!=typeof l[r].safety_red)throw new Error("invalid safety_red value");if(void 0!=l[r].safety_warn&&"number"!=typeof l[r].safety_warn)throw new Error("invalid safety_warn value");if(void 0!=l[r].safety_alarm&&"number"!=typeof l[r].safety_alarm)throw new Error("invalid safety_alarm value")}return l}static async DashboardLevel3(t,e,a){const n=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/l3?link_up_id=${a}&start_date=${t}&end_date=${e}`);if(200!==n.status)throw new Error(n.message);const l=Array.isArray(n.data)?n.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].safety_id)throw new Error("invalid dashboard safety_id value");if("string"!=typeof l[r].parameter_name)throw new Error("invalid dashboard parameter_name value");if("string"!=typeof l[r].safety_tipe)throw new Error("invalid dashboard safety_tipe value");if("number"!=typeof l[r].safety_green)throw new Error("invalid safety_green value");if("number"!=typeof l[r].safety_yellow)throw new Error("invalid safety_yellow value");if("number"!=typeof l[r].safety_red)throw new Error("invalid safety_red value");if(!l[r].last_safety_data)throw new Error("missing last_safety_data");if("number"!==typeof l[r].last_safety_data.safety_id)throw new Error("invalid last_safety_data.safety_id");if("number"!==typeof l[r].last_safety_data.value)throw new Error("invalid last_safety_data.value");if(void 0!=l[r].last_safety_data.warning_limit&&"number"!==typeof l[r].last_safety_data.warning_limit)throw new Error("invalid last_safety_data.warning_limit");if(void 0!=l[r].last_safety_data.alarm_limit&&"number"!==typeof l[r].last_safety_data.alarm_limit)throw new Error("invalid last_safety_data.alarm_limit");if(void 0!=l[r].last_safety_data.warning_limit_bottom&&"number"!==typeof l[r].last_safety_data.warning_limit_bottom)throw new Error("invalid last_safety_data.warning_limit_bottom");if(void 0!=l[r].last_safety_data.alarm_limit_bottom&&"number"!==typeof l[r].last_safety_data.alarm_limit_bottom)throw new Error("invalid last_safety_data.alarm_limit_bottom");if("string"!==typeof l[r].last_safety_data.created_at)throw new Error("invalid last_safety_data.created_at")}return l}static async DashboardLevel4(t,e,a){const n=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/data?safety_id=${a}&start_date=${t}&end_date=${e}`);if(200!==n.status)throw new Error(n.message);const l=Array.isArray(n.data)?n.data:[];for(let r=0;r<l.length;r++){if("number"!=typeof l[r].value)throw new Error("invalid value value");if(void 0!=l[r].warning_limit&&"number"!=typeof l[r].warning_limit)throw new Error("invalid warning_limit value");if(void 0!=l[r].alarm_limit&&"number"!=typeof l[r].alarm_limit)throw new Error("invalid alarm_limit value");if(void 0!=l[r].warning_limit_bottom&&"number"!=typeof l[r].warning_limit_bottom)throw new Error("invalid warning_limit_bottom value");if(void 0!=l[r].alarm_limit_bottom&&"number"!=typeof l[r].alarm_limit_bottom)throw new Error("invalid alarm_limit_bottom value");if("Invalid Date"==new Date(l[r].created_at).toString())throw new Error("invalid created_at value");l[r].created_at=new Date(l[r].created_at)}return l}static async DashboardLevel1Realtime(){const t=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/l1/realtime`);if(200!==t.status)throw new Error(t.message);const e=Array.isArray(t.data)?t.data:[];for(let a=0;a<e.length;a++){if("number"!=typeof e[a].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof e[a].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(e[a].safety_id_ool))throw new Error("invalid safety_id_ool value");if("number"!=typeof e[a].safety_green)throw new Error("invalid safety_green value");if("number"!=typeof e[a].safety_yellow)throw new Error("invalid safety_yellow value");if("number"!=typeof e[a].safety_red)throw new Error("invalid safety_red value");if(void 0!=e[a].safety_warn&&"number"!=typeof e[a].safety_warn)throw new Error("invalid safety_warn value");if(void 0!=e[a].safety_alarm&&"number"!=typeof e[a].safety_alarm)throw new Error("invalid safety_alarm value")}return e}static async DashboardLevel2Realtime(t){const e=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/l2/realtime?business_unit_id=${t}`);if(200!==e.status)throw new Error(e.message);const a=Array.isArray(e.data)?e.data:[];for(let r=0;r<a.length;r++){if("number"!=typeof a[r].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof a[r].link_up)throw new Error("invalid link_up value");if(!Array.isArray(a[r].safety_id_ool))throw new Error("invalid safety_id_ool value");if("number"!=typeof a[r].safety_green)throw new Error("invalid safety_green value");if("number"!=typeof a[r].safety_yellow)throw new Error("invalid safety_yellow value");if("number"!=typeof a[r].safety_red)throw new Error("invalid safety_red value");if(void 0!=a[r].safety_warn&&"number"!=typeof a[r].safety_warn)throw new Error("invalid safety_warn value");if(void 0!=a[r].safety_alarm&&"number"!=typeof a[r].safety_alarm)throw new Error("invalid safety_alarm value")}return a}static async DashboardLevel3Realtime(t){const e=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/l3/realtime?link_up_id=${t}`);if(200!==e.status)throw new Error(e.message);const a=Array.isArray(e.data)?e.data:[];for(let r=0;r<a.length;r++){if("number"!=typeof a[r].safety_id)throw new Error("invalid dashboard safety_id value");if("string"!=typeof a[r].parameter_name)throw new Error("invalid dashboard parameter_name value");if("string"!=typeof a[r].safety_tipe)throw new Error("invalid dashboard safety_tipe value");if("number"!=typeof a[r].safety_green)throw new Error("invalid safety_green value");if("number"!=typeof a[r].safety_yellow)throw new Error("invalid safety_yellow value");if("number"!=typeof a[r].safety_red)throw new Error("invalid safety_red value");if(!a[r].last_safety_data)throw new Error("missing last_safety_data");if("number"!==typeof a[r].last_safety_data.safety_id)throw new Error("invalid last_safety_data.safety_id");if("number"!==typeof a[r].last_safety_data.value)throw new Error("invalid last_safety_data.value");if(void 0!=a[r].last_safety_data.warning_limit&&"number"!==typeof a[r].last_safety_data.warning_limit)throw new Error("invalid last_safety_data.warning_limit");if(void 0!=a[r].last_safety_data.alarm_limit&&"number"!==typeof a[r].last_safety_data.alarm_limit)throw new Error("invalid last_safety_data.alarm_limit");if(void 0!=a[r].last_safety_data.warning_limit_bottom&&"number"!==typeof a[r].last_safety_data.warning_limit_bottom)throw new Error("invalid last_safety_data.warning_limit_bottom");if(void 0!=a[r].last_safety_data.alarm_limit_bottom&&"number"!==typeof a[r].last_safety_data.alarm_limit_bottom)throw new Error("invalid last_safety_data.alarm_limit_bottom");if("string"!==typeof a[r].last_safety_data.created_at)throw new Error("invalid last_safety_data.created_at")}return a}static async DashboardLevel4Realtime(t){const e=await i.A.fetchAuth(`${r.C}/api/extension/safety/v1/data/realtime?safety_id=${t}`);if(200!==e.status)throw new Error(e.message);const a=Array.isArray(e.data)?e.data:[];for(let r=0;r<a.length;r++){if("number"!=typeof a[r].value)throw new Error("invalid value value");if(void 0!=a[r].warning_limit&&"number"!=typeof a[r].warning_limit)throw new Error("invalid warning_limit value");if(void 0!=a[r].alarm_limit&&"number"!=typeof a[r].alarm_limit)throw new Error("invalid alarm_limit value");if(void 0!=a[r].warning_limit_bottom&&"number"!=typeof a[r].warning_limit_bottom)throw new Error("invalid warning_limit_bottom value");if(void 0!=a[r].alarm_limit_bottom&&"number"!=typeof a[r].alarm_limit_bottom)throw new Error("invalid alarm_limit_bottom value");if("Invalid Date"==new Date(a[r].created_at).toString())throw new Error("invalid created_at value");a[r].created_at=new Date(a[r].created_at)}return a}}}}]);
//# sourceMappingURL=118.6c6e90c4.chunk.js.map