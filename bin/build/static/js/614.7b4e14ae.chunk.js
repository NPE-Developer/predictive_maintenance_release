"use strict";(self.webpackChunknagamas_frontend=self.webpackChunknagamas_frontend||[]).push([[614],{1233:(e,a,r)=>{r.d(a,{e:()=>i,w:()=>s});var t=r(8443),n=r(2340);class i{static async GetMachineConfig(e){let a=`${t.C}/api/extension/following_error/v1/machine`;null!=e&&(a+=`?machine_id=${e}`);const r=await n.A.fetchAuth(a);if(200!==r.status)throw new Error(r.message);if(!Array.isArray(r.data))throw new Error("invalid machine config response");for(let t=0;t<r.data.length;t++){var i,s;const e=r.data[t];if("number"!=typeof e.machine_id)throw new Error("invalid machine_id value");if("number"!=typeof(null!==(i=e.following_error_warn)&&void 0!==i?i:0))throw new Error("invalid following_error_warn value");if("number"!=typeof(null!==(s=e.following_error_alarm)&&void 0!==s?s:0))throw new Error("invalid following_error_alarm value")}return r.data}static async UpsertMachineConfig(e,a){const r=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/machine`,{method:"PATCH",body:JSON.stringify({machine_id:e,fields:a}),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error(r.message);return r}}class s{static async DashboardLevel1(e,a){const r=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/l1?start_date=${e}&end_date=${a}`);if(200!==r.status)throw new Error(r.message);const i=Array.isArray(r.data)?r.data:[];for(let t=0;t<i.length;t++){if("number"!=typeof i[t].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof i[t].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(i[t].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof i[t].ool_following_error)throw new Error("invalid ool_following_error value")}return i}static async DashboardLevel2(e,a,r){const i=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/l2?business_unit_id=${r}&start_date=${e}&end_date=${a}`);if(200!==i.status)throw new Error(i.message);const s=Array.isArray(i.data)?i.data:[];for(let t=0;t<s.length;t++){if("number"!=typeof s[t].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof s[t].link_up)throw new Error("invalid link_up value");if(!Array.isArray(s[t].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof s[t].ool_following_error)throw new Error("invalid ool_following_error value")}return s}static async DashboardLevel3(e,a,r){const i=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/l3?link_up_id=${r}&start_date=${e}&end_date=${a}`);if(200!==i.status)throw new Error(i.message);const s=Array.isArray(i.data)?i.data:[];for(let t=0;t<s.length;t++){if("number"!=typeof s[t].machine_id)throw new Error("invalid machine_id value");if("number"!=typeof s[t].ool_following_error)throw new Error("invalid ool_following_error value")}return s}static async DashboardLevel4(e,a,r){const i=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/data?machine_id=${r}&start_date=${e}&end_date=${a}`);if(200!==i.status)throw new Error(i.message);const s=Array.isArray(i.data)?i.data:[];for(let t=0;t<s.length;t++){if("number"!=typeof s[t].following_error)throw new Error("invalid following_error value");if(void 0!=s[t].following_error_warn&&"number"!=typeof s[t].following_error_warn)throw new Error("invalid following_error_warn value");if(void 0!=s[t].following_error_alarm&&"number"!=typeof s[t].following_error_alarm)throw new Error("invalid following_error_alarm value");if("Invalid Date"==new Date(s[t].created_at).toString())throw new Error("invalid created_at value");s[t].created_at=new Date(s[t].created_at)}return s}static async DashboardLevel1Realtime(){const e=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/l1/realtime`);if(200!==e.status)throw new Error(e.message);const a=Array.isArray(e.data)?e.data:[];for(let r=0;r<a.length;r++){if("number"!=typeof a[r].business_unit_id)throw new Error("invalid business_unit_id value");if("string"!=typeof a[r].business_unit)throw new Error("invalid business_unit value");if(!Array.isArray(a[r].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof a[r].ool_following_error)throw new Error("invalid ool_following_error value")}return a}static async DashboardLevel2Realtime(e){const a=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/l2/realtime?business_unit_id=${e}`);if(200!==a.status)throw new Error(a.message);const r=Array.isArray(a.data)?a.data:[];for(let t=0;t<r.length;t++){if("number"!=typeof r[t].link_up_id)throw new Error("invalid link_up_id value");if("string"!=typeof r[t].link_up)throw new Error("invalid link_up value");if(!Array.isArray(r[t].machine_ool_following_error))throw new Error("invalid machine_ool_following_error value");if("number"!=typeof r[t].ool_following_error)throw new Error("invalid ool_following_error value")}return r}static async DashboardLevel3Realtime(e){const a=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/l3/realtime?link_up_id=${e}`);if(200!==a.status)throw new Error(a.message);const r=Array.isArray(a.data)?a.data:[];for(let t=0;t<r.length;t++){if("number"!=typeof r[t].machine_id)throw new Error("invalid machine_id value");if("number"!=typeof r[t].ool_following_error)throw new Error("invalid ool_following_error value")}return r}static async DashboardLevel4Realtime(e){const a=await n.A.fetchAuth(`${t.C}/api/extension/following_error/v1/data/realtime?machine_id=${e}`);if(200!==a.status)throw new Error(a.message);const r=Array.isArray(a.data)?a.data:[];for(let t=0;t<r.length;t++){if("number"!=typeof r[t].following_error)throw new Error("invalid following_error value");if(void 0!=r[t].following_error_warn&&"number"!=typeof r[t].following_error_warn)throw new Error("invalid following_error_warn value");if(void 0!=r[t].following_error_alarm&&"number"!=typeof r[t].following_error_alarm)throw new Error("invalid following_error_alarm value");if("Invalid Date"==new Date(r[t].created_at).toString())throw new Error("invalid created_at value");r[t].created_at=new Date(r[t].created_at)}return r}}},5175:(e,a,r)=>{r.d(a,{I:()=>i,r:()=>s});var t=r(8443),n=r(2340);class i{static async GetDashboardLevel1(e,a){const r=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/l1?start_date=${encodeURIComponent(e)}&end_date=${encodeURIComponent(a)}`);if(200!==r.status)throw new Error("Failed to fetch dashboard data.");const i=[];for(let t=0;t<r.data.length;t++){const e=r.data[t];if(!Array.isArray(e.machine_ool_pressure))throw new Error("invalid ool pressure data");if(!Array.isArray(e.machine_ool_vibration))throw new Error("invalid ool vibration data");i.push({business_unit_id:e.business_unit_id,business_unit:e.business_unit,business_unit_warn:e.business_unit_warn,business_unit_alarm:e.business_unit_alarm,ool_pressure:e.ool_pressure,ool_vibration:e.ool_vibration,ool_temperature:e.ool_temperature,machine_ool_pressure:e.machine_ool_pressure,machine_ool_vibration:e.machine_ool_vibration,sensor_vibration_connected:e.sensor_vibration_connected,sensor_vibration_total:e.sensor_vibration_total,sensor_pressure_connected:e.sensor_pressure_connected,sensor_pressure_total:e.sensor_pressure_total})}return i}static async GetDashboardLevel2(e,a,r){const i=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/l2?business_unit_id=${encodeURIComponent(e)}&start_date=${encodeURIComponent(a)}&end_date=${encodeURIComponent(r)}`);if(200!==i.status)throw new Error("Failed to fetch dashboard data.");const s=[];for(let t=0;t<i.data.length;t++){const e=i.data[t];if(!Array.isArray(e.machine_ool_pressure))throw new Error("invalid ool pressure data");if(!Array.isArray(e.machine_ool_vibration))throw new Error("invalid ool vibration data");s.push({link_up_id:e.link_up_id,link_up:e.link_up,link_up_warn:e.link_up_warn,link_up_alarm:e.link_up_alarm,ool_pressure:e.ool_pressure,ool_vibration:e.ool_vibration,ool_temperature:e.ool_temperature,machine_ool_pressure:e.machine_ool_pressure,machine_ool_vibration:e.machine_ool_vibration,sensor_vibration_connected:e.sensor_vibration_connected,sensor_vibration_total:e.sensor_vibration_total,sensor_pressure_connected:e.sensor_pressure_connected,sensor_pressure_total:e.sensor_pressure_total})}return s}static async GetDashboardLevel3(e,a,r){const i=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/l3?link_up_id=${encodeURIComponent(e)}&start_date=${encodeURIComponent(a)}&end_date=${encodeURIComponent(r)}`);if(200!==i.status)throw new Error("Failed to fetch dashboard data.");const s=[];for(let t=0;t<i.data.length;t++){const e=i.data[t];s.push({machine_id:e.machine_id,machine:e.machine,machine_warn:e.machine_warn,machine_alarm:e.machine_alarm,machine_type:e.machine_type,ool_pressure:e.ool_pressure,ool_vibration:e.ool_vibration,ool_temperature:e.ool_temperature,sensor_vibration_connected:e.sensor_vibration_connected,sensor_pressure_connected:e.sensor_pressure_connected})}return s}static async GetDashboardLevel4Pressure(e,a,r){let i=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/pressure/l4?machine_id=${encodeURIComponent(e)}&start_date=${encodeURIComponent(a)}&end_date=${encodeURIComponent(r)}`);if(200!==i.status)throw new Error(i.message);const s=Array.isArray(i.data)?i.data:[],o=[];for(let t=0;t<s.length;t++)o.push({pressure:s[t].pressure,pressure_max_alarm:s[t].pressure_max_alarm,pressure_max_warn:s[t].pressure_max_warn,pressure_min_alarm:s[t].pressure_min_alarm,pressure_min_warn:s[t].pressure_min_warn,timestamp:s[t].timestamp});return o}static async GetDashboardLevel4Vibration(e,a,r){let i=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/vibration/l4?machine_id=${encodeURIComponent(e)}&start_date=${encodeURIComponent(a)}&end_date=${encodeURIComponent(r)}`);if(200!==i.status)throw new Error(i.message);const s=Array.isArray(i.data)?i.data:[],o=[];for(let t=0;t<s.length;t++)o.push({x:s[t].x,x_base:s[t].x_base,x_warn:s[t].x_warn,x_alarm:s[t].x_alarm,z:s[t].z,z_base:s[t].z_base,z_warn:s[t].z_warn,z_alarm:s[t].z_alarm,x_acc:s[t].x_acc,x_acc_base:s[t].x_acc_base,x_acc_warn:s[t].x_acc_warn,x_acc_alarm:s[t].x_acc_alarm,z_acc:s[t].z_acc,z_acc_base:s[t].z_acc_base,z_acc_warn:s[t].z_acc_warn,z_acc_alarm:s[t].z_acc_alarm,temp:s[t].temp,temp_warn:s[t].temp_warn,temp_alarm:s[t].temp_alarm,timestamp:s[t].timestamp});return o}}class s{static async GetDashboardLevel1(){const e=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/realtime/l1`);if(200!==e.status)throw new Error("Failed to fetch dashboard data.");const a=[];for(let r=0;r<e.data.length;r++){const t=e.data[r];if(!Array.isArray(t.machine_ool_pressure))throw new Error("invalid ool pressure data");if(!Array.isArray(t.machine_ool_vibration))throw new Error("invalid ool vibration data");const n=t.machine_ool_pressure.concat(t.machine_ool_vibration);Array.from(new Set(n));a.push({business_unit_id:t.business_unit_id,business_unit:t.business_unit,business_unit_warn:t.business_unit_warn,business_unit_alarm:t.business_unit_alarm,ool_pressure:t.ool_pressure,ool_vibration:t.ool_vibration,ool_temperature:t.ool_temperature,machine_ool_pressure:t.machine_ool_pressure,machine_ool_vibration:t.machine_ool_vibration,sensor_vibration_connected:t.sensor_vibration_connected,sensor_vibration_total:t.sensor_vibration_total,sensor_pressure_connected:t.sensor_pressure_connected,sensor_pressure_total:t.sensor_pressure_total})}return a}static async GetDashboardLevel2(e){const a=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/realtime/l2?business_unit_id=${encodeURIComponent(e)}`);if(200!==a.status)throw new Error("Failed to fetch dashboard data.");const r=[];for(let t=0;t<a.data.length;t++){const e=a.data[t];if(!Array.isArray(e.machine_ool_pressure))throw new Error("invalid ool pressure data");if(!Array.isArray(e.machine_ool_vibration))throw new Error("invalid ool vibration data");r.push({link_up_id:e.link_up_id,link_up:e.link_up,link_up_warn:e.link_up_warn,link_up_alarm:e.link_up_alarm,ool_pressure:e.ool_pressure,ool_vibration:e.ool_vibration,ool_temperature:e.ool_temperature,machine_ool_pressure:e.machine_ool_pressure,machine_ool_vibration:e.machine_ool_vibration,sensor_vibration_connected:e.sensor_vibration_connected,sensor_vibration_total:e.sensor_vibration_total,sensor_pressure_connected:e.sensor_pressure_connected,sensor_pressure_total:e.sensor_pressure_total})}return r}static async GetDashboardLevel3(e){const a=await n.A.fetchAuth(`${t.C}/api/v1/dashboard/realtime/l3?link_up_id=${encodeURIComponent(e)}`);if(200!==a.status)throw new Error("Failed to fetch dashboard data.");const r=[];for(let t=0;t<a.data.length;t++){const e=a.data[t];r.push({machine_id:e.machine_id,machine:e.machine,machine_type:e.machine_type,ool_pressure:e.ool_pressure,ool_vibration:e.ool_vibration,ool_temperature:e.ool_temperature,machine_warn:e.machine_warn,machine_alarm:e.machine_alarm,sensor_vibration_connected:e.sensor_vibration_connected,sensor_pressure_connected:e.sensor_pressure_connected})}return r}}},7614:(e,a,r)=>{r.r(a),r.d(a,{default:()=>y});var t=r(5043),n=r(3216),i=r(2573),s=r(414),o=r(5175),l=r(1121);const d={cardHeader:"DashboardLevel1_cardHeader__WTdRr",leftSection:"DashboardLevel1_leftSection__xh0G2",inputGroup:"DashboardLevel1_inputGroup__yHIan",switchGroup:"DashboardLevel1_switchGroup__nTNic",switch:"DashboardLevel1_switch__JDtsJ",slider:"DashboardLevel1_slider__KMulU",autoScroll:"DashboardLevel1_autoScroll__l6W36",checkAuto:"DashboardLevel1_checkAuto__5yGWC",rightSection:"DashboardLevel1_rightSection__v9TCC",buttonFooter:"DashboardLevel1_buttonFooter__NyUZK",cardWrapperContainer:"DashboardLevel1_cardWrapperContainer__h9rRB",cardContainer:"DashboardLevel1_cardContainer__leyHo",scrollContentWrapper:"DashboardLevel1_scrollContentWrapper__k1JYi",scrollachievement:"DashboardLevel1_scrollachievement__uGB2r",scrollContentWrapperStop:"DashboardLevel1_scrollContentWrapperStop__MHTES",scrollContent:"DashboardLevel1_scrollContent__claCg",scrollContentStop:"DashboardLevel1_scrollContentStop__HPMWN",cardItem1:"DashboardLevel1_cardItem1__9VFpx",cardItem1Header:"DashboardLevel1_cardItem1Header__AsjHk",cardTitle:"DashboardLevel1_cardTitle__MDvGF",cardItem1Body:"DashboardLevel1_cardItem1Body__GJdh+",cardSubItem:"DashboardLevel1_cardSubItem__sOyFc",cardSubItemHeader:"DashboardLevel1_cardSubItemHeader__lTxEm",cardSubItemBody:"DashboardLevel1_cardSubItemBody__ae0PO",cardSubItemFooter:"DashboardLevel1_cardSubItemFooter__akfah",itemValue:"DashboardLevel1_itemValue__4ZBB6",itemNormal:"DashboardLevel1_itemNormal__f7QQY",itemWarning:"DashboardLevel1_itemWarning__hU70I",itemAlarm:"DashboardLevel1_itemAlarm__OdO+X",cardItem1Footer:"DashboardLevel1_cardItem1Footer__la02S",cardItem:"DashboardLevel1_cardItem__xyKcI",cardItemHeader:"DashboardLevel1_cardItemHeader__CtstV",cardItemTitle:"DashboardLevel1_cardItemTitle__EayNW",cardItemBody:"DashboardLevel1_cardItemBody__xnCCc",runningBackground:"DashboardLevel1_runningBackground__lsvay",warningBackground:"DashboardLevel1_warningBackground__Ri01a",blinkWarning:"DashboardLevel1_blinkWarning__wEzqj",dangerBackground:"DashboardLevel1_dangerBackground__kEFb7",blinkDanger:"DashboardLevel1_blinkDanger__z5jd2"};var c=r(397),_=r(2480),h=r(1233),u=r(4906),m=r(8680),v=r(9533),w=r(6606),b=r(8384),f=r(3002),p=r(579);function y(){const e=(0,t.useContext)(i.A),a=e.version,r=e.contextAccessToken,y=e.contextShowAlertFunc,g=e.contextShowLoadingFunc,x=(e.stateShowLoading,(0,n.Zp)()),j=((0,n.zy)(),(()=>{const e=localStorage.getItem("cache");if(null==e)return{start_date:new Date,end_date:new Date,isRealtime:!0};{const a=JSON.parse(e);return{start_date:a.start_date,end_date:a.end_date,isRealtime:a.isRealtime}}})()),[A,S]=(0,t.useState)({start_date:j.start_date,end_date:j.end_date}),[D,N]=(0,t.useState)(j.isRealtime),[I,$]=(0,t.useState)([]),[k,C]=(0,t.useState)({}),[L,E]=(0,t.useState)({}),[R,O]=(0,t.useState)({}),[F,M]=(0,t.useState)({}),[B,V]=(0,t.useState)({}),[G,q]=(0,t.useState)({}),[U,H]=(0,t.useState)({}),[W,T]=(0,t.useState)(!1),z=W?d.scrollContentWrapper:d.scrollContentWrapperStop,Y=W?d.scrollContent:d.scrollContentStop,J=async()=>{try{let e=[];if(D)e=await o.r.GetDashboardLevel1(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await o.I.GetDashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];C(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},P=async()=>{try{let e=[];if(D)e=await _.z.DashboardLevel1Realtime(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await _.z.DashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];E(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},K=async()=>{try{let e=[];if(D)e=await m.P.DashboardLevel1Realtime(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await m.P.DashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];O(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},Q=async()=>{try{let e=[];if(D)e=await v._.DashboardLevel1Realtime(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await v._.DashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];M(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},Z=async()=>{try{let e=[];if(D)e=await b.F.DashboardLevel1Realtime(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await b.F.DashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];V(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},X=async()=>{try{let e=[];if(D)e=await w.a.DashboardLevel1Realtime(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await w.a.DashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];q(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},ee=async()=>{try{let e=[];if(D)e=await h.w.DashboardLevel1Realtime(),S({start_date:new Date,end_date:new Date}),localStorage.removeItem("cache");else{const a=(0,l.Yq)(A.start_date,"yyyy-MM-dd"),r=(0,l.Yq)(A.end_date,"yyyy-MM-dd");e=await h.w.DashboardLevel1(a,r),localStorage.setItem("cache",JSON.stringify({...A,isRealtime:D}))}const a={};for(let r=0;r<e.length;r++)a[`${e[r].business_unit_id}`]=e[r];H(a)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3,withOk:!1}))}},ae=async()=>{if(D)console.log("called generate realtime"),void 0!=a.server&&await J(),void 0!=a.centerline&&await P(),void 0!=a.following&&await ee(),void 0!=a.critical_rod_break&&await K(),void 0!=a.safety&&await Q(),void 0!=a.electric&&await Z(),void 0!=a.quality_factor&&await X();else{te(),g(!0);const e=[];void 0!=a.server&&e.push(J()),void 0!=a.centerline&&e.push(P()),void 0!=a.following&&e.push(ee()),void 0!=a.critical_rod_break&&e.push(K()),void 0!=a.safety&&e.push(Q()),void 0!=a.electric&&e.push(Z()),void 0!=a.quality_factor&&e.push(X());try{await Promise.any(e)}catch{}g(!1)}},re=(e,a,r)=>{const t=null!==e&&void 0!==e?e:0,n=null!==a&&void 0!==a?a:0,i=null!==r&&void 0!==r?r:0;let s=d.runningBackground;return t>n&&(s=d.warningBackground),t>i&&(s=d.dangerBackground),s},te=()=>{C({}),E({}),H({})};(0,t.useEffect)(()=>{if(ae(),D){let e=null;const a=()=>{e=setTimeout(async()=>{await ae(),a()},3e3)};return a(),()=>{null!=e&&clearTimeout(e)}}},[r,a,D]),(0,t.useEffect)(()=>{(async()=>{g(!0);try{const[e,r]=await Promise.all([u.I.GetAllBusinessUnit(),Promise.all([a.centerline?_.X.GetBusinessUnitConfig():[],a.safety?v.m.GetBusinessUnitConfig():[],a.electric?b.$.GetBusinessUnitConfig():[],a.critical_rod_break?m.N.GetBusinessUnitConfig():[],a.quality_factor?w.G.GetBusinessUnitConfig():[]])]),t=e.map(e=>{let a={...e};return r.forEach(r=>{const t=r.find(a=>a.business_unit_id===e.business_unit_id);a={...a,...t}}),a});$(t)}catch(e){y(new s.u({message:e instanceof Error?e.message:e.toString(),level:3}))}finally{g(!1)}})()},[]);const ne=()=>(0,p.jsx)(p.Fragment,{children:I.map((e,a)=>{var r,t,n,i;const s=I[`${e.business_unit_id}`],o=k[`${e.business_unit_id}`],l=U[`${e.business_unit_id}`],c=L[`${e.business_unit_id}`],_=R[`${e.business_unit_id}`],h=F[`${e.business_unit_id}`],u=G[`${e.business_unit_id}`],m=B[`${e.business_unit_id}`];let v=[];o&&(v=v.concat(o.machine_ool_pressure),v=v.concat(o.machine_ool_vibration)),l&&(v=v.concat(l.machine_ool_following_error)),c&&(v=v.concat(c.centerline_id_ool)),_&&(v=v.concat(_.critical_rod_break_id_ool)),h&&(v=v.concat(h.safety_id_ool)),u&&(v=v.concat(u.quality_factor_id_ool)),m&&(v=v.concat(m.electric_id_ool));const w=Array.from(new Set(v));return(0,p.jsxs)("div",{className:d.cardItem1,onClick:()=>{(o||l)&&x(`/dashboard/l2/${e.business_unit_id}`,{state:{business_unit:{business_unit_id:e.business_unit_id,business_unit:e.business_unit},start_date:A.start_date,end_date:A.end_date,realtimeState:D}})},children:[(0,p.jsx)("div",{className:d.cardItem1Header,children:(0,p.jsx)("div",{className:d.cardTitle,children:e.business_unit})}),(0,p.jsxs)("div",{className:d.cardItem1Body,children:[void 0!=o?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Pressure"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:`${d.itemValue} ${re(o.ool_pressure,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:null!==(r=o.ool_pressure)&&void 0!==r?r:0}),(0,p.jsx)("h3",{children:"OOL"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(o.machine_ool_pressure.length,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:o.machine_ool_pressure.length}),(0,p.jsx)("h3",{children:"Machine OOL"})]})]}),o.sensor_pressure_total>0&&(0,p.jsxs)("div",{className:d.cardSubItemFooter,children:[(0,p.jsx)("div",{children:(0,p.jsx)(f.yNx,{strokeWidth:10})}),(0,p.jsxs)("div",{children:[o.sensor_pressure_connected," / ",o.sensor_pressure_total]})]})]}),(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Vibration"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:`${d.itemValue} ${re(o.ool_vibration,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:null!==(t=o.ool_vibration)&&void 0!==t?t:0}),(0,p.jsx)("h3",{children:"Vibration OOL"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(o.ool_temperature,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:null!==(n=o.ool_temperature)&&void 0!==n?n:0}),(0,p.jsx)("h3",{children:"Temperature OOL"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(o.machine_ool_vibration.length,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:null!==(i=o.machine_ool_vibration.length)&&void 0!==i?i:0}),(0,p.jsx)("h3",{children:"Machine OOL"})]})]}),o.sensor_vibration_total>0&&(0,p.jsxs)("div",{className:d.cardSubItemFooter,children:[(0,p.jsx)("div",{children:(0,p.jsx)(f.yNx,{strokeWidth:10})}),(0,p.jsxs)("div",{children:[o.sensor_vibration_connected," / ",o.sensor_vibration_total]})]})]})]}):(0,p.jsx)(p.Fragment,{}),void 0!=l?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Following Error"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:`${d.itemValue} ${re(l.ool_following_error,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:l.ool_following_error}),(0,p.jsx)("h3",{children:"OOL"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(l.machine_ool_following_error.length,null===s||void 0===s?void 0:s.business_unit_warn,null===s||void 0===s?void 0:s.business_unit_alarm)}`,children:[(0,p.jsx)("h2",{children:l.machine_ool_following_error.length}),(0,p.jsx)("h3",{children:"Machine OOL"})]})]})]})}):(0,p.jsx)(p.Fragment,{}),void 0!=c?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Centerline"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:c.centerline_green}),(0,p.jsx)("h3",{children:"Normal"})]}),s&&s.centerline_warn===s.centerline_alarm&&(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:c.centerline_yellow}),(0,p.jsx)("h3",{children:"Warning"})]}),(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:c.centerline_red}),(0,p.jsx)("h3",{children:"Alarm"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(c.centerline_id_ool.length,null===s||void 0===s?void 0:s.centerline_warn,null===s||void 0===s?void 0:s.centerline_alarm)}`,children:[(0,p.jsx)("h2",{children:c.centerline_id_ool.length}),(0,p.jsx)("h3",{children:"OOL"})]})]})]})}):(0,p.jsx)(p.Fragment,{}),void 0!=_?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Critical Rod Break"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:_.critical_rod_break_green}),(0,p.jsx)("h3",{children:"Normal"})]}),s&&s.critical_rod_break_warn===s.critical_rod_break_alarm&&(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:_.critical_rod_break_yellow}),(0,p.jsx)("h3",{children:"Warning"})]}),(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:_.critical_rod_break_red}),(0,p.jsx)("h3",{children:"Alarm"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(_.critical_rod_break_id_ool.length,null===s||void 0===s?void 0:s.critical_rod_break_warn,null===s||void 0===s?void 0:s.critical_rod_break_alarm)}`,children:[(0,p.jsx)("h2",{children:_.critical_rod_break_id_ool.length}),(0,p.jsx)("h3",{children:"OOL"})]})]})]})}):(0,p.jsx)(p.Fragment,{}),void 0!=h?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Safety"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:h.safety_green}),(0,p.jsx)("h3",{children:"Normal"})]}),s&&s.safety_warn===s.safety_alarm&&(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:h.safety_yellow}),(0,p.jsx)("h3",{children:"Warning"})]}),(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:h.safety_red}),(0,p.jsx)("h3",{children:"Alarm"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(h.safety_id_ool.length,null===s||void 0===s?void 0:s.safety_alarm,null===s||void 0===s?void 0:s.safety_alarm)}`,children:[(0,p.jsx)("h2",{children:h.safety_id_ool.length}),(0,p.jsx)("h3",{children:"OOL"})]})]})]})}):(0,p.jsx)(p.Fragment,{}),void 0!=u?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Quality Factor"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:u.quality_factor_green}),(0,p.jsx)("h3",{children:"Normal"})]}),s&&s.critical_rod_break_warn===s.critical_rod_break_alarm&&(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:u.quality_factor_yellow}),(0,p.jsx)("h3",{children:"Warning"})]}),(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:u.quality_factor_red}),(0,p.jsx)("h3",{children:"Alarm"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(u.quality_factor_id_ool.length,null===s||void 0===s?void 0:s.quality_factor_warn,null===s||void 0===s?void 0:s.quality_factor_alarm)}`,children:[(0,p.jsx)("h2",{children:u.quality_factor_id_ool.length}),(0,p.jsx)("h3",{children:"OOL"})]})]})]})}):(0,p.jsx)(p.Fragment,{}),void 0!=m?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.cardSubItem,children:[(0,p.jsx)("div",{className:d.cardSubItemHeader,children:"Electric"}),(0,p.jsxs)("div",{className:d.cardSubItemBody,children:[(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:m.electric_green}),(0,p.jsx)("h3",{children:"Normal"})]}),s&&s.electric_warn===s.electric_alarm&&(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:m.electric_yellow}),(0,p.jsx)("h3",{children:"Warning"})]}),(0,p.jsxs)("div",{className:d.itemValue,children:[(0,p.jsx)("h2",{children:m.electric_red}),(0,p.jsx)("h3",{children:"Alarm"})]}),(0,p.jsxs)("div",{className:`${d.itemValue} ${re(m.electric_id_ool.length,null===s||void 0===s?void 0:s.electric_warn,null===s||void 0===s?void 0:s.electric_alarm)}`,children:[(0,p.jsx)("h2",{children:m.electric_id_ool.length}),(0,p.jsx)("h3",{children:"OOL"})]})]})]})}):(0,p.jsx)(p.Fragment,{})]}),o||l?(0,p.jsxs)("div",{className:d.cardItem1Footer,children:[(0,p.jsx)("div",{children:"Summary Machine OOL"}),(0,p.jsx)("div",{children:w.length})]}):(0,p.jsx)(p.Fragment,{})]},a)})});return(0,p.jsxs)("div",{className:"container",children:[(0,p.jsxs)("div",{className:d.cardHeader,children:[(0,p.jsxs)("div",{className:d.leftSection,children:[(0,p.jsx)("button",{className:d.buttonFooter,disabled:D,onClick:()=>{ae()},children:(0,p.jsx)(c.RcD,{})}),(0,p.jsxs)("div",{className:d.inputGroup,children:[(0,p.jsx)("label",{htmlFor:"startDate",children:"START DATE :"}),(0,p.jsx)("input",{type:"date",value:(0,l.Yq)(A.start_date,"yyyy-MM-dd"),onChange:e=>S(a=>({...a,start_date:new Date(e.target.value)})),className:d.dateInput,disabled:D,style:{border:"0px solid black",borderRadius:"5px",backgroundColor:D?"#eee":"white",color:"var(--header-color-hover)"}})]}),(0,p.jsxs)("div",{className:d.inputGroup,children:[(0,p.jsx)("label",{htmlFor:"endDate",children:"END DATE :"}),(0,p.jsx)("input",{type:"date",value:(0,l.Yq)(A.end_date,"yyyy-MM-dd"),onChange:e=>S(a=>({...a,end_date:new Date(e.target.value)})),className:d.dateInput,disabled:D,style:{border:"0px solid black",borderRadius:"5px",backgroundColor:D?"#eee":"white",color:"var(--header-color-hover)"}})]}),(0,p.jsxs)("div",{className:d.switchGroup,children:[(0,p.jsx)("label",{htmlFor:"realtime",children:"Realtime"}),(0,p.jsxs)("label",{className:d.switch,children:[(0,p.jsx)("input",{type:"checkbox",id:"realtime",checked:D,onChange:()=>{N(e=>!e)}}),(0,p.jsx)("span",{className:d.slider})]})]}),(0,p.jsx)("div",{className:d.autoScroll,children:(0,p.jsxs)("label",{className:d.checkAuto,children:[(0,p.jsx)("input",{type:"checkbox",checked:W,onChange:()=>T(!W)}),(0,p.jsx)("span",{children:"Auto Scroll"})]})})]}),(0,p.jsx)("div",{className:d.rightSection,children:"DASHBOARD PREDICTIVE MAINTENANCE"})]}),(0,p.jsx)("div",{className:d.cardWrapperContainer,children:(0,p.jsx)("div",{className:d.cardContainer,style:{padding:W?"1rem":"0"},children:(0,p.jsxs)("div",{className:z,children:[W&&(0,p.jsx)("div",{className:d.scrollContent,children:(0,p.jsx)(ne,{})}),(0,p.jsx)("div",{className:Y,children:(0,p.jsx)(ne,{})})]})})})]})}}}]);
//# sourceMappingURL=614.7b4e14ae.chunk.js.map